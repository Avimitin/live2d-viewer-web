{"version":3,"file":"js/app.6d3ae2c0.js","mappings":"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","sources":["webpack://live2d-viewer-web/./src/utils/index.ts","webpack://live2d-viewer-web/./src/app/helpers.ts","webpack://live2d-viewer-web/./src/app/data.ts","webpack://live2d-viewer-web/./src/app/patches.ts","webpack://live2d-viewer-web/./src/app/zip.ts","webpack://live2d-viewer-web/./src/app/Filter.ts","webpack://live2d-viewer-web/./src/app/Live2DModel.ts","webpack://live2d-viewer-web/./src/tools/dragging.ts","webpack://live2d-viewer-web/./src/app/ModelLoadingState.ts","webpack://live2d-viewer-web/./src/app/ModelEntity.ts","webpack://live2d-viewer-web/./src/app/PixiApp.ts","webpack://live2d-viewer-web/./src/utils/storage.ts","webpack://live2d-viewer-web/./src/store/app.ts","webpack://live2d-viewer-web/./src/components/ModelList.vue?16a0","webpack://live2d-viewer-web/./src/components/ModelList.vue","webpack://live2d-viewer-web/./src/components/ModelList.vue?7666","webpack://live2d-viewer-web/./src/components/ModelPicker.vue?cbdf","webpack://live2d-viewer-web/./src/components/ModelPicker.vue","webpack://live2d-viewer-web/./src/components/ModelPicker.vue?64e9","webpack://live2d-viewer-web/./src/utils/arr.ts","webpack://live2d-viewer-web/./src/utils/file.ts","webpack://live2d-viewer-web/./src/app/upload.ts","webpack://live2d-viewer-web/./src/components/ModelCreation.vue?9b26","webpack://live2d-viewer-web/./src/components/ModelCreation.vue","webpack://live2d-viewer-web/./src/components/ModelCreation.vue?795d","webpack://live2d-viewer-web/./src/components/ModelEditor.vue?a8e4","webpack://live2d-viewer-web/./src/components/ModelEditor.vue","webpack://live2d-viewer-web/./src/components/ModelEditor.vue?1e36","webpack://live2d-viewer-web/./src/tools/Background.ts","webpack://live2d-viewer-web/./src/components/DropZone.vue?aee5","webpack://live2d-viewer-web/./src/components/DropZone.vue","webpack://live2d-viewer-web/./src/components/DropZone.vue?3e94","webpack://live2d-viewer-web/./src/components/Settings.vue?c236","webpack://live2d-viewer-web/./src/components/Settings.vue","webpack://live2d-viewer-web/./src/components/Settings.vue?b3ff","webpack://live2d-viewer-web/./src/components/ModelInfo.vue?70cb","webpack://live2d-viewer-web/./src/components/ModelInfo.vue","webpack://live2d-viewer-web/./src/components/ModelInfo.vue?1a1d","webpack://live2d-viewer-web/./src/App.vue?2a5e","webpack://live2d-viewer-web/./src/App.vue","webpack://live2d-viewer-web/./src/App.vue?7ccd","webpack://live2d-viewer-web/./src/plugins/vuetify.ts","webpack://live2d-viewer-web/./src/main.ts","webpack://live2d-viewer-web/webpack/bootstrap","webpack://live2d-viewer-web/webpack/runtime/chunk loaded","webpack://live2d-viewer-web/webpack/runtime/compat get default export","webpack://live2d-viewer-web/webpack/runtime/define property getters","webpack://live2d-viewer-web/webpack/runtime/global","webpack://live2d-viewer-web/webpack/runtime/hasOwnProperty shorthand","webpack://live2d-viewer-web/webpack/runtime/make namespace object","webpack://live2d-viewer-web/webpack/runtime/node module decorator","webpack://live2d-viewer-web/webpack/runtime/jsonp chunk loading","webpack://live2d-viewer-web/webpack/startup"],"sourcesContent":["export async function ping(url: string): Promise<boolean> {\n    try {\n        return (await fetch(url)).ok;\n    } catch (e) {\n        return false;\n    }\n}\n","export function isSettingsFileV2(file: string) {\n    return file.endsWith('model.json');\n}\n\nexport function isSettingsFileV3(file: string) {\n    return file.endsWith('model3.json');\n}\n\nexport function isSettingsFile(file: string) {\n    return isSettingsFileV2(file) || isSettingsFileV3(file);\n}\n\nexport function isMocFileV2(file: string) {\n    return file.endsWith('.moc');\n}\n\nexport function isMocFileV3(file: string) {\n    return file.endsWith('.moc3');\n}\n\nexport function isMocFile(file: string) {\n    return isMocFileV2(file) || isMocFileV3(file);\n}\n","import { CommonModelJSON } from '@/global';\nimport { isMocFile, isSettingsFile } from './helpers';\n\ndeclare const __SOURCE_REPOSITORIES__: string[];\n\nexport interface TreeNode {\n    id: number;\n    name: string;\n    children?: TreeNode[];\n    files?: string[];\n    error?: unknown;\n    modelCount: number;\n}\n\nlet uid = 0;\n\nconst JSDELIVR_PREFIX = 'https://cdn.jsdelivr.net/gh/';\n\nconst tasks = new Map<TreeNode, Promise<void>>();\n\nconst rootNodes: TreeNode[] = __SOURCE_REPOSITORIES__.map(repo => ({\n    id: uid++,\n    name: repo,\n    children: [],\n    files: [],\n    modelCount: 0,\n}));\n\nconst settingsJSONs: Record<string, CommonModelJSON> = {};\n\n// preload\nrootNodes.forEach(loadRootNode);\n\nexport function getRootNodes(): TreeNode[] {\n    return rootNodes;\n}\n\nexport function loadRootNode(node: TreeNode): Promise<void> {\n    if (!rootNodes.includes(node)) {\n        return Promise.resolve();\n    }\n\n    if (!tasks.get(node)) {\n        const task = fetch(node.name.toLowerCase().replace('/', '') + '.json')\n            .then(res => res.json())\n            .then(data => {\n                node.name = data.models.name;\n                node.children = data.models.children;\n                node.files = data.models.files;\n\n                traverseNode(node, n => n.id = uid++);\n                countModels(node);\n\n                Object.assign(settingsJSONs, data.settings);\n            })\n            .catch(e => node.error = e);\n\n        tasks.set(node, task);\n\n        return task;\n    }\n\n    return tasks.get(node)!;\n}\n\nfunction countModels(node: TreeNode): number {\n    node.modelCount = node.files?.length || 0;\n\n    for (const child of node.children || []) {\n        node.modelCount += countModels(child);\n    }\n\n    return node.modelCount;\n}\n\nexport function traverseNode(node: TreeNode, fn: (node: TreeNode) => void) {\n    fn(node);\n\n    if (node.children) {\n        for (const child of node.children) {\n            traverseNode(child, fn);\n        }\n    }\n}\n\nexport function getFileURL(folder: TreeNode, file: string): string | undefined {\n    const folderPath = getNodePath(folder);\n\n    if (folderPath) {\n        let filePath = encodeURI(folderPath + '/' + file);\n\n        return JSDELIVR_PREFIX + filePath;\n    }\n}\n\n/**\n * Converts the jsDelivr URL to GitHub's raw URL.\n * \n * - `https://cdn.jsdelivr.net/gh/<repo>/<file>`\n * - `https://raw.githubusercontent.com/<repo>/master/<file>`\n */\nexport function getAlternativeURL(url: string): string {\n    const repoAndFile = url.replace(JSDELIVR_PREFIX, '');\n    const names = repoAndFile.split('/');\n    const repo = names.slice(0, 2).join('/');\n    const file = names.slice(2).join('/');\n\n    return `https://raw.githubusercontent.com/${repo}/master/${file}`;\n}\n\nexport function getNodePath(node: TreeNode): string | undefined {\n    const search = (nodes: TreeNode[]): string | undefined => {\n        for (const _node of nodes) {\n            if (_node === node) {\n                return _node.name;\n            }\n\n            if (_node.children) {\n                const subPath = search(_node.children);\n\n                if (subPath) {\n                    return _node.name + '/' + subPath;\n                }\n            }\n        }\n    };\n\n    return search(rootNodes);\n}\n\nexport function validateURL(url: string): string | undefined {\n    if (isSettingsFile(url) || url.endsWith('.zip')) {\n        return;\n    }\n\n    if (isMocFile(url)) {\n        if (getSettingsJSON(url)) {\n            return;\n        }\n\n        return 'Error: Cannot display a moc file that doesn\\'t belong to any source repository';\n    }\n\n    return 'Warning: Unknown URL type. The model may not be loaded correctly';\n}\n\nexport function getSettingsJSON(mocURL: string): CommonModelJSON | undefined {\n    if (mocURL.startsWith(JSDELIVR_PREFIX)) {\n        let mocFile = mocURL.replace(JSDELIVR_PREFIX, '');\n\n        mocFile = decodeURI(mocFile);\n\n        return settingsJSONs[mocFile];\n    }\n}\n","import {\n    Cubism2ModelSettings,\n    Cubism2Spec,\n    Cubism4InternalModel,\n    Cubism4ModelSettings,\n    CubismSpec,\n    InternalModel,\n    Live2DFactory,\n    Live2DFactoryContext,\n    Live2DLoader,\n    XHRLoader,\n    folderName,\n} from 'pixi-live2d-display';\nimport JSON5 from 'json5';\nimport { ping } from '@/utils';\nimport { snakeCase, unionBy } from 'lodash-es';\nimport { url as urlUtils } from '@pixi/utils';\nimport { getAlternativeURL, getSettingsJSON } from './data';\nimport { CommonModelJSON } from '@/global';\nimport { isMocFile, isMocFileV3 } from './helpers';\n\ninterface PatchedInternalModel extends InternalModel {\n    init(): void;\n}\n\n// replace the XHRLoader to handle failures\nLive2DLoader.middlewares[Live2DLoader.middlewares.indexOf(XHRLoader.loader)] = async (context, next) => {\n    const url = context.settings ? context.settings.resolveURL(context.url) : context.url;\n\n    try {\n        await XHRLoader.loader(context, next);\n        return;\n    } catch (e) {\n        if (!(e && typeof e === 'object' && 'status' in e && e.status === 403 && url.includes('jsdelivr'))) {\n            throw e;\n        }\n\n        console.warn('Received 403 response from jsDelivr, switching to the alternative URL');\n    }\n\n    context.url = getAlternativeURL(url);\n\n    await XHRLoader.loader(context, next);\n\n    return next();\n};\n\n// replace the default urlToJSON middleware\nLive2DFactory.live2DModelMiddlewares[Live2DFactory.live2DModelMiddlewares.indexOf(Live2DFactory.urlToJSON)] = urlToJSON;\n\nconst defaultInit = (InternalModel.prototype as PatchedInternalModel).init;\n\n(InternalModel.prototype as PatchedInternalModel).init = async function (this: PatchedInternalModel) {\n    await patchInternalModel(this);\n    defaultInit.call(this);\n};\n\nasync function urlToJSON(context: Live2DFactoryContext, next: (err?: unknown) => Promise<void>) {\n    if (typeof context.source === 'string') {\n\n        const url = context.source;\n\n        let json: CommonModelJSON;\n\n        if (isMocFile(url)) {\n            json = getSettingsJSON(url) as NonNullable<ReturnType<typeof getSettingsJSON>>;\n\n            if (!json) {\n                throw new Error('Cannot find settings JSON from moc');\n            }\n\n            if (isMocFileV3(url)) {\n                json.url = urlUtils.resolve(url, 'dummy.model3.json');\n\n                const json3 = json as CubismSpec.ModelJSON;\n\n                json3.FileReferences.Moc = url;\n\n                // construct motion definitions from the plain string array\n                if (json3.FileReferences.Motions?.['']?.length && typeof json3.FileReferences.Motions[''][0] === 'string') {\n                    json3.FileReferences.Motions[''] = json3.FileReferences.Motions[''].map(\n                        motionFile => ({ File: motionFile as unknown as string }),\n                    );\n                }\n            } else {\n                json.url = urlUtils.resolve(url, 'dummy.model.json');\n\n                const json2 = json as Cubism2Spec.ModelJSON;\n\n                json2.model = url;\n\n                // construct motion definitions from the plain string array\n                if (json2.motions?.['']?.length && typeof json2.motions[''][0] === 'string') {\n                    json2.motions[''] = json2.motions[''].map(\n                        motionFile => ({ file: motionFile as unknown as string }),\n                    );\n                }\n            }\n        } else {\n            let jsonText = await fetch(url).then(res => res.text());\n\n            jsonText = replaceJSONText(jsonText, url);\n\n            // some JSONs are poorly formatted, but can possibly be parsed by JSON5\n            json = JSON5.parse(jsonText);\n\n            json.url = url;\n        }\n\n        await patchJSON(json, url);\n\n        setSingleMotionAsIdle(json);\n\n        context.source = json;\n\n        console.log(json);\n\n        context.live2dModel.emit('settingsJSONLoaded', json);\n    }\n\n    return next();\n}\n\nfunction replaceJSONText(jsonText: string, url: string) {\n    for (const patch of patches) {\n        if (url.includes(encodeURI(patch.search)) && patch.replace) {\n            jsonText = patch.replace(jsonText, url);\n        }\n    }\n\n    return jsonText;\n}\n\nasync function patchJSON(json: CommonModelJSON, url: string) {\n    for (const patch of patches) {\n        if (url.includes(encodeURI(patch.search)) && patch.patch) {\n            await patch.patch(json, url);\n        }\n    }\n}\n\nexport async function patchInternalModel(internalModel: InternalModel) {\n    for (const patch of patches) {\n        if (internalModel.settings.url.includes(encodeURI(patch.search)) && patch.patchInternalModel) {\n            await patch.patchInternalModel(internalModel);\n        }\n    }\n}\n\nconst patches: {\n    search: string;\n    replace?: (jsonText: string, url: string) => string;\n    patch?: (json: CommonModelJSON, url: string) => void | Promise<void>;\n    patchInternalModel?: (internalModel: InternalModel) => void | Promise<void>;\n}[] = [{\n    search: '', //  Horcrux College\n\n    replace(jsonText: string) {\n        // add missing commas\n        return jsonText.replace(/mtn\"([^,])/gm, 'mtn\",$1');\n    },\n\n    patch(json: Partial<Cubism2Spec.ModelJSON>) {\n        // `textures` is an object with a single value which is the real textures array,\n        // like { \"textures\": { '123': [\"texture_00.png\"] } }\n        if (json.textures && !Array.isArray(json.textures)) {\n            const realArray = Object.values(json.textures)[0] as string[];\n\n            if (Array.isArray(realArray)) {\n                json.textures = realArray\n                    // some paths are missing the folder prefix\n                    .map((tex: string) => tex.startsWith('textures/') ? tex : 'textures/' + tex);\n            }\n        }\n    },\n}, {\n    search: '', //  Girls Frontline\n\n    async patch(json: Partial<Cubism2Spec.ModelJSON>, url: string) {\n        extractCubism2IdleMotions(json, ['daiji']);\n\n        if (!json.name) {\n            // set a proper name\n            json.name = folderName(url.replace(/(normal|destroy).model.json/, ''));\n        }\n\n        // prefix paths of motion files\n        if (json.motions?.idle?.length) {\n            // only check and fix the first one\n            const motion0 = json.motions.idle[0] as Partial<Cubism2Spec.Motion>;\n\n            if (motion0.file?.startsWith('daiji')) {\n                const fileExists = await ping(urlUtils.resolve(url, motion0.file));\n\n                if (!fileExists) {\n                    // misplaced motion file\n                    motion0.file = 'motions/' + motion0.file;\n                }\n            }\n        }\n    },\n}, {\n    search: '', //  Unknown Bride\n\n    async patch(json: Partial<CubismSpec.ModelJSON>, url: string) {\n        // add missing textures\n        if (json.FileReferences?.Textures?.length === 0) {\n            const tex0Exists = await ping(urlUtils.resolve(url, 'textures/texture_00.png'));\n\n            json.FileReferences.Textures.push(\n                // two kinds of texture name\n                tex0Exists ? 'textures/texture_00.png' : 'textures/texture_00 .png',\n            );\n        }\n\n        // extract idle motions\n        extractCubism4IdleMotions(json, ['home', 'gacha']);\n    },\n}, {\n    search: '', // Nerco TokyoNerco\n\n    async patch(json: Partial<Cubism2Spec.ModelJSON | CubismSpec.ModelJSON>, url: string) {\n        // some textures are misplaced\n        const correctTexture = async (texture: string) => {\n            if (!await ping(urlUtils.resolve(url, texture))) {\n                return texture.replace('/texture', '/android/texture');\n            }\n\n            return texture;\n        };\n\n        if (Cubism2ModelSettings.isValidJSON(json)) {\n            if (json.textures) {\n                json.textures = await Promise.all(json.textures.map(correctTexture));\n            }\n\n            if (json.motions) {\n                // rename `File` to `file` in each motion\n                for (const motionGroup of Object.values(json.motions) as Record<string, string>[][]) {\n                    if (motionGroup?.length) {\n                        for (const motion of motionGroup) {\n                            motion.file = motion.file ?? motion.File;\n\n                            delete motion.File;\n                        }\n                    }\n                }\n\n                // some idle motions are misplaced in main group\n                if (!json.motions.idle?.length && json.motions['']) {\n                    json.motions.idle = json.motions[''].filter((motion: Cubism2Spec.Motion) => motion.file?.includes('loop'));\n                }\n            }\n        } else if (Cubism4ModelSettings.isValidJSON(json)) {\n            if (json.FileReferences?.Textures) {\n                json.FileReferences.Textures = await Promise.all(json.FileReferences.Textures.map(correctTexture));\n            }\n\n            if (json.FileReferences?.Motions) {\n                if (!json.FileReferences.Motions.Idle?.length && json.FileReferences.Motions['']) {\n                    json.FileReferences.Motions.Idle = json.FileReferences.Motions['']\n                        .filter((motion: CubismSpec.Motion) => motion.File?.includes('loop'));\n                }\n            }\n        }\n    },\n}, {\n    search: '', //  Destiny Child\n\n    patch(json: Partial<Cubism2Spec.ModelJSON>) {\n        if (json.motions?.['']?.length && !json.motions?.idle?.length) {\n            // deep clone all the motions as idle motion\n            json.motions.idle = json.motions?.[''].map(motion => ({ ...motion }));\n        }\n    },\n}, {\n    search: '', //  Azur Lane\n\n    patch(json: Partial<CubismSpec.ModelJSON>) {\n        extractCubism4IdleMotions(json, ['idle']);\n    },\n}, {\n    search: '', //  Girl Cafe Gun\n\n    patch(json: Partial<CubismSpec.ModelJSON>) {\n        extractCubism4IdleMotions(json, ['stand']);\n    },\n\n    patchInternalModel(internalModel: Cubism4InternalModel) {\n        // convert the case of parameter names\n        // e.g. ParamAngleX -> PARAM_ANGLE_X\n        for (const prop of Object.keys(internalModel) as (keyof Cubism4InternalModel)[]) {\n            if (prop.startsWith('idParam')) {\n                (internalModel as any as Record<string, string>)[prop] = snakeCase(internalModel[prop] as string).toUpperCase();\n            }\n        }\n    },\n}, {\n    search: 'princesses', // Sacred Sword Princesses\n\n    patch(json: Partial<Cubism2Spec.ModelJSON>) {\n        extractCubism2IdleMotions(json, ['default', 'loop']);\n    },\n}, {\n    search: '', // 2 Honkai Impact 2\n\n    patch(json: Partial<Cubism2Spec.ModelJSON>) {\n        removeSoundDefs(json);\n\n        // no empty name\n        if (json.name === '') {\n            delete json.name;\n        }\n    },\n}, {\n    search: '', //  Warship Girls\n\n    patch(json: Partial<Cubism2Spec.ModelJSON>) {\n        removeSoundDefs(json);\n    },\n}, {\n    search: '', //  Iron Saga\n\n    patch(json: Partial<Cubism2Spec.ModelJSON>) {\n        removeSoundDefs(json);\n    },\n}, {\n    search: '', //  Noah Fantasy\n\n    patch(json: Partial<Cubism2Spec.ModelJSON>) {\n        // just... don't name it \"model\"\n        if (json.name === 'model') {\n            delete json.name;\n        }\n    },\n}];\n\n/**\n * Sets a motion as the idle motion if it's the only one in this model.\n */\nfunction setSingleMotionAsIdle(json: Partial<CommonModelJSON>) {\n    const motions = (json as CubismSpec.ModelJSON).FileReferences?.Motions;\n\n    if (motions) {\n        if (!motions.Idle?.[0] && motions['']?.length === 1) {\n            // deep clone the array\n            motions.Idle = motions[''].map(motion => ({ ...motion }));\n        }\n    }\n}\n\n/**\n * Extracts non-standard idle motions into the \"idle\" group.\n *\n * @param json\n * @param keywords Strings in lowercase.\n */\nfunction extractCubism2IdleMotions(json: Partial<Cubism2Spec.ModelJSON>, keywords: string[]) {\n    if (json.motions) {\n        const idleMotions: Cubism2Spec.Motion[] = [];\n\n        for (const [group, motions] of Object.entries(json.motions)) {\n            if (group !== 'idle' && Array.isArray(motions)) {\n                for (const motion of motions) {\n                    for (const keyword of keywords) {\n                        if (motion.file && motion.file.toLowerCase().includes(keyword)) {\n                            idleMotions.push(motion);\n                        }\n                    }\n                }\n            }\n        }\n\n        if (idleMotions.length) {\n            json.motions.idle = unionBy(json.motions.idle, idleMotions, 'file');\n        }\n    }\n}\n\n/**\n * Extracts non-standard idle motions into the \"Idle\" group.\n *\n * @param json\n * @param keywords Strings in lowercase.\n */\nfunction extractCubism4IdleMotions(json: Partial<CubismSpec.ModelJSON>, keywords: string[]) {\n    if (json.FileReferences?.Motions) {\n        const idleMotions: CubismSpec.Motion[] = [];\n\n        for (const [group, motions] of Object.entries(json.FileReferences.Motions)) {\n            if (group !== 'Idle' && Array.isArray(motions)) {\n                for (const motion of motions) {\n                    for (const keyword of keywords) {\n                        if (motion.File && motion.File.toLowerCase().includes(keyword)) {\n                            idleMotions.push(motion);\n                        }\n                    }\n                }\n            }\n        }\n\n        if (idleMotions.length) {\n            json.FileReferences.Motions.Idle = unionBy(json.FileReferences.Motions.Idle, idleMotions, 'File');\n        }\n    }\n}\n\n/**\n * Some models have sound definitions, but the sound files are not appearing in the repository,\n * so it's better to remove them to reduce the amount of errors in console.\n */\nfunction removeSoundDefs(json: Partial<Cubism2Spec.ModelJSON>) {\n    if (json.motions) {\n        for (const motionGroup of Object.values(json.motions as Record<string, Cubism2Spec.Motion[]>)) {\n            if (motionGroup?.length) {\n                for (const motion of motionGroup) {\n                    motion.sound = undefined;\n                }\n            }\n        }\n    }\n}\n","import { ZipLoader } from 'pixi-live2d-display';\nimport JSZip from 'jszip';\n\nZipLoader.zipReader = (data: Blob, url: string) => JSZip.loadAsync(data);\n\nZipLoader.readText = (jsZip: JSZip, path: string) => {\n    const file = jsZip.file(path);\n\n    if (!file) {\n        throw new Error('Cannot find file: ' + path);\n    }\n\n    return file.async('text');\n};\n\nZipLoader.getFilePaths = (jsZip: JSZip) => {\n    const paths: string[] = [];\n\n    jsZip.forEach(relativePath => paths.push(relativePath));\n\n    return Promise.resolve(paths);\n};\n\nZipLoader.getFiles = (jsZip: JSZip, paths: string[]) =>\n    Promise.all(paths.map(\n        async path => {\n            const fileName = path.slice(path.lastIndexOf('/') + 1);\n\n            const blob = await jsZip.file(path)!.async('blob');\n\n            return new File([blob], fileName);\n        }));\n","import { PixelateFilter } from '@pixi/filter-pixelate';\nimport { OutlineFilter } from '@pixi/filter-outline';\nimport { AsciiFilter } from '@pixi/filter-ascii';\nimport { AlphaFilter } from '@pixi/filter-alpha';\nimport { CRTFilter } from '@pixi/filter-crt';\nimport { NoiseFilter } from '@pixi/filter-noise';\nimport { DisplayObject } from '@pixi/display';\n\nexport namespace Filter {\n    export const filters = {\n        Outline: new OutlineFilter(4),\n        Pixelate: new PixelateFilter(4),\n        CRT: new CRTFilter({\n            lineWidth: 3,\n            lineContrast: 0.3,\n            vignetting: 0,\n        }),\n        Noise: new NoiseFilter(0.4),\n        Ascii: new AsciiFilter(),\n        Alpha: new AlphaFilter(0.7),\n    };\n\n    export function set(target: DisplayObject, filterNames: (keyof typeof filters)[]) {\n        target.filters = [];\n\n        for (const name of filterNames) {\n            target.filters.push(filters[name]);\n        }\n    }\n\n    export function update(dt: number) {\n        filters.Noise.seed = Math.random();\n        filters.CRT.seed = Math.random();\n        filters.CRT.time += dt * 0.01;\n    }\n\n    export function release(target: DisplayObject) {\n        target.filters = [];\n    }\n}\n","import { ExpressionManager, Live2DFactoryContext, Live2DModel as BaseLive2DModel } from 'pixi-live2d-display';\nimport { HitAreaFrames } from 'pixi-live2d-display/extra';\nimport { Sprite } from '@pixi/sprite';\nimport { Texture, Renderer } from '@pixi/core';\nimport { Ticker } from '@pixi/ticker';\nimport './patches';\nimport './zip';\nimport { Filter } from '@/app/Filter';\n\nBaseLive2DModel.registerTicker(Ticker);\n\ninterface PatchedExpressionManager extends ExpressionManager {\n    _setExpression(expression: unknown): number;\n}\n\nexport class Live2DModel extends BaseLive2DModel {\n    factoryContext!: Live2DFactoryContext;\n\n    hitAreaFrames: HitAreaFrames;\n    background: Sprite;\n\n    backgroundVisible = false;\n\n    currentMotionStartTime = performance.now();\n    currentMotionDuration = 0;\n\n    constructor() {\n        super();\n\n        this.hitAreaFrames = new HitAreaFrames();\n        this.hitAreaFrames.visible = false;\n\n        this.background = Sprite.from(Texture.WHITE);\n        this.background.alpha = 0.2;\n        this.background.visible = false;\n\n        this.once('modelLoaded', this._init);\n    }\n\n    _init() {\n        this.addChild(this.hitAreaFrames);\n        this.addChild(this.background);\n\n        this.background.width = this.internalModel.width;\n        this.background.height = this.internalModel.height;\n\n        this.anchor.set(0.5, 0.5);\n\n        this.on('hit', this.startHitMotion);\n\n        this.internalModel.motionManager.on('motionStart', (group: string, index: number) => {\n            this.currentMotionStartTime = this.elapsedTime;\n            this.currentMotionDuration = 0;\n\n            const motion = this.internalModel.motionManager.motionGroups[group]?.[index];\n\n            if (motion) {\n                if ('_loopDurationSeconds' in motion) {\n                    this.currentMotionDuration = motion._loopDurationSeconds * 1000;\n                } else if ('getDurationMSec' in motion) {\n                    this.currentMotionDuration = motion.getDurationMSec();\n                }\n            }\n        });\n\n        const expressionManager = this.internalModel.motionManager.expressionManager as PatchedExpressionManager | undefined;\n\n        if (expressionManager) {\n            const originalStartMotion = expressionManager._setExpression;\n\n            expressionManager._setExpression = (expression: unknown) => {\n                originalStartMotion.call(expressionManager, expression);\n\n                this.emit('expressionSet', (expressionManager.expressions as unknown[]).indexOf(expression));\n            };\n\n            let reserveExpressionIndex = expressionManager.reserveExpressionIndex;\n\n            Object.defineProperty(expressionManager, 'reserveExpressionIndex', {\n                get: () => reserveExpressionIndex,\n                set: (index: number) => {\n                    reserveExpressionIndex = index;\n\n                    this.emit('expressionReserved', index);\n                },\n            });\n        }\n    }\n\n    startHitMotion(hitAreaNames: string[]) {\n        for (let area of hitAreaNames) {\n            area = area.toLowerCase();\n\n            const possibleGroups = [area, 'tap' + area, 'tap_' + area, 'tap'];\n\n            for (const possibleGroup of possibleGroups) {\n                for (let group of Object.keys(this.internalModel.motionManager.definitions)) {\n                    if (possibleGroup === group.toLowerCase()) {\n                        this.motion(group);\n                        return;\n                    }\n                }\n            }\n        }\n    }\n\n    updateTransform() {\n        super.updateTransform();\n\n        // since the background's `visible` is always false, we need to manually update its transform\n        if (this.backgroundVisible) {\n            this.background.updateTransform();\n        }\n    }\n\n    override _render(renderer: Renderer) {\n        // render background before the model\n        if (this.backgroundVisible) {\n            this.background.visible = true;\n\n            this.background.render(renderer);\n\n            this.background.visible = false;\n        }\n\n        super._render(renderer);\n    }\n\n    destroy(options?: { children?: boolean; texture?: boolean; baseTexture?: boolean }) {\n        super.destroy(options);\n\n        Filter.release(this);\n    }\n}\n","import { Live2DModel } from '@/app/Live2DModel';\nimport { InteractionEvent } from '@pixi/interaction';\n\nexport interface DraggableLive2DModel extends Live2DModel {\n    dragging: boolean;\n    _pointerX: number;\n    _pointerY: number;\n}\n\nexport function draggable(_model: Live2DModel) {\n    const model = _model as DraggableLive2DModel;\n\n    model.on(\"pointerdown\", onPointerDown);\n    model.on(\"pointermove\", onPointerMove);\n    model.on(\"pointerup\", onPointerUp);\n    model.on(\"pointerupoutside\", onPointerUp);\n}\n\nfunction onPointerDown(this: DraggableLive2DModel, e: InteractionEvent) {\n    this.dragging = true;\n    this._pointerX = e.data.global.x - this.x;\n    this._pointerY = e.data.global.y - this.y;\n}\n\nfunction onPointerMove(this: DraggableLive2DModel, e: InteractionEvent) {\n    if (this.dragging) {\n        this.position.x = e.data.global.x - this._pointerX;\n        this.position.y = e.data.global.y - this._pointerY;\n    }\n}\n\nfunction onPointerUp(this: DraggableLive2DModel, e: InteractionEvent) {\n    this.dragging = false;\n}\n","import { lowerCase } from 'lodash-es';\nimport { Live2DFactory } from \"pixi-live2d-display\";\nimport { Live2DModel } from './Live2DModel';\n\nconst enum StageState {\n    NOT_AVAILABLE, PENDING, COMPLETED, FAILED\n}\n\nLive2DFactory.live2DModelMiddlewares.unshift((context, next) => {\n    // save context to the model, this is ugly I know\n    (context.live2dModel as Live2DModel).factoryContext = context;\n\n    return next();\n});\n\nexport class ModelLoadingState {\n\n    stages = {\n        settingsJSON: StageState.PENDING,\n        settings: StageState.NOT_AVAILABLE,\n        textures: StageState.NOT_AVAILABLE,\n        internalModel: StageState.NOT_AVAILABLE,\n        pose: StageState.NOT_AVAILABLE,\n        physics: StageState.NOT_AVAILABLE,\n    };\n\n    text = '';\n\n    constructor() {\n        this.updateText();\n    }\n\n    watch(model: Live2DModel) {\n        model\n            .once('settingsJSONLoaded', () => this.complete('settingsJSON', model))\n            .once('settingsLoaded', () => this.complete('settings', model))\n            .once('textureLoaded', () => this.complete('textures', model))\n            .once('modelLoaded', () => this.complete('internalModel', model))\n\n            // TODO: (plugin) emit \"poseLoadError\" and \"physicsLoadError\"\n            .once('poseLoaded', () => this.complete('pose', model))\n            .once('physicsLoaded', () => this.complete('physics', model));\n    }\n\n    complete(stage: keyof ModelLoadingState['stages'], model: Live2DModel) {\n        if (stage !== 'settingsJSON' && this.stages.settingsJSON !== StageState.COMPLETED) {\n            // FIXME: (plugin) \"settingsJSONLoaded\" and \"settingsLoaded\" are not emitted when loading from local files\n            this.complete('settingsJSON', model);\n            this.complete('settings', model);\n        }\n\n        this.stages[stage] = StageState.COMPLETED;\n\n        if (stage === 'settingsJSON') {\n            this.stages.settings = StageState.PENDING;\n        } else if (stage === 'settings') {\n            this.stages.textures = StageState.PENDING;\n            this.stages.internalModel = StageState.PENDING;\n            model.factoryContext.settings!.pose && (this.stages.pose = StageState.PENDING);\n            model.factoryContext.settings!.physics && (this.stages.physics = StageState.PENDING);\n        }\n\n        this.updateText();\n    }\n\n    updateText() {\n        this.text = Object.entries(this.stages).map(\n            ([stage, state]) => {\n                if (state === StageState.NOT_AVAILABLE) {\n                    return '';\n                }\n\n                let mark;\n\n                switch (state) {\n                    case StageState.PENDING:\n                        mark = '[ ]';\n                        break;\n                    case StageState.COMPLETED:\n                        mark = '[x]';\n                        break;\n                    case StageState.FAILED:\n                        mark = ' X ';\n                        break;\n                }\n\n                return `${mark} Loading ${lowerCase(stage)}`;\n            }\n        ).filter(Boolean).join('\\n');\n    }\n}\n","import { Live2DModel } from './Live2DModel';\nimport { EventEmitter } from '@pixi/utils';\nimport { draggable } from '@/tools/dragging';\nimport { settings } from '@pixi/settings';\nimport { Renderer } from '@pixi/core';\nimport { Extract } from '@pixi/extract';\nimport { Filter } from '@/app/Filter';\nimport { ModelLoadingState } from './ModelLoadingState';\nimport { Live2DFactory } from 'pixi-live2d-display';\n\n// 1x1 green image\nconst THUMBNAIL = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mMU22h6EgADqAHHuWdgTgAAAABJRU5ErkJggg==';\n\nlet uid = 1;\n\nexport class ModelEntity extends EventEmitter {\n    id = uid++;\n    url = '';\n\n    thumbnail = '';\n    aspectRatio = 1;\n\n    name = 'New Model';\n    visible = true;\n\n    private _scaleX = 1;\n    private _scaleY = 1;\n    private _rotation = 0;\n    private _zIndex = 0;\n\n    filters: (keyof typeof Filter.filters)[] = [];\n\n    loadingState = new ModelLoadingState();\n\n    error = '';\n\n    pixiModel?: Live2DModel;\n\n    constructor(source: string | File[], renderer: Renderer) {\n        super();\n\n        this.loadModel(source).then();\n    }\n\n    async loadModel(source: string | File[]) {\n        if (typeof source === 'string') {\n            this.url = source;\n        } else {\n            this.url = '(Local files)';\n        }\n\n        // don't use Live2DModel.fromSync() because when loading from local files,\n        // the \"settingsJSONLoaded\" and \"settingsLoaded\" events will be emitted before\n        // we're able to listen to the Live2DModel instance\n        // TODO: (plugin) improve model creation?\n        const pixiModel = new Live2DModel();\n\n        this.loadingState.watch(pixiModel);\n\n        try {\n            await Live2DFactory.setupLive2DModel(pixiModel, source);\n\n            this.modelLoaded(pixiModel);\n            this.emit('modelLoaded', pixiModel);\n        } catch (e) {\n            console.warn(e);\n\n            this.error = e instanceof Error ? e.message : e + '';\n        }\n    }\n\n    modelLoaded(pixiModel: Live2DModel) {\n        this.pixiModel = pixiModel;\n        this.name = pixiModel.internalModel.settings.name;\n        this.thumbnail = THUMBNAIL;\n        this.aspectRatio = pixiModel.width / pixiModel.height;\n\n        this.updateFilters();\n\n        draggable(pixiModel);\n    }\n\n    initThumbnail(renderer: Renderer) {\n        const pixiModel = this.pixiModel!;\n        settings.RESOLUTION = 0.2;\n\n        const hitAreaFramesVisible = pixiModel.hitAreaFrames.visible;\n        const backgroundVisible = pixiModel.backgroundVisible;\n        pixiModel.hitAreaFrames.visible = false;\n        pixiModel.backgroundVisible = false;\n\n        try {\n            const canvas = (renderer.plugins.extract as Extract).canvas(pixiModel);\n\n            canvas.toBlob(blob => this.thumbnail = URL.createObjectURL(blob!), 'image/webp', 0.01);\n        } catch (e) {\n            console.warn(e);\n        }\n\n        settings.RESOLUTION = 1;\n        pixiModel.hitAreaFrames.visible = hitAreaFramesVisible;\n        pixiModel.backgroundVisible = backgroundVisible;\n    }\n\n    fit(width: number, height: number) {\n        if (this.pixiModel) {\n            let scale = Math.min(width / this.pixiModel.width, height / this.pixiModel.height);\n\n            scale = Math.round(scale * 10) / 10;\n\n            this.scale(scale, scale);\n        }\n    }\n\n    scale(scaleX?: number, scaleY?: number) {\n        this._scaleX = scaleX ?? this._scaleX;\n        this._scaleY = scaleY ?? this._scaleY;\n\n        if (this.pixiModel) {\n            this.pixiModel.scale.set(this._scaleX, this._scaleY);\n        }\n    }\n\n    rotate(rotation: number) {\n        this._rotation = rotation;\n\n        if (this.pixiModel) {\n            this.pixiModel.rotation = rotation;\n        }\n    }\n\n    setZIndex(zIndex: number) {\n        this._zIndex = zIndex;\n\n        if (this.pixiModel) {\n            this.pixiModel.zIndex = zIndex;\n        }\n    }\n\n    setVisible(visible: boolean) {\n        this.visible = visible;\n\n        if (this.pixiModel) {\n            this.pixiModel.visible = visible;\n        }\n    }\n\n    updateFilters() {\n        if (this.pixiModel) {\n            Filter.set(this.pixiModel, this.filters);\n        }\n    }\n\n    destroy() {\n        if (this.pixiModel) {\n            this.pixiModel.destroy({ children: true });\n            this.pixiModel = undefined;\n\n            URL.revokeObjectURL(this.thumbnail);\n        }\n    }\n\n    get zIndex(): number {\n        return this._zIndex;\n    }\n\n    set zIndex(value: number) {\n        this.setZIndex(value);\n    }\n\n    get rotation(): number {\n        return this._rotation;\n    }\n\n    set rotation(value: number) {\n        this.rotate(value);\n    }\n\n    get scaleY(): number {\n        return this._scaleY;\n    }\n\n    set scaleY(value: number) {\n        this.scale(undefined, value);\n    }\n\n    get scaleX(): number {\n        return this._scaleX;\n    }\n\n    set scaleX(value: number) {\n        this.scale(value, value);\n    }\n}\n","import { Filter } from '@/app/Filter';\nimport { Application } from '@pixi/app';\nimport { BatchRenderer, Renderer, extensions } from '@pixi/core';\nimport { Extract } from '@pixi/extract';\nimport { InteractionManager } from '@pixi/interaction';\nimport { TickerPlugin } from '@pixi/ticker';\nimport Stats from 'stats.js';\n\nextensions.add(TickerPlugin, Extract, BatchRenderer, InteractionManager);\n\nexport class PixiApp extends Application {\n    declare renderer: Renderer;\n\n    constructor(stats: Stats) {\n        super({\n            view: document.getElementById('canvas') as HTMLCanvasElement,\n            resizeTo: window,\n            antialias: true,\n            backgroundAlpha: 0,\n        });\n\n        this.ticker.remove(this.render, this);\n\n        this.ticker.add(() => {\n            stats.begin();\n\n            Filter.update(this.ticker.deltaMS);\n\n            this.render();\n\n            stats.end();\n        });\n    }\n}\n","export function save(key: string) {\n    return function(target: object, propertyKey: string, descriptor: PropertyDescriptor) {\n        const set = descriptor.set!;\n\n        descriptor.set = function(value: unknown) {\n            set.call(this, value);\n            saveValue(key, value);\n        };\n\n        const value = loadValue(key, descriptor.get!.call(target));\n        set.call(target, value);\n    };\n}\n\nexport function saveValue<T = unknown>(key: string, value: T) {\n    localStorage.setItem(key, JSON.stringify(value));\n}\n\nexport function loadValue<T = unknown>(key: string, defaultValue: T): T {\n    const data = localStorage.getItem(key);\n\n    if (data === null) {\n        return defaultValue;\n    }\n\n    return JSON.parse(data);\n}\n","import { defineStore } from 'pinia';\nimport { ModelEntity } from '@/app/ModelEntity';\nimport { ExtendedFileList, SoundManager } from 'pixi-live2d-display';\nimport { PixiApp } from '@/app/PixiApp';\nimport { Live2DModel } from '@/app/Live2DModel';\nimport Stats from 'stats.js';\nimport { loadValue, saveValue } from '@/utils/storage';\n\nconst stats = new Stats();\nstats.showPanel(0);\nstats.dom.style.left = '';\nstats.dom.style.right = '0';\n\nexport const useAppStore = defineStore('app', {\n    state: () => ({\n        models: [] as ModelEntity[],\n        pixiApp: new PixiApp(stats),\n        volume: loadValue('volume', SoundManager.volume),\n        showStats: loadValue('stats', true),\n        showModelFrame: loadValue('modelFrame', false),\n        showHitAreaFrames: loadValue('hitAreaFrames', false),\n    }),\n    actions: {\n        init() {\n            // Apply initial state side effects\n            this.updateStatsVisibility(this.showStats);\n            this.updateVolume(this.volume);\n            \n            // Watchers for persistence and side effects are set up in the component or via subscription\n            // But we can also handle them in actions setters\n        },\n        addModel(source: string | ExtendedFileList): number {\n            const model = new ModelEntity(source, this.pixiApp.renderer);\n\n            this.initModel(model);\n            this.models.push(model);\n\n            return model.id;\n        },\n        getModel(id: number) {\n            return this.models.find(m => m.id === id);\n        },\n        initModel(model: ModelEntity) {\n            model.on('modelLoaded', async (pixiModel: Live2DModel) => {\n                if (!this.pixiApp.stage.children.includes(pixiModel)) {\n                    this.pixiApp.stage.addChild(pixiModel);\n\n                    pixiModel.backgroundVisible = this.showModelFrame;\n                    pixiModel.hitAreaFrames.visible = this.showHitAreaFrames;\n                    pixiModel.position.set(this.pixiApp.renderer.width / 2, this.pixiApp.renderer.height / 2);\n\n                    model.fit(this.pixiApp.renderer.width, this.pixiApp.renderer.height);\n                    model.initThumbnail(this.pixiApp.renderer);\n                }\n            });\n        },\n        removeModel(id: number) {\n            const model = this.models.find(model => model.id === id);\n\n            if (model) {\n                this.models.splice(this.models.indexOf(model), 1);\n\n                if (model.pixiModel) {\n                    this.pixiApp.stage.removeChild(model.pixiModel);\n                }\n\n                model.destroy();\n            }\n        },\n        updateStatsVisibility(visible: boolean) {\n            this.showStats = visible;\n            saveValue('stats', visible);\n            if (visible) {\n                document.body.appendChild(stats.dom);\n            } else {\n                stats.dom.parentElement?.removeChild(stats.dom);\n            }\n        },\n        updateVolume(value: number) {\n            this.volume = value;\n            saveValue('volume', value);\n            SoundManager.volume = value;\n        },\n        updateModelFrame(visible: boolean) {\n            this.showModelFrame = visible;\n            saveValue('modelFrame', visible);\n            for (const model of this.models) {\n                if (model?.pixiModel) {\n                    model.pixiModel.backgroundVisible = visible;\n                }\n            }\n        },\n        updateHitAreaFrames(visible: boolean) {\n            this.showHitAreaFrames = visible;\n            saveValue('hitAreaFrames', visible);\n            for (const model of this.models) {\n                if (model?.pixiModel) {\n                    model.pixiModel.hitAreaFrames.visible = visible;\n                }\n            }\n        },\n    },\n});\n","import { defineComponent as _defineComponent } from 'vue'\nimport { renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, withModifiers as _withModifiers, mergeProps as _mergeProps, TransitionGroup as _TransitionGroup } from \"vue\"\n\nconst _hoisted_1 = { class: \"model-item-title text-truncate\" }\n\nimport { computed } from 'vue';\nimport { useDisplay } from 'vuetify';\nimport { useAppStore } from '@/store/app';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'ModelList',\n  props: {\n    modelValue: {},\n    show: { type: Boolean }\n  },\n  emits: ['update:modelValue'],\n  setup(__props: any, { emit: __emit }) {\n\nconst props = __props;\n\nconst emit = __emit;\n\nconst display = useDisplay();\nconst appStore = useAppStore();\n\nconst models = computed(() => appStore.models);\n\nconst paneHeight = computed(() => {\n    return display.xl.value ? 192 : 144;\n});\n\nconst selectedIndex = computed(() => {\n    return models.value.findIndex(model => model.id === props.modelValue);\n});\n\nfunction select(index: number) {\n    const id = models.value[index]?.id ?? 0;\n    emit('update:modelValue', id);\n}\n\nfunction remove(id: number) {\n    if (models.value.length === 1) {\n        emit('update:modelValue', 0);\n    }\n    appStore.removeModel(id);\n}\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_progress_circular = _resolveComponent(\"v-progress-circular\")!\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_v_row = _resolveComponent(\"v-row\")!\n  const _component_v_spacer = _resolveComponent(\"v-spacer\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_card_title = _resolveComponent(\"v-card-title\")!\n  const _component_v_img = _resolveComponent(\"v-img\")!\n  const _component_v_tooltip = _resolveComponent(\"v-tooltip\")!\n  const _component_v_card = _resolveComponent(\"v-card\")!\n  const _component_v_item = _resolveComponent(\"v-item\")!\n  const _component_v_item_group = _resolveComponent(\"v-item-group\")!\n  const _component_v_sheet = _resolveComponent(\"v-sheet\")!\n  const _component_v_slide_y_reverse_transition = _resolveComponent(\"v-slide-y-reverse-transition\")!\n\n  return (_openBlock(), _createBlock(_component_v_slide_y_reverse_transition, null, {\n    default: _withCtx(() => [\n      (__props.show&&models.value.length)\n        ? (_openBlock(), _createBlock(_component_v_sheet, {\n            key: 0,\n            class: \"model-list\",\n            width: \"100%\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_item_group, {\n                mandatory: \"\",\n                class: \"flex-grow-1\",\n                \"model-value\": selectedIndex.value,\n                \"onUpdate:modelValue\": select\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_TransitionGroup, {\n                    class: \"model-group d-flex pa-1 pa-xl-2\",\n                    name: \"move\"\n                  }, {\n                    default: _withCtx(() => [\n                      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(models.value, (model, i) => {\n                        return (_openBlock(), _createBlock(_component_v_item, {\n                          key: model.id\n                        }, {\n                          default: _withCtx(({ isSelected, toggle }) => [\n                            _createVNode(_component_v_card, {\n                              color: model.error?'#631f1f':isSelected?'grey darken-2':'grey darken-3',\n                              class: \"ma-1 ma-xl-2\",\n                              onClick: toggle\n                            }, {\n                              default: _withCtx(() => [\n                                _createVNode(_component_v_tooltip, {\n                                  top: \"\",\n                                  disabled: !model.error\n                                }, {\n                                  activator: _withCtx(({ props }) => [\n                                    _createVNode(_component_v_img, _mergeProps({\n                                      src: model.thumbnail,\n                                      width: model.error?paneHeight.value:model.aspectRatio*paneHeight.value,\n                                      height: paneHeight.value\n                                    }, { ref_for: true }, props), {\n                                      placeholder: _withCtx(() => [\n                                        _createVNode(_component_v_row, {\n                                          class: \"fill-height ma-0\",\n                                          align: \"center\",\n                                          justify: \"center\"\n                                        }, {\n                                          default: _withCtx(() => [\n                                            (!model.error)\n                                              ? (_openBlock(), _createBlock(_component_v_progress_circular, {\n                                                  key: 0,\n                                                  indeterminate: \"\",\n                                                  color: \"grey lighten-5\"\n                                                }))\n                                              : (_openBlock(), _createBlock(_component_v_icon, { key: 1 }, {\n                                                  default: _withCtx(() => [...(_cache[0] || (_cache[0] = [\n                                                    _createTextVNode(\"mdi-alert-circle\", -1)\n                                                  ]))]),\n                                                  _: 1\n                                                }))\n                                          ]),\n                                          _: 2\n                                        }, 1024)\n                                      ]),\n                                      default: _withCtx(() => [\n                                        _createVNode(_component_v_card_title, { class: \"ml-1 pa-0 flex-nowrap text-subtitle-2 text-xl-subtitle-1\" }, {\n                                          default: _withCtx(() => [\n                                            _createElementVNode(\"span\", _hoisted_1, _toDisplayString('#' + model.id + ' ' + model.name), 1),\n                                            _createVNode(_component_v_spacer),\n                                            isSelected\n                                              ? (_openBlock(), _createBlock(_component_v_btn, {\n                                                  key: 0,\n                                                  icon: \"\",\n                                                  onClick: _withModifiers(($event: any) => (remove(model.id)), [\"stop\"])\n                                                }, {\n                                                  default: _withCtx(() => [\n                                                    _createVNode(_component_v_icon, { size: \"20\" }, {\n                                                      default: _withCtx(() => [...(_cache[1] || (_cache[1] = [\n                                                        _createTextVNode(\"mdi-close\", -1)\n                                                      ]))]),\n                                                      _: 1\n                                                    })\n                                                  ]),\n                                                  _: 1\n                                                }, 8, [\"onClick\"]))\n                                              : _createCommentVNode(\"\", true)\n                                          ]),\n                                          _: 2\n                                        }, 1024)\n                                      ]),\n                                      _: 2\n                                    }, 1040, [\"src\", \"width\", \"height\"])\n                                  ]),\n                                  default: _withCtx(() => [\n                                    _createTextVNode(\" \" + _toDisplayString(model.error), 1)\n                                  ]),\n                                  _: 2\n                                }, 1032, [\"disabled\"])\n                              ]),\n                              _: 2\n                            }, 1032, [\"color\", \"onClick\"])\n                          ]),\n                          _: 2\n                        }, 1024))\n                      }), 128))\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }, 8, [\"model-value\"])\n            ]),\n            _: 1\n          }))\n        : _createCommentVNode(\"\", true)\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","<template>\n  <v-slide-y-reverse-transition>\n    <v-sheet v-if=\"show&&models.length\" class=\"model-list\" width=\"100%\">\n      <v-item-group mandatory class=\"flex-grow-1\" :model-value=\"selectedIndex\" @update:model-value=\"select\">\n        <transition-group class=\"model-group d-flex pa-1 pa-xl-2\" name=\"move\">\n          <v-item v-for=\"(model,i) in models\" :key=\"model.id\" v-slot=\"{ isSelected, toggle }\">\n            <v-card :color=\"model.error?'#631f1f':isSelected?'grey darken-2':'grey darken-3'\" class=\"ma-1 ma-xl-2\" @click=\"toggle\">\n              <v-tooltip top :disabled=\"!model.error\">\n                <template v-slot:activator=\"{ props }\">\n                  <v-img :src=\"model.thumbnail\" :width=\"model.error?paneHeight:model.aspectRatio*paneHeight\" :height=\"paneHeight\"\n                         v-bind=\"props\">\n                    <template v-slot:placeholder>\n                      <v-row class=\"fill-height ma-0\" align=\"center\" justify=\"center\">\n                        <v-progress-circular v-if=\"!model.error\" indeterminate\n                                             color=\"grey lighten-5\"></v-progress-circular>\n                        <v-icon v-else>mdi-alert-circle</v-icon>\n                      </v-row>\n                    </template>\n\n                    <v-card-title class=\"ml-1 pa-0 flex-nowrap text-subtitle-2 text-xl-subtitle-1\">\n                      <span class=\"model-item-title text-truncate\">{{ '#' + model.id + ' ' + model.name }}</span>\n                      <v-spacer></v-spacer>\n                      <v-btn icon v-if=\"isSelected\" @click.stop=\"remove(model.id)\"><v-icon size=\"20\">mdi-close</v-icon>\n                      </v-btn>\n                    </v-card-title>\n                  </v-img>\n                </template>\n                {{ model.error }}\n              </v-tooltip>\n            </v-card>\n          </v-item>\n        </transition-group>\n      </v-item-group>\n    </v-sheet>\n  </v-slide-y-reverse-transition>\n</template>\n\n<script setup lang=\"ts\">\nimport { computed } from 'vue';\nimport { useDisplay } from 'vuetify';\nimport { useAppStore } from '@/store/app';\n\nconst props = defineProps<{\n    modelValue: number;\n    show: boolean;\n}>();\n\nconst emit = defineEmits(['update:modelValue']);\n\nconst display = useDisplay();\nconst appStore = useAppStore();\n\nconst models = computed(() => appStore.models);\n\nconst paneHeight = computed(() => {\n    return display.xl.value ? 192 : 144;\n});\n\nconst selectedIndex = computed(() => {\n    return models.value.findIndex(model => model.id === props.modelValue);\n});\n\nfunction select(index: number) {\n    const id = models.value[index]?.id ?? 0;\n    emit('update:modelValue', id);\n}\n\nfunction remove(id: number) {\n    if (models.value.length === 1) {\n        emit('update:modelValue', 0);\n    }\n    appStore.removeModel(id);\n}\n</script>\n\n<style scoped lang=\"stylus\">\n.model-list\n  position relative\n  background-color transparent !important\n  pointer-events auto\n\n  &:before\n    content ''\n    position absolute\n    top 0\n    right 0\n    bottom 0\n    left 0\n    background-color rgba(0, 0, 0, .3)\n\n.model-group\n  overflow auto\n\n.v-card\n  pointer-events auto\n\n.model-item-title\n  line-height 36px\n\n// animation\n\n.move-move\n  transition transform .2s\n</style>","import script from \"./ModelList.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ModelList.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ModelList.vue?vue&type=style&index=0&id=50c9541d&scoped=true&lang=stylus\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-50c9541d\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock } from \"vue\"\n\nimport { ref, computed, watch } from 'vue';\nimport { xor } from 'lodash-es';\nimport { getFileURL, getRootNodes, loadRootNode, TreeNode } from '@/app/data';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'ModelPicker',\n  props: {\n    modelValue: { type: Boolean }\n  },\n  emits: ['update:modelValue', 'select'],\n  setup(__props: any, { emit: __emit }) {\n\n\n\nconst emit = __emit;\n\nconst tree = ref(getRootNodes());\nconst openedFolders = ref<TreeNode[]>([]);\nconst activeFolders = ref<TreeNode[]>([]);\nconst selectedFileIndex = ref(-1);\n\nconst activeFolderFiles = computed(() => {\n    return activeFolders.value.length ? activeFolders.value[0].files || [] : [];\n});\n\nwatch(activeFolders, (value: TreeNode[], oldValue: TreeNode[]) => {\n    const hasChanged = xor(value, oldValue).length !== 0;\n\n    if (hasChanged) {\n        selectedFileIndex.value = -1;\n    }\n});\n\nasync function fetchModels(node: TreeNode) {\n    await loadRootNode(node);\n}\n\nfunction folderOpened(newOpenedFolders: TreeNode[]) {\n    const diff = xor(newOpenedFolders, openedFolders.value);\n\n    if (diff.length) {\n        activeFolders.value = diff.slice(0);\n        openedFolders.value = newOpenedFolders;\n    } else {\n        activeFolders.value = tree.value.slice(0, 1);\n    }\n}\n\nfunction submit() {\n    if (activeFolders.value.length && selectedFileIndex.value >= 0) {\n        const file = getFileURL(activeFolders.value[0], activeFolderFiles.value[selectedFileIndex.value]);\n\n        if (file) {\n            emit('select', file);\n        }\n    }\n\n    emit('update:modelValue', false);\n}\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_toolbar_title = _resolveComponent(\"v-toolbar-title\")!\n  const _component_v_spacer = _resolveComponent(\"v-spacer\")!\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_toolbar = _resolveComponent(\"v-toolbar\")!\n  const _component_v_chip = _resolveComponent(\"v-chip\")!\n  const _component_v_treeview = _resolveComponent(\"v-treeview\")!\n  const _component_v_col = _resolveComponent(\"v-col\")!\n  const _component_v_divider = _resolveComponent(\"v-divider\")!\n  const _component_v_list_item_title = _resolveComponent(\"v-list-item-title\")!\n  const _component_v_list_item_content = _resolveComponent(\"v-list-item-content\")!\n  const _component_v_list_item = _resolveComponent(\"v-list-item\")!\n  const _component_v_list_item_group = _resolveComponent(\"v-list-item-group\")!\n  const _component_v_row = _resolveComponent(\"v-row\")!\n  const _component_v_card_actions = _resolveComponent(\"v-card-actions\")!\n  const _component_v_card = _resolveComponent(\"v-card\")!\n  const _component_v_dialog = _resolveComponent(\"v-dialog\")!\n\n  return (_openBlock(), _createBlock(_component_v_dialog, {\n    \"model-value\": __props.modelValue,\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => (_ctx.$emit('update:modelValue',$event))),\n    width: \"1500\",\n    \"max-width\": \"90vw\"\n  }, {\n    default: _withCtx(() => [\n      _createVNode(_component_v_card, {\n        height: \"1000\",\n        \"max-height\": \"90vh\",\n        class: \"d-flex flex-column\"\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_toolbar, {\n            color: \"primary\",\n            flat: \"\",\n            dense: \"\",\n            class: \"flex-grow-0\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_toolbar_title, null, {\n                default: _withCtx(() => [...(_cache[3] || (_cache[3] = [\n                  _createTextVNode(\"Select a Model\", -1)\n                ]))]),\n                _: 1\n              }),\n              _createVNode(_component_v_spacer),\n              _createVNode(_component_v_btn, {\n                icon: \"\",\n                onClick: submit\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_v_icon, null, {\n                    default: _withCtx(() => [...(_cache[4] || (_cache[4] = [\n                      _createTextVNode(\"mdi-checkbox-marked-circle-outline\", -1)\n                    ]))]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_v_row, {\n            \"no-gutters\": \"\",\n            class: \"content-row flex-grow-1\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_col, { class: \"content-col\" }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_v_treeview, {\n                    activatable: \"\",\n                    \"return-object\": \"\",\n                    \"load-children\": fetchModels,\n                    active: activeFolders.value,\n                    items: tree.value,\n                    \"item-key\": \"id\",\n                    \"open-on-click\": \"\",\n                    \"onUpdate:active\": _cache[0] || (_cache[0] = ($event: any) => ($event.length&&(activeFolders.value=$event))),\n                    \"onUpdate:open\": folderOpened\n                  }, {\n                    prepend: _withCtx(({ open }) => [\n                      _createVNode(_component_v_icon, null, {\n                        default: _withCtx(() => [\n                          _createTextVNode(_toDisplayString(open ? 'mdi-folder-open' : 'mdi-folder'), 1)\n                        ]),\n                        _: 2\n                      }, 1024)\n                    ]),\n                    label: _withCtx(({ item }) => [\n                      _createElementVNode(\"span\", {\n                        class: _normalizeClass({'text-decoration-line-through':item.error})\n                      }, _toDisplayString(item.name), 3),\n                      _createVNode(_component_v_chip, {\n                        \"x-small\": \"\",\n                        class: \"model-count ml-1 px-2 text--secondary\"\n                      }, {\n                        default: _withCtx(() => [\n                          _createTextVNode(_toDisplayString(item.modelCount), 1)\n                        ]),\n                        _: 2\n                      }, 1024)\n                    ]),\n                    _: 1\n                  }, 8, [\"active\", \"items\"])\n                ]),\n                _: 1\n              }),\n              _createVNode(_component_v_divider, { vertical: \"\" }),\n              _createVNode(_component_v_col, { class: \"content-col\" }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_v_list_item_group, {\n                    modelValue: selectedFileIndex.value,\n                    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((selectedFileIndex).value = $event))\n                  }, {\n                    default: _withCtx(() => [\n                      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(activeFolderFiles.value, (file, i) => {\n                        return (_openBlock(), _createBlock(_component_v_list_item, {\n                          key: file,\n                          color: \"primary\",\n                          onDblclick: ($event: any) => {selectedFileIndex.value=i;submit()}\n                        }, {\n                          default: _withCtx(() => [\n                            _createVNode(_component_v_list_item_content, null, {\n                              default: _withCtx(() => [\n                                _createVNode(_component_v_list_item_title, null, {\n                                  default: _withCtx(() => [\n                                    _createTextVNode(_toDisplayString(file), 1)\n                                  ]),\n                                  _: 2\n                                }, 1024)\n                              ]),\n                              _: 2\n                            }, 1024)\n                          ]),\n                          _: 2\n                        }, 1032, [\"onDblclick\"]))\n                      }), 128))\n                    ]),\n                    _: 1\n                  }, 8, [\"modelValue\"])\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_v_divider),\n          _createVNode(_component_v_card_actions, null, {\n            default: _withCtx(() => [...(_cache[5] || (_cache[5] = [\n              _createElementVNode(\"span\", { class: \"text--secondary text-caption\" }, [\n                _createTextVNode(\"The listed models were scraped from \"),\n                _createElementVNode(\"a\", {\n                  target: \"_blank\",\n                  href: \"https://github.com/Eikanya/Live2d-model\"\n                }, \"Eikanya/Live2d-model\"),\n                _createTextVNode(\". All credit goes to their respective creators.\")\n              ], -1)\n            ]))]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }, 8, [\"model-value\"]))\n}\n}\n\n})","<template>\n  <v-dialog :model-value=\"modelValue\" @update:model-value=\"$emit('update:modelValue',$event)\" width=\"1500\" max-width=\"90vw\">\n    <v-card height=\"1000\" max-height=\"90vh\" class=\"d-flex flex-column\">\n      <v-toolbar color=\"primary\" flat dense class=\"flex-grow-0\">\n        <v-toolbar-title>Select a Model</v-toolbar-title>\n        <v-spacer></v-spacer>\n        <v-btn icon @click=\"submit\">\n          <v-icon>mdi-checkbox-marked-circle-outline</v-icon>\n        </v-btn>\n      </v-toolbar>\n\n      <v-row no-gutters class=\"content-row flex-grow-1\">\n        <v-col class=\"content-col\">\n          <v-treeview activatable return-object :load-children=\"fetchModels\" :active=\"activeFolders\" :items=\"tree\"\n                      item-key=\"id\" open-on-click @update:active=\"$event.length&&(activeFolders=$event)\"\n                      @update:open=\"folderOpened\">\n            <template v-slot:prepend=\"{ open }\">\n              <v-icon>\n                {{ open ? 'mdi-folder-open' : 'mdi-folder' }}\n              </v-icon>\n            </template>\n            <template v-slot:label=\"{ item }\">\n                <span :class=\"{'text-decoration-line-through':item.error}\">{{ item.name }}</span>\n                <v-chip x-small class=\"model-count ml-1 px-2 text--secondary\">{{ item.modelCount }}</v-chip>\n            </template>\n          </v-treeview>\n        </v-col>\n\n        <v-divider vertical></v-divider>\n\n        <v-col class=\"content-col\">\n          <v-list-item-group v-model=\"selectedFileIndex\">\n            <v-list-item v-for=\"(file,i) in activeFolderFiles\" :key=\"file\" color=\"primary\"\n                         @dblclick.native=\"selectedFileIndex=i;submit()\">\n              <v-list-item-content>\n                <v-list-item-title>{{ file }}</v-list-item-title>\n              </v-list-item-content>\n            </v-list-item>\n          </v-list-item-group>\n        </v-col>\n      </v-row>\n\n      <v-divider></v-divider>\n\n      <v-card-actions>\n        <span class=\"text--secondary text-caption\">The listed models were scraped from <a target=\"_blank\"\n                                                                             href=\"https://github.com/Eikanya/Live2d-model\">Eikanya/Live2d-model</a>.\n          All credit goes to their respective creators.</span>\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, watch } from 'vue';\nimport { xor } from 'lodash-es';\nimport { getFileURL, getRootNodes, loadRootNode, TreeNode } from '@/app/data';\n\ndefineProps<{\n    modelValue: boolean;\n}>();\n\nconst emit = defineEmits(['update:modelValue', 'select']);\n\nconst tree = ref(getRootNodes());\nconst openedFolders = ref<TreeNode[]>([]);\nconst activeFolders = ref<TreeNode[]>([]);\nconst selectedFileIndex = ref(-1);\n\nconst activeFolderFiles = computed(() => {\n    return activeFolders.value.length ? activeFolders.value[0].files || [] : [];\n});\n\nwatch(activeFolders, (value: TreeNode[], oldValue: TreeNode[]) => {\n    const hasChanged = xor(value, oldValue).length !== 0;\n\n    if (hasChanged) {\n        selectedFileIndex.value = -1;\n    }\n});\n\nasync function fetchModels(node: TreeNode) {\n    await loadRootNode(node);\n}\n\nfunction folderOpened(newOpenedFolders: TreeNode[]) {\n    const diff = xor(newOpenedFolders, openedFolders.value);\n\n    if (diff.length) {\n        activeFolders.value = diff.slice(0);\n        openedFolders.value = newOpenedFolders;\n    } else {\n        activeFolders.value = tree.value.slice(0, 1);\n    }\n}\n\nfunction submit() {\n    if (activeFolders.value.length && selectedFileIndex.value >= 0) {\n        const file = getFileURL(activeFolders.value[0], activeFolderFiles.value[selectedFileIndex.value]);\n\n        if (file) {\n            emit('select', file);\n        }\n    }\n\n    emit('update:modelValue', false);\n}\n</script>\n\n<style scoped lang=\"stylus\">\n.content-row\n  overflow auto\n\n.content-col\n  height 100%\n  overflow auto\n\n.model-count\n  vertical-align text-top\n  pointer-events none\n</style>","import script from \"./ModelPicker.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ModelPicker.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ModelPicker.vue?vue&type=style&index=0&id=7ec31440&scoped=true&lang=stylus\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-7ec31440\"]])\n\nexport default __exports__","export function nonNullableFilter<T extends unknown>(value: T, index: number, array: T[]): value is NonNullable<T> {\n    return value !== undefined && value !== null;\n}\n  ","import { nonNullableFilter } from './arr';\n\nexport function basename(path: string): string {\n    // https://stackoverflow.com/a/15270931\n    return path.split(/[\\\\/]/).pop()!;\n}\n\n/**\n * Checks if it's files being dragged at this drag event.\n *\n * @see https://stackoverflow.com/q/5323668/13237325\n */\nexport function isDraggingFile(event: DragEvent): boolean {\n    return !!event.dataTransfer?.types.some((type) => type === 'Files');\n}\n\nexport async function readFiles(dataTransferItemList: DataTransferItemList): Promise<File[]> {\n    const entries = [...dataTransferItemList].map((item) => item.webkitGetAsEntry()).filter(nonNullableFilter);\n\n    return readEntries(entries);\n}\n\nasync function readEntries(entries: FileSystemEntry[]): Promise<File[]> {\n    const files: File[] = [];\n\n    await Promise.all(\n        entries.map(async (entry) => {\n            if (entry.isFile) {\n                files.push(await readFileEntry(entry as FileSystemFileEntry));\n            } else if (entry.isDirectory) {\n                const subEntries = await readDirEntry(entry as FileSystemDirectoryEntry);\n\n                files.push(...(await readEntries(subEntries)));\n            }\n        })\n    );\n\n    return files;\n}\n\nfunction readDirEntry(dirEntry: FileSystemDirectoryEntry): Promise<FileSystemEntry[]> {\n    return new Promise((resolve, reject) => {\n        dirEntry.createReader().readEntries(resolve, reject);\n    });\n}\n\nasync function readFileEntry(fileEntry: FileSystemFileEntry): Promise<File> {\n    const file = await new Promise<File>((resolve, reject) => fileEntry.file(resolve, reject));\n\n    let relativePath = fileEntry.fullPath;\n\n    // relative path should just be relative...\n    if (relativePath.startsWith('/')) {\n        relativePath = relativePath.slice(1);\n    }\n\n    // let's borrow this property...\n    Object.defineProperty(file, 'webkitRelativePath', {\n        value: relativePath,\n    });\n\n    return file;\n}\n\nexport function readAsBase64(file: File): Promise<string> {\n    return new Promise<string>((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result as string);\n        reader.onerror = reject;\n        reader.readAsDataURL(file);\n    });\n}\n","import { basename } from '@/utils/file';\nimport { Cubism2ModelSettings, Cubism4ModelSettings, FileLoader, ModelSettings } from 'pixi-live2d-display';\nimport { isMocFile, isMocFileV2, isSettingsFile } from './helpers';\n\nconst MAX_SETTINGS_FILES = 5;\n\nlet uid = 0;\n\nconst defaultCreateSettings = FileLoader.createSettings;\n\nFileLoader.createSettings = async (files: File[]) => {\n    if (!files.find(file => isSettingsFile(file.name))) {\n        return createFakeSettings(files);\n    }\n\n    return defaultCreateSettings(files);\n};\n\nexport async function uploadFiles(files: File[]): Promise<ModelSettings[]> {\n    if (files.length === 1 && files[0].name.endsWith('.zip')) {\n        // just let it go...\n        return [];\n    }\n\n    if (files.some(file => isSettingsFile(file.name))) {\n        return createSettings(files);\n    } else {\n        return [createFakeSettings(files)];\n    }\n}\n\nexport async function createSettings(files: File[]): Promise<ModelSettings[]> {\n    const settingsFiles: File[] = [];\n    const nonSettingsFiles: File[] = [];\n\n    for (const file of files) {\n        if (isSettingsFile(file.name)) {\n            settingsFiles.push(file);\n        } else {\n            nonSettingsFiles.push(file);\n        }\n    }\n\n    if (settingsFiles.length > MAX_SETTINGS_FILES) {\n        console.warn(`Too many settings files (${settingsFiles.length}/${MAX_SETTINGS_FILES})`);\n\n        settingsFiles.length = MAX_SETTINGS_FILES;\n    }\n\n    let error: unknown;\n\n    const settingsArray: ModelSettings[] = [];\n\n    await Promise.all(settingsFiles.map(\n        async settingsFile => {\n            try {\n                const partialFiles = [settingsFile, ...nonSettingsFiles];\n\n                const settings = await FileLoader.createSettings(partialFiles);\n\n                settings.validateFiles(partialFiles.map(file => file.webkitRelativePath));\n\n                settingsArray.push(settings);\n            } catch (e) {\n                // just care about the first error\n                error = error || e;\n\n                console.warn(e);\n            }\n        },\n    ));\n\n    // it's OK when there's at least one valid settings file\n    if (!settingsArray.length) {\n        throw error;\n    }\n\n    return settingsArray;\n}\n\nfunction createFakeSettings(files: File[]): ModelSettings {\n    const mocFiles = files.filter(file => isMocFile(file.name));\n\n    if (mocFiles.length !== 1) {\n        const fileList = mocFiles.length ? `(${mocFiles.map(f => `\"${f}\"`).join(',')})` : '';\n\n        throw new Error(`Expected exactly one moc file, got ${mocFiles.length} ${fileList}`);\n    }\n\n    const mocFile = mocFiles[0].webkitRelativePath;\n    const modelName = basename(mocFile).replace(/\\.moc3?/, '');\n\n    const filePaths = files.map(file => file.webkitRelativePath);\n\n    const textures = filePaths.filter(f => f.endsWith('.png'));\n\n    if (!textures.length) {\n        throw new Error('Textures not found');\n    }\n\n    const motions = filePaths.filter(f => f.endsWith('.mtn') || f.endsWith('.motion3.json'));\n    const physics = filePaths.find(f => f.includes('physics'));\n    const pose = filePaths.find(f => f.includes('pose'));\n\n    let settings: ModelSettings;\n\n    if (isMocFileV2(mocFile)) {\n        settings = new Cubism2ModelSettings({\n            url: modelName + '.model.json',\n            textures, pose, physics,\n            model: mocFile,\n            motions: motions.length\n                ? {\n                    '': motions.map(motion => ({ file: motion })),\n                }\n                : undefined,\n        });\n    } else {\n        settings = new Cubism4ModelSettings({\n            url: modelName + '.model3.json',\n            Version: 3,\n            FileReferences: {\n                Moc: mocFile,\n                Textures: textures,\n                Physics: physics,\n                Pose: pose,\n                Motions: motions.length\n                    ? {\n                        '': motions.map(motion => ({ File: motion })),\n                    }\n                    : undefined,\n            },\n        });\n    }\n\n    settings.name = modelName;\n\n    // provide this property for FileLoader\n    (settings as ModelSettings & { _objectURL: string })._objectURL = 'DontTouchMe://' + settings.url;\n\n    return settings;\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, withKeys as _withKeys, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"d-flex align-center\" }\n\nimport { ref, reactive, watch } from 'vue';\nimport ModelPicker from './ModelPicker.vue';\nimport { validateURL } from '@/app/data';\nimport { useAppStore } from '@/store/app';\nimport { uploadFiles } from '@/app/upload';\nimport { ExtendedFileList } from 'pixi-live2d-display';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'ModelCreation',\n  props: {\n    modelValue: { type: Boolean }\n  },\n  emits: ['update:modelValue', 'create', 'error'],\n  setup(__props: any, { emit: __emit }) {\n\nconst props = __props;\n\nconst emit = __emit;\n\nconst appStore = useAppStore();\n\nconst url = ref('https://cdn.jsdelivr.net/gh/Eikanya/Live2d-model/Live2D/Senko_Normals/senko.model3.json');\nconst dropHelpDialog = ref(false);\nconst picker = reactive({\n    dialog: false,\n});\nconst urlError = ref(false);\nconst urlMessages = ref<string[]>([]);\nconst fileInput = ref<HTMLInputElement | null>(null);\n\nwatch(url, (value) => {\n    const message = validateURL(value) || '';\n\n    urlError.value = /error/i.test(message);\n    urlMessages.value = [message].filter(Boolean);\n});\n\nasync function onFileChange(e: Event) {\n    const input = e.target as HTMLInputElement;\n\n    if (input.files?.length) {\n        const files = Array.from(input.files);\n        await uploadModel(files);\n        input.value = '';\n    }\n}\n\nasync function uploadModel(files: File[]) {\n    try {\n        const settingsArray = await uploadFiles(files);\n\n        let id: number;\n\n        if (settingsArray.length) {\n            for (const settings of settingsArray) {\n                const fileList = files.slice() as ExtendedFileList;\n\n                fileList.settings = settings;\n\n                id = appStore.addModel(fileList);\n            }\n        } else {\n            id = appStore.addModel(files);\n        }\n\n        emit('update:modelValue', false);\n        emit('create', id!);\n    } catch (e: unknown) {\n        if (e instanceof Error) {\n            e.message = 'Failed to load model: ' + e.message;\n        }\n\n        emit('error', e);\n    }\n}\n\nfunction create() {\n    url.value = url.value.replace(/\\s/, '');\n\n    if (!url.value) {\n        urlError.value = true;\n        urlMessages.value = ['Please enter a URL'];\n    }\n\n    if (urlError.value) {\n        return;\n    }\n\n    const id = appStore.addModel(url.value);\n\n    emit('update:modelValue', false);\n    emit('create', id);\n}\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_toolbar_title = _resolveComponent(\"v-toolbar-title\")!\n  const _component_v_spacer = _resolveComponent(\"v-spacer\")!\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_toolbar = _resolveComponent(\"v-toolbar\")!\n  const _component_v_text_field = _resolveComponent(\"v-text-field\")!\n  const _component_v_card_text = _resolveComponent(\"v-card-text\")!\n  const _component_v_card = _resolveComponent(\"v-card\")!\n  const _component_v_img = _resolveComponent(\"v-img\")!\n  const _component_v_dialog = _resolveComponent(\"v-dialog\")!\n\n  return (_openBlock(), _createBlock(_component_v_dialog, {\n    \"model-value\": __props.modelValue,\n    width: \"800\",\n    \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => (_ctx.$emit('update:modelValue',$event)))\n  }, {\n    default: _withCtx(() => [\n      _createVNode(_component_v_card, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_toolbar, {\n            color: \"primary\",\n            flat: \"\",\n            dense: \"\",\n            class: \"flex-grow-0\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_toolbar_title, null, {\n                default: _withCtx(() => [...(_cache[9] || (_cache[9] = [\n                  _createTextVNode(\"Create Model\", -1)\n                ]))]),\n                _: 1\n              }),\n              _createVNode(_component_v_spacer),\n              _createVNode(_component_v_btn, {\n                icon: \"\",\n                onClick: create\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_v_icon, null, {\n                    default: _withCtx(() => [...(_cache[10] || (_cache[10] = [\n                      _createTextVNode(\"mdi-checkbox-marked-circle-outline\", -1)\n                    ]))]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_v_card_text, { class: \"pa-8\" }, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_text_field, {\n                \"single-line\": \"\",\n                filled: \"\",\n                label: \"URL\",\n                modelValue: url.value,\n                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((url).value = $event)),\n                messages: urlMessages.value,\n                error: urlError.value,\n                onKeyup: _withKeys(create, [\"enter\"])\n              }, null, 8, [\"modelValue\", \"messages\", \"error\"]),\n              _createElementVNode(\"div\", _hoisted_1, [\n                _createVNode(_component_v_btn, {\n                  icon: \"\",\n                  small: \"\",\n                  color: \"grey\",\n                  onClick: _cache[1] || (_cache[1] = ($event: any) => (dropHelpDialog.value=true))\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_v_icon, { size: \"20\" }, {\n                      default: _withCtx(() => [...(_cache[11] || (_cache[11] = [\n                        _createTextVNode(\"mdi-help-circle\", -1)\n                      ]))]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                }),\n                _cache[16] || (_cache[16] = _createElementVNode(\"span\", null, \"Drag and drop supported\", -1)),\n                _createVNode(_component_v_spacer),\n                _createElementVNode(\"input\", {\n                  type: \"file\",\n                  ref_key: \"fileInput\",\n                  ref: fileInput,\n                  multiple: \"\",\n                  style: {\"display\":\"none\"},\n                  onChange: onFileChange,\n                  accept: \".json,.moc,.moc3,.png,.jpg,.jpeg,.zip,.mtn,.motion3.json,.physics.json,.physics3.json,.pose.json,.pose3.json\"\n                }, null, 544),\n                _createVNode(_component_v_btn, {\n                  color: \"blue-grey\",\n                  class: \"mr-4\",\n                  onClick: _cache[2] || (_cache[2] = ($event: any) => (fileInput.value?.click()))\n                }, {\n                  default: _withCtx(() => [\n                    _cache[13] || (_cache[13] = _createTextVNode(\"Open Files \", -1)),\n                    _createVNode(_component_v_icon, { right: \"\" }, {\n                      default: _withCtx(() => [...(_cache[12] || (_cache[12] = [\n                        _createTextVNode(\"mdi-folder-open\", -1)\n                      ]))]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_v_btn, {\n                  color: \"blue-grey\",\n                  onClick: _cache[3] || (_cache[3] = ($event: any) => (picker.dialog=true))\n                }, {\n                  default: _withCtx(() => [\n                    _cache[15] || (_cache[15] = _createTextVNode(\"From source...\", -1)),\n                    _createVNode(_component_v_icon, { right: \"\" }, {\n                      default: _withCtx(() => [...(_cache[14] || (_cache[14] = [\n                        _createTextVNode(\" mdi-cloud-search\", -1)\n                      ]))]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                })\n              ])\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      }),\n      _createVNode(_component_v_dialog, {\n        width: \"1000\",\n        \"max-width\": \"80vw\",\n        modelValue: dropHelpDialog.value,\n        \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((dropHelpDialog).value = $event))\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_img, {\n            src: \"drop.jpg\",\n            onClick: _cache[4] || (_cache[4] = ($event: any) => (dropHelpDialog.value=false))\n          })\n        ]),\n        _: 1\n      }, 8, [\"modelValue\"]),\n      _createVNode(ModelPicker, {\n        modelValue: picker.dialog,\n        \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((picker.dialog) = $event)),\n        onSelect: _cache[7] || (_cache[7] = ($event: any) => (url.value=$event))\n      }, null, 8, [\"modelValue\"])\n    ]),\n    _: 1\n  }, 8, [\"model-value\"]))\n}\n}\n\n})","<template>\n  <v-dialog :model-value=\"modelValue\" width=\"800\" @update:model-value=\"$emit('update:modelValue',$event)\">\n    <v-card>\n      <v-toolbar color=\"primary\" flat dense class=\"flex-grow-0\">\n        <v-toolbar-title>Create Model</v-toolbar-title>\n        <v-spacer></v-spacer>\n        <v-btn icon @click=\"create\">\n          <v-icon>mdi-checkbox-marked-circle-outline</v-icon>\n        </v-btn>\n      </v-toolbar>\n\n      <v-card-text class=\"pa-8\">\n        <v-text-field single-line filled label=\"URL\" v-model=\"url\" :messages=\"urlMessages\"\n                      :error=\"urlError\" @keyup.enter=\"create\"></v-text-field>\n\n        <div class=\"d-flex align-center\">\n          <v-btn icon small color=\"grey\" @click=\"dropHelpDialog=true\"><v-icon size=\"20\">mdi-help-circle</v-icon></v-btn>\n          <span>Drag and drop supported</span>\n\n          <v-spacer></v-spacer>\n\n          <input type=\"file\" ref=\"fileInput\" multiple style=\"display: none\" @change=\"onFileChange\" accept=\".json,.moc,.moc3,.png,.jpg,.jpeg,.zip,.mtn,.motion3.json,.physics.json,.physics3.json,.pose.json,.pose3.json\">\n          <v-btn color=\"blue-grey\" class=\"mr-4\" @click=\"fileInput?.click()\">Open Files <v-icon right>mdi-folder-open</v-icon></v-btn>\n\n          <v-btn color=\"blue-grey\" @click=\"picker.dialog=true\">From source...<v-icon right>\n            mdi-cloud-search</v-icon>\n          </v-btn>\n        </div>\n      </v-card-text>\n    </v-card>\n    <v-dialog width=\"1000\" max-width=\"80vw\" v-model=\"dropHelpDialog\">\n      <v-img src=\"drop.jpg\" @click=\"dropHelpDialog=false\"></v-img>\n    </v-dialog>\n    <ModelPicker v-model=\"picker.dialog\" @select=\"url=$event\"/>\n  </v-dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, reactive, watch } from 'vue';\nimport ModelPicker from './ModelPicker.vue';\nimport { validateURL } from '@/app/data';\nimport { useAppStore } from '@/store/app';\nimport { uploadFiles } from '@/app/upload';\nimport { ExtendedFileList } from 'pixi-live2d-display';\n\nconst props = defineProps<{\n    modelValue: boolean;\n}>();\n\nconst emit = defineEmits(['update:modelValue', 'create', 'error']);\n\nconst appStore = useAppStore();\n\nconst url = ref('https://cdn.jsdelivr.net/gh/Eikanya/Live2d-model/Live2D/Senko_Normals/senko.model3.json');\nconst dropHelpDialog = ref(false);\nconst picker = reactive({\n    dialog: false,\n});\nconst urlError = ref(false);\nconst urlMessages = ref<string[]>([]);\nconst fileInput = ref<HTMLInputElement | null>(null);\n\nwatch(url, (value) => {\n    const message = validateURL(value) || '';\n\n    urlError.value = /error/i.test(message);\n    urlMessages.value = [message].filter(Boolean);\n});\n\nasync function onFileChange(e: Event) {\n    const input = e.target as HTMLInputElement;\n\n    if (input.files?.length) {\n        const files = Array.from(input.files);\n        await uploadModel(files);\n        input.value = '';\n    }\n}\n\nasync function uploadModel(files: File[]) {\n    try {\n        const settingsArray = await uploadFiles(files);\n\n        let id: number;\n\n        if (settingsArray.length) {\n            for (const settings of settingsArray) {\n                const fileList = files.slice() as ExtendedFileList;\n\n                fileList.settings = settings;\n\n                id = appStore.addModel(fileList);\n            }\n        } else {\n            id = appStore.addModel(files);\n        }\n\n        emit('update:modelValue', false);\n        emit('create', id!);\n    } catch (e: unknown) {\n        if (e instanceof Error) {\n            e.message = 'Failed to load model: ' + e.message;\n        }\n\n        emit('error', e);\n    }\n}\n\nfunction create() {\n    url.value = url.value.replace(/\\s/, '');\n\n    if (!url.value) {\n        urlError.value = true;\n        urlMessages.value = ['Please enter a URL'];\n    }\n\n    if (urlError.value) {\n        return;\n    }\n\n    const id = appStore.addModel(url.value);\n\n    emit('update:modelValue', false);\n    emit('create', id);\n}\n</script>\n\n<style scoped lang=\"stylus\">\n\n</style>\n","import script from \"./ModelCreation.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ModelCreation.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, mergeProps as _mergeProps, createVNode as _createVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, normalizeClass as _normalizeClass, normalizeProps as _normalizeProps, guardReactiveProps as _guardReactiveProps, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = {\n  key: 0,\n  class: \"motion-progress\"\n}\nconst _hoisted_2 = { class: \"pa-3 text--secondary\" }\nconst _hoisted_3 = {\n  key: 0,\n  class: \"error--text px-3 text-wrap\"\n}\n\nimport { useAppStore } from '@/store/app';\nimport { Filter } from '@/app/Filter';\nimport { Live2DModel } from '@/app/Live2DModel';\nimport { ModelEntity } from '@/app/ModelEntity';\nimport { clamp } from 'lodash-es';\nimport { MotionPriority, MotionState } from 'pixi-live2d-display';\nimport { ref, computed, watch, onMounted, onBeforeUnmount } from 'vue';\n\ninterface MotionGroupEntry {\n    name: string\n    motions: {\n        file: string;\n        error?: unknown;\n    }[]\n}\n\ninterface ExpressionEntry {\n    file: string;\n    error?: unknown;\n}\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'ModelEditor',\n  props: {\n    id: {\n        type: Number,\n        default: 0,\n    },\n    visible: Boolean,\n},\n  setup(__props) {\n\nconst props = __props;\n\nconst appStore = useAppStore();\n\nconst model = ref<ModelEntity | null | undefined>(null);\nconst openedGroups = ref(['display']);\nconst motionGroups = ref<MotionGroupEntry[]>([]);\nconst motionState = ref<MotionState | null | undefined>(null);\nconst motionProgressTimerID = ref(-1);\n\nconst expressions = ref<ExpressionEntry[]>([]);\nconst currentExpressionIndex = ref(-1);\nconst pendingExpressionIndex = ref(-1);\n\nconst filters = ref(Object.keys(Filter.filters));\nconst rootElement = ref<HTMLElement | null>(null);\n\nconst hasPixiModel = computed(() => !!motionState.value);\nconst rotationDeg = computed(() => Math.round((model.value?.rotation || 0) / Math.PI * 180) + '');\nconst motionExpand = computed(() => openedGroups.value.includes('motions'));\n\n// Watchers\nwatch(() => props.id, updateModel, { immediate: true });\nwatch(() => model.value?.filters, () => model.value?.updateFilters());\nwatch(() => motionState.value?.currentGroup, updateMotionProgress);\n\nonMounted(() => {\n    motionProgressTimerID.value = window.setInterval(updateMotionProgress, 50);\n});\n\nonBeforeUnmount(() => {\n    resetModel();\n    clearInterval(motionProgressTimerID.value);\n});\n\nfunction updateModel() {\n    resetModel();\n\n    model.value = appStore.getModel(props.id);\n\n    if (model.value) {\n        if (model.value.pixiModel) {\n            pixiModelLoaded(model.value.pixiModel);\n        } else {\n            model.value.once('modelLoaded', pixiModelLoaded);\n        }\n    }\n}\n\nfunction resetModel() {\n    if (model.value) {\n        model.value.off('modelLoaded', pixiModelLoaded);\n        model.value.pixiModel?.off('expressionSet', expressionSet);\n        model.value.pixiModel?.off('expressionReserved', expressionReserved);\n        model.value.pixiModel?.internalModel.motionManager?.off('motionLoadError', motionLoadError);\n        model.value.pixiModel?.internalModel.motionManager?.expressionManager?.off('expressionLoadError', expressionLoadError);\n\n        motionGroups.value = [];\n        motionState.value = undefined;\n        model.value = undefined;\n    }\n}\n\nfunction pixiModelLoaded(pixiModel: Live2DModel) {\n    const motionManager = pixiModel.internalModel.motionManager;\n    const groups: MotionGroupEntry[] = [];\n\n    const definitions = motionManager.definitions;\n\n    for (const [group, motions] of Object.entries(definitions)) {\n        groups.push({\n            name: group,\n            motions: motions?.map((motion, index) => ({\n                file: motion.file || motion.File || '',\n                error: motionManager.motionGroups[group]![index]! === null ? 'Failed to load' : undefined,\n            })) || [],\n        });\n    }\n\n    motionGroups.value = groups;\n    motionState.value = motionManager.state;\n\n    const expressionManager = motionManager.expressionManager;\n    expressions.value = expressionManager?.definitions.map((expression, index) => ({\n        file: expression.file || expression.File || '',\n        error: expressionManager!.expressions[index]! === null ? 'Failed to load' : undefined,\n    })) || [];\n\n    currentExpressionIndex.value = expressionManager?.expressions.indexOf(expressionManager!.currentExpression) ?? -1;\n    pendingExpressionIndex.value = expressionManager?.reserveExpressionIndex ?? -1;\n\n    pixiModel.on('expressionSet', expressionSet);\n    pixiModel.on('expressionReserved', expressionReserved);\n    motionManager.on('motionLoadError', motionLoadError);\n    expressionManager?.on('expressionLoadError', expressionLoadError);\n}\n\nfunction expressionSet(index: number) {\n    currentExpressionIndex.value = index;\n}\n\nfunction expressionReserved(index: number) {\n    pendingExpressionIndex.value = index;\n}\n\nfunction motionLoadError(group: string, index: number, error: unknown) {\n    const motionGroup = motionGroups.value.find(motionGroup => motionGroup.name === group);\n\n    if (motionGroup) {\n        motionGroup.motions[index]!.error = error;\n    }\n}\n\nfunction expressionLoadError(index: number, error: unknown) {\n    expressions.value[index]!.error = error;\n}\n\nfunction startMotion(motionGroup: MotionGroupEntry, index: number) {\n    model.value?.pixiModel?.motion(motionGroup.name, index, MotionPriority.FORCE);\n}\n\nfunction setExpression(index: number) {\n    model.value?.pixiModel?.expression(index);\n}\n\nfunction updateMotionProgress() {\n    if (!(model.value?.pixiModel && motionState.value?.currentGroup !== undefined && motionExpand.value && props.visible && rootElement.value)) {\n        return;\n    }\n\n    const startTime = model.value.pixiModel.currentMotionStartTime;\n    const duration = model.value.pixiModel.currentMotionDuration;\n    const progress = clamp((model.value.pixiModel.elapsedTime - startTime) / duration, 0, 1);\n\n    // using a CSS variable can be a lot faster than letting Vue update a style object bound to the element\n    // since that will cause the component to re-render\n    rootElement.value.style.setProperty('--progress', progress * 100 + '%');\n}\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_list_item = _resolveComponent(\"v-list-item\")!\n  const _component_v_slider = _resolveComponent(\"v-slider\")!\n  const _component_v_list_item_content = _resolveComponent(\"v-list-item-content\")!\n  const _component_v_list_group = _resolveComponent(\"v-list-group\")!\n  const _component_v_list_item_title = _resolveComponent(\"v-list-item-title\")!\n  const _component_v_list_subheader = _resolveComponent(\"v-list-subheader\")!\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_v_progress_circular = _resolveComponent(\"v-progress-circular\")!\n  const _component_v_checkbox = _resolveComponent(\"v-checkbox\")!\n  const _component_v_list = _resolveComponent(\"v-list\")!\n\n  return (model.value)\n    ? (_openBlock(), _createElementBlock(\"div\", {\n        key: 0,\n        class: \"model-editor\",\n        ref_key: \"rootElement\",\n        ref: rootElement\n      }, [\n        (hasPixiModel.value)\n          ? (_openBlock(), _createBlock(_component_v_list, {\n              key: 0,\n              expand: \"\",\n              opened: openedGroups.value,\n              \"onUpdate:opened\": _cache[3] || (_cache[3] = ($event: any) => ((openedGroups).value = $event))\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_v_list_group, { value: \"display\" }, {\n                  activator: _withCtx(({ props }) => [\n                    _createVNode(_component_v_list_item, _mergeProps(props, { title: \"Display\" }), null, 16)\n                  ]),\n                  default: _withCtx(() => [\n                    _createVNode(_component_v_list_item, null, {\n                      default: _withCtx(() => [\n                        _createVNode(_component_v_list_item_content, null, {\n                          default: _withCtx(() => [\n                            _createElementVNode(\"div\", null, [\n                              _createVNode(_component_v_slider, {\n                                dense: \"\",\n                                class: \"mt-2\",\n                                \"prepend-icon\": \"mdi-magnify\",\n                                modelValue: model.value.scaleX,\n                                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((model.value.scaleX) = $event)),\n                                messages: String(model.value.scaleX),\n                                min: \"0.01\",\n                                max: \"3\",\n                                step: \"0.01\"\n                              }, null, 8, [\"modelValue\", \"messages\"]),\n                              _createVNode(_component_v_slider, {\n                                dense: \"\",\n                                class: \"mt-2\",\n                                \"prepend-icon\": \"mdi-rotate-right\",\n                                modelValue: model.value.rotation,\n                                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((model.value.rotation) = $event)),\n                                messages: rotationDeg.value,\n                                min: \"0\",\n                                max: \"6.28\",\n                                step: \"0.01\"\n                              }, null, 8, [\"modelValue\", \"messages\"])\n                            ])\n                          ]),\n                          _: 1\n                        })\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_v_list_group, {\n                  value: \"motions\",\n                  \"data-set\": _ctx.motionCount=motionGroups.value.reduce((sum, { motions }) => sum + motions.length, 0)\n                }, {\n                  activator: _withCtx(({ props }) => [\n                    _createVNode(_component_v_list_item, _normalizeProps(_guardReactiveProps(props)), {\n                      default: _withCtx(() => [\n                        _createVNode(_component_v_list_item_title, {\n                          class: _normalizeClass({'text--secondary':!_ctx.motionCount})\n                        }, {\n                          default: _withCtx(() => [\n                            _createTextVNode(\"Motions (\" + _toDisplayString(_ctx.motionCount) + \") \", 1)\n                          ]),\n                          _: 1\n                        }, 8, [\"class\"])\n                      ]),\n                      _: 1\n                    }, 16)\n                  ]),\n                  default: _withCtx(() => [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(motionGroups.value, (motionGroup) => {\n                      return (_openBlock(), _createElementBlock(_Fragment, {\n                        key: motionGroup.name\n                      }, [\n                        _createVNode(_component_v_list_subheader, { class: \"px-3\" }, {\n                          default: _withCtx(() => [\n                            _createTextVNode(_toDisplayString(motionGroup.name || '(Nameless)'), 1)\n                          ]),\n                          _: 2\n                        }, 1024),\n                        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(motionGroup.motions, (motion, i) => {\n                          return (_openBlock(), _createBlock(_component_v_list_item, {\n                            ripple: \"\",\n                            key: motionGroup.name+i,\n                            \"data-set\": _ctx.active=motionState.value?.currentGroup===motionGroup.name&&motionState.value?.currentIndex===i,\n                            disabled: !!motion.error,\n                            onClick: ($event: any) => (startMotion(motionGroup,i))\n                          }, {\n                            append: _withCtx(() => [\n                              (_ctx.active)\n                                ? (_openBlock(), _createBlock(_component_v_icon, {\n                                    key: 0,\n                                    size: \"32\",\n                                    color: \"primary\"\n                                  }, {\n                                    default: _withCtx(() => [...(_cache[4] || (_cache[4] = [\n                                      _createTextVNode(\"mdi-play\", -1)\n                                    ]))]),\n                                    _: 1\n                                  }))\n                                : ((motionState.value?.reservedGroup===motionGroup.name&&motionState.value?.reservedIndex===i)\n                    ||(motionState.value?.reservedIdleGroup===motionGroup.name&&motionState.value?.reservedIdleIndex===i))\n                                  ? (_openBlock(), _createBlock(_component_v_progress_circular, {\n                                      key: 1,\n                                      indeterminate: \"\",\n                                      size: \"20\",\n                                      width: \"2\"\n                                    }))\n                                  : _createCommentVNode(\"\", true)\n                            ]),\n                            default: _withCtx(() => [\n                              (_ctx.active)\n                                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1))\n                                : _createCommentVNode(\"\", true),\n                              _createVNode(_component_v_list_item_content, null, {\n                                default: _withCtx(() => [\n                                  _createVNode(_component_v_list_item_title, {\n                                    class: _normalizeClass({'primary--text':_ctx.active,'text-decoration-line-through':motion.error})\n                                  }, {\n                                    default: _withCtx(() => [\n                                      _createTextVNode(_toDisplayString(motion.file.replace('.mtn', '').replace('.motion3.json', '')), 1)\n                                    ]),\n                                    _: 2\n                                  }, 1032, [\"class\"])\n                                ]),\n                                _: 2\n                              }, 1024)\n                            ]),\n                            _: 2\n                          }, 1032, [\"data-set\", \"disabled\", \"onClick\"]))\n                        }), 128))\n                      ], 64))\n                    }), 128))\n                  ]),\n                  _: 1\n                }, 8, [\"data-set\"]),\n                _createVNode(_component_v_list_group, { value: \"expressions\" }, {\n                  activator: _withCtx(({ props }) => [\n                    _createVNode(_component_v_list_item, _normalizeProps(_guardReactiveProps(props)), {\n                      default: _withCtx(() => [\n                        _createVNode(_component_v_list_item_title, {\n                          class: _normalizeClass({'text--secondary':!expressions.value.length})\n                        }, {\n                          default: _withCtx(() => [\n                            _createTextVNode(\"Expressions (\" + _toDisplayString(expressions.value.length) + \") \", 1)\n                          ]),\n                          _: 1\n                        }, 8, [\"class\"])\n                      ]),\n                      _: 1\n                    }, 16)\n                  ]),\n                  default: _withCtx(() => [\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(expressions.value, (expression, i) => {\n                      return (_openBlock(), _createBlock(_component_v_list_item, {\n                        ripple: \"\",\n                        key: i,\n                        \"data-set\": _ctx.active=currentExpressionIndex.value===i,\n                        disabled: !!expression.error,\n                        onClick: ($event: any) => (setExpression(i))\n                      }, {\n                        append: _withCtx(() => [\n                          (_ctx.active)\n                            ? (_openBlock(), _createBlock(_component_v_icon, {\n                                key: 0,\n                                size: \"28\",\n                                color: \"primary\"\n                              }, {\n                                default: _withCtx(() => [...(_cache[5] || (_cache[5] = [\n                                  _createTextVNode(\"mdi-emoticon-outline\", -1)\n                                ]))]),\n                                _: 1\n                              }))\n                            : (pendingExpressionIndex.value===i)\n                              ? (_openBlock(), _createBlock(_component_v_progress_circular, {\n                                  key: 1,\n                                  indeterminate: \"\",\n                                  size: \"20\",\n                                  width: \"2\"\n                                }))\n                              : _createCommentVNode(\"\", true)\n                        ]),\n                        default: _withCtx(() => [\n                          _createVNode(_component_v_list_item_content, null, {\n                            default: _withCtx(() => [\n                              _createVNode(_component_v_list_item_title, {\n                                class: _normalizeClass({'primary--text':_ctx.active,'text-decoration-line-through':expression.error})\n                              }, {\n                                default: _withCtx(() => [\n                                  _createTextVNode(_toDisplayString(expression.file.replace('.exp.json', '').replace('.exp3.json', '')), 1)\n                                ]),\n                                _: 2\n                              }, 1032, [\"class\"])\n                            ]),\n                            _: 2\n                          }, 1024)\n                        ]),\n                        _: 2\n                      }, 1032, [\"data-set\", \"disabled\", \"onClick\"]))\n                    }), 128))\n                  ]),\n                  _: 1\n                }),\n                _createVNode(_component_v_list_group, { value: \"filters\" }, {\n                  activator: _withCtx(({ props }) => [\n                    _createVNode(_component_v_list_item, _mergeProps(props, { title: \"Filters\" }), null, 16)\n                  ]),\n                  default: _withCtx(() => [\n                    _cache[6] || (_cache[6] = _createElementVNode(\"div\", { class: \"mt-3\" }, null, -1)),\n                    (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(filters.value, (filter) => {\n                      return (_openBlock(), _createBlock(_component_v_checkbox, {\n                        modelValue: model.value.filters,\n                        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((model.value.filters) = $event)),\n                        class: \"v-input--reverse mx-3 mt-0\",\n                        key: filter,\n                        label: filter+(index=>index?` [${index}]`:'')(model.value.filters.indexOf(filter)+1),\n                        value: filter\n                      }, null, 8, [\"modelValue\", \"label\", \"value\"]))\n                    }), 128))\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            }, 8, [\"opened\"]))\n          : (_openBlock(), _createElementBlock(_Fragment, { key: 1 }, [\n              _createElementVNode(\"pre\", _hoisted_2, _toDisplayString(model.value.loadingState.text), 1),\n              (model.value.error)\n                ? (_openBlock(), _createElementBlock(\"pre\", _hoisted_3, _toDisplayString(model.value.error), 1))\n                : _createCommentVNode(\"\", true)\n            ], 64))\n      ], 512))\n    : _createCommentVNode(\"\", true)\n}\n}\n\n})","<template>\n  <div class=\"model-editor\" v-if=\"model\" ref=\"rootElement\">\n    <v-list expand v-if=\"hasPixiModel\" v-model:opened=\"openedGroups\">\n      <v-list-group value=\"display\">\n        <template v-slot:activator=\"{ props }\">\n          <v-list-item v-bind=\"props\" title=\"Display\"></v-list-item>\n        </template>\n\n        <v-list-item>\n          <v-list-item-content>\n            <div>\n              <v-slider dense class=\"mt-2\" prepend-icon=\"mdi-magnify\" v-model=\"model.scaleX\"\n                  :messages=\"String(model.scaleX)\" min=\"0.01\" max=\"3\" step=\"0.01\"></v-slider>\n              <v-slider dense class=\"mt-2\" prepend-icon=\"mdi-rotate-right\" v-model=\"model.rotation\"\n                  :messages=\"rotationDeg\" min=\"0\" max=\"6.28\" step=\"0.01\"></v-slider>\n            </div>\n          </v-list-item-content>\n        </v-list-item>\n      </v-list-group>\n\n      <v-list-group value=\"motions\" :data-set=\"motionCount=motionGroups.reduce((sum, { motions }) => sum + motions.length, 0)\">\n        <template v-slot:activator=\"{ props }\">\n          <v-list-item v-bind=\"props\">\n            <v-list-item-title :class=\"{'text--secondary':!motionCount}\">Motions ({{ motionCount }})\n            </v-list-item-title>\n          </v-list-item>\n        </template>\n\n        <template v-slot:default>\n          <template v-for=\"motionGroup in motionGroups\" :key=\"motionGroup.name\">\n            <v-list-subheader class=\"px-3\">{{ motionGroup.name || '(Nameless)' }}</v-list-subheader>\n            <v-list-item ripple v-for=\"(motion,i) in motionGroup.motions\" :key=\"motionGroup.name+i\"\n                :data-set=\"active=motionState?.currentGroup===motionGroup.name&&motionState?.currentIndex===i\"\n                :disabled=\"!!motion.error\" @click=\"startMotion(motionGroup,i)\">\n              <div v-if=\"active\" class=\"motion-progress\"></div>\n              <v-list-item-content>\n                <v-list-item-title :class=\"{'primary--text':active,'text-decoration-line-through':motion.error}\">\n                  {{ motion.file.replace('.mtn', '').replace('.motion3.json', '') }}\n                </v-list-item-title>\n              </v-list-item-content>\n              <template v-slot:append>\n                <v-icon size=\"32\" color=\"primary\" v-if=\"active\">mdi-play</v-icon>\n                <v-progress-circular indeterminate size=\"20\" width=\"2\" v-else-if=\"(motionState?.reservedGroup===motionGroup.name&&motionState?.reservedIndex===i)\n                    ||(motionState?.reservedIdleGroup===motionGroup.name&&motionState?.reservedIdleIndex===i)\" />\n              </template>\n            </v-list-item>\n          </template>\n        </template>\n      </v-list-group>\n\n      <v-list-group value=\"expressions\">\n        <template v-slot:activator=\"{ props }\">\n           <v-list-item v-bind=\"props\">\n            <v-list-item-title :class=\"{'text--secondary':!expressions.length}\">Expressions ({{ expressions.length }})\n            </v-list-item-title>\n          </v-list-item>\n        </template>\n\n        <template v-slot:default>\n          <v-list-item ripple\n              v-for=\"(expression,i) in expressions\"\n              :key=\"i\"\n              :data-set=\"active=currentExpressionIndex===i\"\n              :disabled=\"!!expression.error\"\n              @click=\"setExpression(i)\">\n            <v-list-item-content>\n              <v-list-item-title :class=\"{'primary--text':active,'text-decoration-line-through':expression.error}\">\n                {{ expression.file.replace('.exp.json', '').replace('.exp3.json', '') }}\n              </v-list-item-title>\n            </v-list-item-content>\n            <template v-slot:append>\n              <v-icon size=\"28\" color=\"primary\" v-if=\"active\">mdi-emoticon-outline</v-icon>\n              <v-progress-circular indeterminate size=\"20\" width=\"2\" v-else-if=\"pendingExpressionIndex===i\" />\n            </template>\n          </v-list-item>\n        </template>\n      </v-list-group>\n\n      <v-list-group value=\"filters\">\n        <template v-slot:activator=\"{ props }\">\n          <v-list-item v-bind=\"props\" title=\"Filters\"></v-list-item>\n        </template>\n\n        <div class=\"mt-3\"></div>\n\n        <v-checkbox v-for=\"filter in filters\" v-model=\"model.filters\" class=\"v-input--reverse mx-3 mt-0\" :key=\"filter\"\n            :label=\"filter+(index=>index?` [${index}]`:'')(model.filters.indexOf(filter)+1)\"\n            :value=\"filter\"></v-checkbox>\n      </v-list-group>\n    </v-list>\n    <template v-else>\n      <pre class=\"pa-3 text--secondary\">{{ model.loadingState.text }}</pre>\n      <pre v-if=\"model.error\" class=\"error--text px-3 text-wrap\">{{ model.error }}</pre>\n    </template>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { useAppStore } from '@/store/app';\nimport { Filter } from '@/app/Filter';\nimport { Live2DModel } from '@/app/Live2DModel';\nimport { ModelEntity } from '@/app/ModelEntity';\nimport { clamp } from 'lodash-es';\nimport { MotionPriority, MotionState } from 'pixi-live2d-display';\nimport { ref, computed, watch, onMounted, onBeforeUnmount } from 'vue';\n\ninterface MotionGroupEntry {\n    name: string\n    motions: {\n        file: string;\n        error?: unknown;\n    }[]\n}\n\ninterface ExpressionEntry {\n    file: string;\n    error?: unknown;\n}\n\nconst props = defineProps({\n    id: {\n        type: Number,\n        default: 0,\n    },\n    visible: Boolean,\n});\n\nconst appStore = useAppStore();\n\nconst model = ref<ModelEntity | null | undefined>(null);\nconst openedGroups = ref(['display']);\nconst motionGroups = ref<MotionGroupEntry[]>([]);\nconst motionState = ref<MotionState | null | undefined>(null);\nconst motionProgressTimerID = ref(-1);\n\nconst expressions = ref<ExpressionEntry[]>([]);\nconst currentExpressionIndex = ref(-1);\nconst pendingExpressionIndex = ref(-1);\n\nconst filters = ref(Object.keys(Filter.filters));\nconst rootElement = ref<HTMLElement | null>(null);\n\nconst hasPixiModel = computed(() => !!motionState.value);\nconst rotationDeg = computed(() => Math.round((model.value?.rotation || 0) / Math.PI * 180) + '');\nconst motionExpand = computed(() => openedGroups.value.includes('motions'));\n\n// Watchers\nwatch(() => props.id, updateModel, { immediate: true });\nwatch(() => model.value?.filters, () => model.value?.updateFilters());\nwatch(() => motionState.value?.currentGroup, updateMotionProgress);\n\nonMounted(() => {\n    motionProgressTimerID.value = window.setInterval(updateMotionProgress, 50);\n});\n\nonBeforeUnmount(() => {\n    resetModel();\n    clearInterval(motionProgressTimerID.value);\n});\n\nfunction updateModel() {\n    resetModel();\n\n    model.value = appStore.getModel(props.id);\n\n    if (model.value) {\n        if (model.value.pixiModel) {\n            pixiModelLoaded(model.value.pixiModel);\n        } else {\n            model.value.once('modelLoaded', pixiModelLoaded);\n        }\n    }\n}\n\nfunction resetModel() {\n    if (model.value) {\n        model.value.off('modelLoaded', pixiModelLoaded);\n        model.value.pixiModel?.off('expressionSet', expressionSet);\n        model.value.pixiModel?.off('expressionReserved', expressionReserved);\n        model.value.pixiModel?.internalModel.motionManager?.off('motionLoadError', motionLoadError);\n        model.value.pixiModel?.internalModel.motionManager?.expressionManager?.off('expressionLoadError', expressionLoadError);\n\n        motionGroups.value = [];\n        motionState.value = undefined;\n        model.value = undefined;\n    }\n}\n\nfunction pixiModelLoaded(pixiModel: Live2DModel) {\n    const motionManager = pixiModel.internalModel.motionManager;\n    const groups: MotionGroupEntry[] = [];\n\n    const definitions = motionManager.definitions;\n\n    for (const [group, motions] of Object.entries(definitions)) {\n        groups.push({\n            name: group,\n            motions: motions?.map((motion, index) => ({\n                file: motion.file || motion.File || '',\n                error: motionManager.motionGroups[group]![index]! === null ? 'Failed to load' : undefined,\n            })) || [],\n        });\n    }\n\n    motionGroups.value = groups;\n    motionState.value = motionManager.state;\n\n    const expressionManager = motionManager.expressionManager;\n    expressions.value = expressionManager?.definitions.map((expression, index) => ({\n        file: expression.file || expression.File || '',\n        error: expressionManager!.expressions[index]! === null ? 'Failed to load' : undefined,\n    })) || [];\n\n    currentExpressionIndex.value = expressionManager?.expressions.indexOf(expressionManager!.currentExpression) ?? -1;\n    pendingExpressionIndex.value = expressionManager?.reserveExpressionIndex ?? -1;\n\n    pixiModel.on('expressionSet', expressionSet);\n    pixiModel.on('expressionReserved', expressionReserved);\n    motionManager.on('motionLoadError', motionLoadError);\n    expressionManager?.on('expressionLoadError', expressionLoadError);\n}\n\nfunction expressionSet(index: number) {\n    currentExpressionIndex.value = index;\n}\n\nfunction expressionReserved(index: number) {\n    pendingExpressionIndex.value = index;\n}\n\nfunction motionLoadError(group: string, index: number, error: unknown) {\n    const motionGroup = motionGroups.value.find(motionGroup => motionGroup.name === group);\n\n    if (motionGroup) {\n        motionGroup.motions[index]!.error = error;\n    }\n}\n\nfunction expressionLoadError(index: number, error: unknown) {\n    expressions.value[index]!.error = error;\n}\n\nfunction startMotion(motionGroup: MotionGroupEntry, index: number) {\n    model.value?.pixiModel?.motion(motionGroup.name, index, MotionPriority.FORCE);\n}\n\nfunction setExpression(index: number) {\n    model.value?.pixiModel?.expression(index);\n}\n\nfunction updateMotionProgress() {\n    if (!(model.value?.pixiModel && motionState.value?.currentGroup !== undefined && motionExpand.value && props.visible && rootElement.value)) {\n        return;\n    }\n\n    const startTime = model.value.pixiModel.currentMotionStartTime;\n    const duration = model.value.pixiModel.currentMotionDuration;\n    const progress = clamp((model.value.pixiModel.elapsedTime - startTime) / duration, 0, 1);\n\n    // using a CSS variable can be a lot faster than letting Vue update a style object bound to the element\n    // since that will cause the component to re-render\n    rootElement.value.style.setProperty('--progress', progress * 100 + '%');\n}\n</script>\n\n<style scoped lang=\"stylus\">\n:deep(.v-list-item)\n    padding 0 12px !important\n\n.motion-progress\n    position absolute\n    z-index -1\n    top 0\n    bottom 0\n    left 0\n    right 0\n    opacity .24\n    background linear-gradient(var(--v-primary-base), var(--v-primary-base)) no-repeat\n    background-size var(--progress, 0) auto\n</style>","import script from \"./ModelEditor.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ModelEditor.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ModelEditor.vue?vue&type=style&index=0&id=46bbfd08&scoped=true&lang=stylus\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-46bbfd08\"]])\n\nexport default __exports__","import { readAsBase64 } from '@/utils/file';\nimport { EventEmitter } from '@pixi/utils';\n\nconst BG_STORAGE_KEY = '_bg';\n\nexport namespace Background {\n    let currentObjectURL = '';\n\n    let styleElement: HTMLStyleElement | undefined;\n\n    export const emitter = new EventEmitter();\n\n    export let current: string = '';\n\n    export async function set(file: File) {\n        const objectURL = URL.createObjectURL(file);\n\n        document.body.style.backgroundImage = `url(${objectURL})`;\n\n        current = file.name;\n\n        emitter.emit('change', current);\n\n        currentObjectURL = objectURL;\n\n        const base64 = await readAsBase64(file);\n\n        if (currentObjectURL === objectURL) {\n            localStorage.setItem(BG_STORAGE_KEY, base64);\n        }\n\n        URL.revokeObjectURL(objectURL);\n    }\n\n    export function reset() {\n        current = '';\n        document.body.style.backgroundImage = '';\n        document.body.style.backgroundColor = '#222222';\n        localStorage.removeItem(BG_STORAGE_KEY);\n\n        if (styleElement) {\n            document.head.removeChild(styleElement);\n            styleElement = undefined;\n        }\n\n        emitter.emit('change', current);\n    }\n\n    function loadBackground() {\n        styleElement = document.createElement('style');\n\n        const dataURL = localStorage.getItem('_bg');\n\n        if (dataURL) {\n            styleElement.innerText = `body {background-image: url(${dataURL});}`;\n\n            current = '(local file)';\n        } else {\n            styleElement.innerText = `body {background-color: #222222;}`;\n        }\n\n        document.head.appendChild(styleElement);\n        document.body.style.backgroundSize = 'cover';\n    }\n\n    loadBackground();\n}\n","import { defineComponent as _defineComponent } from 'vue'\nimport { openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, normalizeClass as _normalizeClass } from \"vue\"\n\nconst _hoisted_1 = {\n  key: 0,\n  class: \"text-h1\"\n}\n\nimport { ref, onMounted } from 'vue';\nimport { uploadFiles } from '@/app/upload';\nimport { isDraggingFile, readFiles } from '@/utils/file';\nimport { ExtendedFileList } from 'pixi-live2d-display';\nimport { Background } from '@/tools/Background';\nimport { useAppStore } from '@/store/app';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'DropZone',\n  emits: ['create', 'error'],\n  setup(__props, { emit: __emit }) {\n\nconst emit = __emit;\nconst appStore = useAppStore();\n\nconst draggingOver = ref(false);\n\nonMounted(() => {\n    document.ondragenter = e => isDraggingFile(e) && (draggingOver.value = true);\n    document.ondragleave = e => isDraggingFile(e) && (draggingOver.value = !!e.relatedTarget);\n    document.ondragover = e => isDraggingFile(e) && e.preventDefault();\n    document.ondrop = e => isDraggingFile(e) && drop(e);\n});\n\nasync function drop(e: DragEvent) {\n    e.preventDefault();\n\n    draggingOver.value = false;\n\n    if (e.dataTransfer?.items.length) {\n        const files = await readFiles(e.dataTransfer.items);\n\n        if (files.length === 1 && files[0].type.includes('image')) {\n            Background.set(files[0]).catch(console.warn);\n        } else {\n            uploadModel(files).then();\n        }\n    }\n}\n\nasync function uploadModel(files: File[]) {\n    try {\n        const settingsArray = await uploadFiles(files);\n\n        let id: number;\n\n        if (settingsArray.length) {\n            for (const settings of settingsArray) {\n                const fileList = files.slice() as ExtendedFileList;\n\n                fileList.settings = settings;\n\n                id = appStore.addModel(fileList);\n            }\n        } else {\n            id = appStore.addModel(files);\n        }\n\n        emit('create', id!);\n    } catch (e: unknown) {\n        if (e instanceof Error) {\n            e.message = 'Failed to load model: ' + e.message;\n        }\n        emit('error', e);\n    }\n}\n\nreturn (_ctx: any,_cache: any) => {\n  return (_openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass(['drop-zone', {active:draggingOver.value}])\n  }, [\n    (draggingOver.value)\n      ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, \"Drop Files\"))\n      : _createCommentVNode(\"\", true)\n  ], 2))\n}\n}\n\n})","<template>\n  <div :class=\"['drop-zone', {active:draggingOver}]\">\n    <div v-if=\"draggingOver\" class=\"text-h1\">Drop Files</div>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, onMounted } from 'vue';\nimport { uploadFiles } from '@/app/upload';\nimport { isDraggingFile, readFiles } from '@/utils/file';\nimport { ExtendedFileList } from 'pixi-live2d-display';\nimport { Background } from '@/tools/Background';\nimport { useAppStore } from '@/store/app';\n\nconst emit = defineEmits(['create', 'error']);\nconst appStore = useAppStore();\n\nconst draggingOver = ref(false);\n\nonMounted(() => {\n    document.ondragenter = e => isDraggingFile(e) && (draggingOver.value = true);\n    document.ondragleave = e => isDraggingFile(e) && (draggingOver.value = !!e.relatedTarget);\n    document.ondragover = e => isDraggingFile(e) && e.preventDefault();\n    document.ondrop = e => isDraggingFile(e) && drop(e);\n});\n\nasync function drop(e: DragEvent) {\n    e.preventDefault();\n\n    draggingOver.value = false;\n\n    if (e.dataTransfer?.items.length) {\n        const files = await readFiles(e.dataTransfer.items);\n\n        if (files.length === 1 && files[0].type.includes('image')) {\n            Background.set(files[0]).catch(console.warn);\n        } else {\n            uploadModel(files).then();\n        }\n    }\n}\n\nasync function uploadModel(files: File[]) {\n    try {\n        const settingsArray = await uploadFiles(files);\n\n        let id: number;\n\n        if (settingsArray.length) {\n            for (const settings of settingsArray) {\n                const fileList = files.slice() as ExtendedFileList;\n\n                fileList.settings = settings;\n\n                id = appStore.addModel(fileList);\n            }\n        } else {\n            id = appStore.addModel(files);\n        }\n\n        emit('create', id!);\n    } catch (e: unknown) {\n        if (e instanceof Error) {\n            e.message = 'Failed to load model: ' + e.message;\n        }\n        emit('error', e);\n    }\n}\n</script>\n\n<style scoped lang=\"stylus\">\n.drop-zone\n  position fixed\n  z-index 9999\n  top: 0\n  right: 0\n  bottom: 0\n  left: 0\n  display flex\n  align-items center\n  justify-content center\n  transition background-color ease-out .2s\n\n  &.active\n    background rgba(0, 0, 0, .3)\n</style>","import script from \"./DropZone.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DropZone.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./DropZone.vue?vue&type=style&index=0&id=a5b5af7e&scoped=true&lang=stylus\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-a5b5af7e\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, unref as _unref } from \"vue\"\n\nconst _hoisted_1 = { class: \"settings pa-3 flex-column flex-grow-1\" }\nconst _hoisted_2 = { class: \"mt-2 d-flex align-center\" }\nconst _hoisted_3 = { class: \"pt-4 d-flex align-center\" }\nconst _hoisted_4 = { class: \"pt-4 body-2 text--secondary\" }\n\nimport { ref, computed, onMounted, onBeforeUnmount } from 'vue';\nimport { Background } from '@/tools/Background';\nimport { useAppStore } from '@/store/app';\n\ndeclare const __BUILD_TIME__: number;\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'Settings',\n  setup(__props) {\n\nconst appStore = useAppStore();\n\nconst lastUpdated = new Date(__BUILD_TIME__).toLocaleString();\nconst currentBackground = ref(Background.current);\n\nconst volume = computed({\n    get: () => appStore.volume,\n    set: (val) => appStore.updateVolume(val),\n});\n\nconst stats = computed({\n    get: () => appStore.showStats,\n    set: (val) => appStore.updateStatsVisibility(val),\n});\n\nconst hitAreaFrames = computed({\n    get: () => appStore.showHitAreaFrames,\n    set: (val) => appStore.updateHitAreaFrames(val),\n});\n\nconst modelFrame = computed({\n    get: () => appStore.showModelFrame,\n    set: (val) => appStore.updateModelFrame(val),\n});\n\n\nonMounted(() => {\n    Background.emitter.on('change', backgroundChanged);\n});\n\nonBeforeUnmount(() => {\n    Background.emitter.off('change', backgroundChanged);\n});\n\nfunction resetBackground() {\n    Background.reset();\n}\n\nfunction backgroundChanged(background: string) {\n    currentBackground.value = background;\n}\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_slider = _resolveComponent(\"v-slider\")!\n  const _component_v_switch = _resolveComponent(\"v-switch\")!\n  const _component_v_divider = _resolveComponent(\"v-divider\")!\n  const _component_v_list_subheader = _resolveComponent(\"v-list-subheader\")!\n  const _component_v_spacer = _resolveComponent(\"v-spacer\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createElementVNode(\"div\", null, [\n      _createVNode(_component_v_slider, {\n        dense: \"\",\n        class: \"mt-4 mb-10\",\n        \"prepend-icon\": \"mdi-volume-high\",\n        modelValue: volume.value,\n        \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((volume).value = $event)),\n        messages: ~~(volume.value*100)+'%',\n        min: \"0\",\n        max: \"1\",\n        step: \"0.02\"\n      }, null, 8, [\"modelValue\", \"messages\"]),\n      _createVNode(_component_v_switch, {\n        class: \"v-input--reverse\",\n        modelValue: hitAreaFrames.value,\n        \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((hitAreaFrames).value = $event)),\n        label: \"Show hit area frames\"\n      }, null, 8, [\"modelValue\"]),\n      _createVNode(_component_v_switch, {\n        class: \"v-input--reverse\",\n        modelValue: modelFrame.value,\n        \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((modelFrame).value = $event)),\n        label: \"Show model frames\"\n      }, null, 8, [\"modelValue\"]),\n      _createVNode(_component_v_switch, {\n        class: \"v-input--reverse\",\n        modelValue: stats.value,\n        \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((stats).value = $event)),\n        label: \"Show stats\"\n      }, null, 8, [\"modelValue\"]),\n      (currentBackground.value)\n        ? (_openBlock(), _createElementBlock(_Fragment, { key: 0 }, [\n            _createVNode(_component_v_divider),\n            _createVNode(_component_v_list_subheader, { class: \"px-0\" }, {\n              default: _withCtx(() => [...(_cache[4] || (_cache[4] = [\n                _createTextVNode(\"Background\", -1)\n              ]))]),\n              _: 1\n            }),\n            _createElementVNode(\"div\", _hoisted_2, [\n              _createElementVNode(\"span\", null, _toDisplayString(currentBackground.value), 1),\n              _createVNode(_component_v_spacer),\n              _createVNode(_component_v_btn, {\n                color: \"secondary\",\n                onClick: resetBackground\n              }, {\n                default: _withCtx(() => [...(_cache[5] || (_cache[5] = [\n                  _createTextVNode(\"Reset\", -1)\n                ]))]),\n                _: 1\n              })\n            ])\n          ], 64))\n        : _createCommentVNode(\"\", true)\n    ]),\n    _createVNode(_component_v_spacer),\n    _createVNode(_component_v_divider),\n    _createElementVNode(\"div\", _hoisted_3, [\n      _createVNode(_component_v_icon, { class: \"mr-2\" }, {\n        default: _withCtx(() => [...(_cache[6] || (_cache[6] = [\n          _createTextVNode(\"mdi-github\", -1)\n        ]))]),\n        _: 1\n      }),\n      _cache[7] || (_cache[7] = _createElementVNode(\"span\", null, [\n        _createTextVNode(\"View source or report bugs on \"),\n        _createElementVNode(\"a\", {\n          href: \"https://github.com/guansss/live2d-viewer-web\",\n          class: \"text-decoration-none\"\n        }, \"GitHub\")\n      ], -1))\n    ]),\n    _createElementVNode(\"span\", _hoisted_4, \"Last built: \" + _toDisplayString(_unref(lastUpdated)), 1)\n  ]))\n}\n}\n\n})","<template>\n  <div class=\"settings pa-3 flex-column flex-grow-1\">\n    <div>\n      <v-slider dense class=\"mt-4 mb-10\" prepend-icon=\"mdi-volume-high\" v-model=\"volume\" :messages=\"~~(volume*100)+'%'\"\n                min=\"0\" max=\"1\" step=\"0.02\"></v-slider>\n\n      <v-switch class=\"v-input--reverse\" v-model=\"hitAreaFrames\" label=\"Show hit area frames\"></v-switch>\n      <v-switch class=\"v-input--reverse\" v-model=\"modelFrame\" label=\"Show model frames\"></v-switch>\n      <v-switch class=\"v-input--reverse\" v-model=\"stats\" label=\"Show stats\"></v-switch>\n\n      <template v-if=\"currentBackground\">\n        <v-divider></v-divider>\n        <v-list-subheader class=\"px-0\">Background</v-list-subheader>\n        <div class=\"mt-2 d-flex align-center\">\n          <span>{{ currentBackground }}</span>\n          <v-spacer></v-spacer>\n          <v-btn color=\"secondary\" @click=\"resetBackground\">Reset</v-btn>\n        </div>\n      </template>\n    </div>\n\n    <v-spacer></v-spacer>\n    <v-divider></v-divider>\n    <div class=\"pt-4 d-flex align-center\">\n      <v-icon class=\"mr-2\">mdi-github</v-icon>\n      <span>View source or report bugs on <a href=\"https://github.com/guansss/live2d-viewer-web\"\n                              class=\"text-decoration-none\">GitHub</a></span></div>\n\n    <span class=\"pt-4 body-2 text--secondary\">Last built: {{ lastUpdated }}</span>\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, onMounted, onBeforeUnmount } from 'vue';\nimport { Background } from '@/tools/Background';\nimport { useAppStore } from '@/store/app';\n\ndeclare const __BUILD_TIME__: number;\n\nconst appStore = useAppStore();\n\nconst lastUpdated = new Date(__BUILD_TIME__).toLocaleString();\nconst currentBackground = ref(Background.current);\n\nconst volume = computed({\n    get: () => appStore.volume,\n    set: (val) => appStore.updateVolume(val),\n});\n\nconst stats = computed({\n    get: () => appStore.showStats,\n    set: (val) => appStore.updateStatsVisibility(val),\n});\n\nconst hitAreaFrames = computed({\n    get: () => appStore.showHitAreaFrames,\n    set: (val) => appStore.updateHitAreaFrames(val),\n});\n\nconst modelFrame = computed({\n    get: () => appStore.showModelFrame,\n    set: (val) => appStore.updateModelFrame(val),\n});\n\n\nonMounted(() => {\n    Background.emitter.on('change', backgroundChanged);\n});\n\nonBeforeUnmount(() => {\n    Background.emitter.off('change', backgroundChanged);\n});\n\nfunction resetBackground() {\n    Background.reset();\n}\n\nfunction backgroundChanged(background: string) {\n    currentBackground.value = background;\n}\n</script>\n\n<style scoped lang=\"stylus\">\n.settings\n  display flex\n</style>","import script from \"./Settings.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Settings.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./Settings.vue?vue&type=style&index=0&id=b7b357a0&scoped=true&lang=stylus\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-b7b357a0\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, mergeProps as _mergeProps, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"mb-6 text-no-wrap\" }\nconst _hoisted_2 = { class: \"code\" }\n\nimport { useAppStore } from '@/store/app';\nimport { ref, watch } from 'vue';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'ModelInfo',\n  props: {\n    modelValue: { type: Boolean },\n    id: {}\n  },\n  emits: ['update:modelValue'],\n  setup(__props: any) {\n\nconst props = __props;\n\n\n\nconst appStore = useAppStore();\n\nconst url = ref('');\nconst settingsJSON = ref('');\n\nwatch(() => props.modelValue, (value) => {\n    if (value) {\n        const model = appStore.getModel(props.id);\n        const settings = model?.pixiModel?.internalModel.settings;\n\n        url.value = model?.url || '';\n        settingsJSON.value = JSON.stringify(settings?.json || {}, null, 2);\n    }\n});\n\nfunction log() {\n    console.log(JSON.parse(settingsJSON.value));\n}\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_toolbar_title = _resolveComponent(\"v-toolbar-title\")!\n  const _component_v_spacer = _resolveComponent(\"v-spacer\")!\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_tooltip = _resolveComponent(\"v-tooltip\")!\n  const _component_v_toolbar = _resolveComponent(\"v-toolbar\")!\n  const _component_v_card_text = _resolveComponent(\"v-card-text\")!\n  const _component_v_card = _resolveComponent(\"v-card\")!\n  const _component_v_dialog = _resolveComponent(\"v-dialog\")!\n\n  return (_openBlock(), _createBlock(_component_v_dialog, {\n    width: \"1000\",\n    \"max-width\": \"90vw\",\n    \"model-value\": __props.modelValue,\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => (_ctx.$emit('update:modelValue',$event)))\n  }, {\n    default: _withCtx(() => [\n      _createVNode(_component_v_card, {\n        height: \"90vh\",\n        class: \"d-flex flex-column\"\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_toolbar, {\n            color: \"primary\",\n            flat: \"\",\n            dense: \"\",\n            class: \"flex-grow-0\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_toolbar_title, null, {\n                default: _withCtx(() => [...(_cache[2] || (_cache[2] = [\n                  _createTextVNode(\"Model Info\", -1)\n                ]))]),\n                _: 1\n              }),\n              _createVNode(_component_v_spacer),\n              _createVNode(_component_v_tooltip, { bottom: \"\" }, {\n                activator: _withCtx(({ props }) => [\n                  _createVNode(_component_v_btn, _mergeProps({\n                    icon: \"\",\n                    onClick: log\n                  }, props), {\n                    default: _withCtx(() => [\n                      _createVNode(_component_v_icon, null, {\n                        default: _withCtx(() => [...(_cache[3] || (_cache[3] = [\n                          _createTextVNode(\"mdi-console\", -1)\n                        ]))]),\n                        _: 1\n                      })\n                    ]),\n                    _: 1\n                  }, 16)\n                ]),\n                default: _withCtx(() => [\n                  _cache[4] || (_cache[4] = _createElementVNode(\"span\", null, \"Print to console\", -1))\n                ]),\n                _: 1\n              }),\n              _createVNode(_component_v_btn, {\n                icon: \"\",\n                onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.$emit('update:modelValue',false)))\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_v_icon, null, {\n                    default: _withCtx(() => [...(_cache[5] || (_cache[5] = [\n                      _createTextVNode(\"mdi-close\", -1)\n                    ]))]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          }),\n          _createVNode(_component_v_card_text, { class: \"pa-8 overflow-auto\" }, {\n            default: _withCtx(() => [\n              _createElementVNode(\"div\", _hoisted_1, \"URL: \" + _toDisplayString(url.value), 1),\n              _createElementVNode(\"pre\", _hoisted_2, _toDisplayString(settingsJSON.value), 1)\n            ]),\n            _: 1\n          })\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }, 8, [\"model-value\"]))\n}\n}\n\n})","<template>\n  <v-dialog width=\"1000\" max-width=\"90vw\" :model-value=\"modelValue\" @update:model-value=\"$emit('update:modelValue',$event)\">\n    <v-card height=\"90vh\" class=\"d-flex flex-column\">\n      <v-toolbar color=\"primary\" flat dense class=\"flex-grow-0\">\n        <v-toolbar-title>Model Info</v-toolbar-title>\n        <v-spacer></v-spacer>\n\n        <v-tooltip bottom>\n          <template v-slot:activator=\"{ props }\">\n            <v-btn icon @click=\"log\" v-bind=\"props\"><v-icon>mdi-console</v-icon></v-btn>\n          </template>\n          <span>Print to console</span>\n        </v-tooltip>\n\n        <v-btn icon @click=\"$emit('update:modelValue',false)\">\n          <v-icon>mdi-close</v-icon>\n        </v-btn>\n      </v-toolbar>\n\n      <v-card-text class=\"pa-8 overflow-auto\">\n        <div class=\"mb-6 text-no-wrap\">URL: {{ url }}</div>\n        <pre class=\"code\">{{ settingsJSON }}</pre>\n      </v-card-text>\n    </v-card>\n  </v-dialog>\n</template>\n\n<script setup lang=\"ts\">\nimport { useAppStore } from '@/store/app';\nimport { ref, watch } from 'vue';\n\nconst props = defineProps<{\n    modelValue: boolean;\n    id: number;\n}>();\n\ndefineEmits(['update:modelValue']);\n\nconst appStore = useAppStore();\n\nconst url = ref('');\nconst settingsJSON = ref('');\n\nwatch(() => props.modelValue, (value) => {\n    if (value) {\n        const model = appStore.getModel(props.id);\n        const settings = model?.pixiModel?.internalModel.settings;\n\n        url.value = model?.url || '';\n        settingsJSON.value = JSON.stringify(settings?.json || {}, null, 2);\n    }\n});\n\nfunction log() {\n    console.log(JSON.parse(settingsJSON.value));\n}\n</script>\n\n<style scoped lang=\"stylus\">\n.code\n  font-family Consolas, monospace\n</style>","import script from \"./ModelInfo.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./ModelInfo.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./ModelInfo.vue?vue&type=style&index=0&id=4bddc8c3&scoped=true&lang=stylus\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-4bddc8c3\"]])\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, mergeProps as _mergeProps, vShow as _vShow, withDirectives as _withDirectives, normalizeStyle as _normalizeStyle, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nconst _hoisted_1 = { class: \"model-page\" }\nconst _hoisted_2 = { class: \"header pa-3\" }\nconst _hoisted_3 = { class: \"d-flex align-center\" }\nconst _hoisted_4 = { class: \"text-h4\" }\n\nimport { ref, computed, reactive, onMounted } from 'vue';\nimport { useDisplay } from 'vuetify';\nimport ModelList from './components/ModelList.vue';\nimport ModelCreation from './components/ModelCreation.vue';\nimport ModelEditor from '@/components/ModelEditor.vue';\nimport DropZone from '@/components/DropZone.vue';\nimport Settings from '@/components/Settings.vue';\nimport ModelInfo from '@/components/ModelInfo.vue';\nimport { Background } from '@/tools/Background';\nimport { useAppStore } from '@/store/app';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'App',\n  setup(__props) {\n\nconst appStore = useAppStore();\nconst display = useDisplay();\n\nconst drawer = ref(true);\nconst drawerSwitch = ref(false);\nconst tab = ref<number | undefined>(-1);\n\nconst modelList = reactive({\n    visible: true,\n});\n\nconst selectedModelID = ref(0);\nconst modelInfoDialog = ref(false);\n\nconst creation = reactive({\n    dialog: false,\n    result: null,\n});\n\nconst snackbar = reactive({\n    visible: false,\n    message: '',\n    timeout: 5000,\n});\n\nconst drawerWidth = computed(() => {\n    return display.xl.value ? 450 : 360;\n});\n\nconst modelName = computed(() => {\n    return appStore.getModel(selectedModelID.value)?.name || '';\n});\n\nfunction showUI(show: boolean) {\n    drawer.value = show;\n    modelList.visible = show;\n    drawerSwitch.value = false;\n}\n\nfunction snack(message: string, timeout: number = 5000) {\n    snackbar.message = message;\n    snackbar.timeout = timeout;\n    snackbar.visible = true;\n}\n\nfunction onError(e: unknown) {\n    const message = (e instanceof Error ? e.message : String(e)) || '';\n\n    if (message) {\n        snack(message, -1);\n    }\n}\n\n// Initial setup\nonMounted(() => {\n    tab.value = undefined;\n    creation.dialog = true;\n\n    if (!Background.current) {\n        snack('Drag and drop a local image to set the background!');\n    }\n});\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_toolbar_title = _resolveComponent(\"v-toolbar-title\")!\n  const _component_v_spacer = _resolveComponent(\"v-spacer\")!\n  const _component_v_icon = _resolveComponent(\"v-icon\")!\n  const _component_v_btn = _resolveComponent(\"v-btn\")!\n  const _component_v_btn_toggle = _resolveComponent(\"v-btn-toggle\")!\n  const _component_v_toolbar = _resolveComponent(\"v-toolbar\")!\n  const _component_v_tooltip = _resolveComponent(\"v-tooltip\")!\n  const _component_v_divider = _resolveComponent(\"v-divider\")!\n  const _component_v_navigation_drawer = _resolveComponent(\"v-navigation-drawer\")!\n  const _component_v_container = _resolveComponent(\"v-container\")!\n  const _component_v_main = _resolveComponent(\"v-main\")!\n  const _component_v_fab_transition = _resolveComponent(\"v-fab-transition\")!\n  const _component_v_snackbar = _resolveComponent(\"v-snackbar\")!\n  const _component_v_app = _resolveComponent(\"v-app\")!\n\n  return (_openBlock(), _createBlock(_component_v_app, null, {\n    default: _withCtx(() => [\n      _createVNode(_component_v_navigation_drawer, {\n        absolute: \"\",\n        stateless: \"\",\n        width: drawerWidth.value,\n        modelValue: drawer.value,\n        \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((drawer).value = $event)),\n        onTransitionend: _cache[5] || (_cache[5] = ($event: any) => (!drawer.value && (drawerSwitch.value=true)))\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_toolbar, { color: \"primary\" }, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_toolbar_title, null, {\n                default: _withCtx(() => [...(_cache[14] || (_cache[14] = [\n                  _createTextVNode(\"Live2D Viewer\", -1)\n                ]))]),\n                _: 1\n              }),\n              _createVNode(_component_v_spacer),\n              _createVNode(_component_v_btn_toggle, {\n                group: \"\",\n                rounded: \"\",\n                modelValue: tab.value,\n                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((tab).value = $event))\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_v_btn, { icon: \"\" }, {\n                    default: _withCtx(() => [\n                      _createVNode(_component_v_icon, null, {\n                        default: _withCtx(() => [...(_cache[15] || (_cache[15] = [\n                          _createTextVNode(\"mdi-cog\", -1)\n                        ]))]),\n                        _: 1\n                      })\n                    ]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              }, 8, [\"modelValue\"]),\n              _createVNode(_component_v_btn, {\n                icon: \"\",\n                class: \"ml-1\",\n                onClick: _cache[1] || (_cache[1] = ($event: any) => (showUI(false)))\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_v_icon, null, {\n                    default: _withCtx(() => [...(_cache[16] || (_cache[16] = [\n                      _createTextVNode(\"mdi-close\", -1)\n                    ]))]),\n                    _: 1\n                  })\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          }),\n          _withDirectives(_createElementVNode(\"div\", _hoisted_1, [\n            _createElementVNode(\"div\", _hoisted_2, [\n              _createElementVNode(\"div\", _hoisted_3, [\n                _createElementVNode(\"div\", _hoisted_4, _toDisplayString('#' + selectedModelID.value), 1),\n                _createVNode(_component_v_spacer),\n                _createVNode(_component_v_btn, {\n                  icon: \"\",\n                  width: \"48\",\n                  height: \"48\",\n                  class: \"mr-n3\",\n                  onClick: _cache[2] || (_cache[2] = ($event: any) => (creation.dialog=true))\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_v_icon, null, {\n                      default: _withCtx(() => [...(_cache[17] || (_cache[17] = [\n                        _createTextVNode(\"mdi-plus\", -1)\n                      ]))]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                })\n              ]),\n              _createVNode(_component_v_tooltip, {\n                top: \"\",\n                disabled: !selectedModelID.value\n              }, {\n                activator: _withCtx(({ props }) => [\n                  _createElementVNode(\"div\", _mergeProps({\n                    class: ['model-name mt-2 text-h5',{valid:selectedModelID.value}],\n                    onClick: _cache[3] || (_cache[3] = ($event: any) => (selectedModelID.value&&(modelInfoDialog.value=true)))\n                  }, props), _toDisplayString(selectedModelID.value ? modelName.value : 'Press + to create a model'), 17)\n                ]),\n                default: _withCtx(() => [\n                  _cache[18] || (_cache[18] = _createTextVNode(\" Show info \", -1))\n                ]),\n                _: 1\n              }, 8, [\"disabled\"])\n            ]),\n            _createVNode(_component_v_divider),\n            _createVNode(ModelEditor, {\n              id: selectedModelID.value,\n              visible: drawer.value&&tab.value===undefined\n            }, null, 8, [\"id\", \"visible\"])\n          ], 512), [\n            [_vShow, tab.value===undefined]\n          ]),\n          _withDirectives(_createVNode(Settings, null, null, 512), [\n            [_vShow, tab.value===0]\n          ])\n        ]),\n        _: 1\n      }, 8, [\"width\", \"modelValue\"]),\n      _createVNode(_component_v_main, {\n        style: _normalizeStyle({paddingLeft:`${drawerWidth.value}px !important`})\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_v_container, {\n            fluid: \"\",\n            class: \"pa-0 fill-height flex-column\"\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_spacer),\n              _createVNode(ModelList, {\n                modelValue: selectedModelID.value,\n                \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((selectedModelID).value = $event)),\n                show: modelList.visible\n              }, null, 8, [\"modelValue\", \"show\"])\n            ]),\n            _: 1\n          }),\n          _createVNode(ModelCreation, {\n            modelValue: creation.dialog,\n            \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((creation.dialog) = $event)),\n            onCreate: _cache[8] || (_cache[8] = ($event: any) => (selectedModelID.value=$event)),\n            onError: onError\n          }, null, 8, [\"modelValue\"]),\n          _createVNode(ModelInfo, {\n            modelValue: modelInfoDialog.value,\n            \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event: any) => ((modelInfoDialog).value = $event)),\n            id: selectedModelID.value\n          }, null, 8, [\"modelValue\", \"id\"])\n        ]),\n        _: 1\n      }, 8, [\"style\"]),\n      _createVNode(_component_v_fab_transition, null, {\n        default: _withCtx(() => [\n          _withDirectives(_createVNode(_component_v_btn, {\n            fab: \"\",\n            top: \"\",\n            left: \"\",\n            absolute: \"\",\n            dark: \"\",\n            color: \"accent\",\n            onClick: _cache[10] || (_cache[10] = ($event: any) => (showUI(true)))\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_v_icon, null, {\n                default: _withCtx(() => [...(_cache[19] || (_cache[19] = [\n                  _createTextVNode(\"mdi-plus\", -1)\n                ]))]),\n                _: 1\n              })\n            ]),\n            _: 1\n          }, 512), [\n            [_vShow, drawerSwitch.value]\n          ])\n        ]),\n        _: 1\n      }),\n      _createVNode(DropZone, {\n        onCreate: _cache[11] || (_cache[11] = ($event: any) => (selectedModelID.value=$event)),\n        onError: onError\n      }),\n      _createVNode(_component_v_snackbar, {\n        modelValue: snackbar.visible,\n        \"onUpdate:modelValue\": _cache[13] || (_cache[13] = ($event: any) => ((snackbar.visible) = $event)),\n        timeout: snackbar.timeout\n      }, {\n        action: _withCtx(({ attrs }) => [\n          _createVNode(_component_v_btn, _mergeProps({ icon: \"\" }, attrs, {\n            onClick: _cache[12] || (_cache[12] = ($event: any) => (snackbar.visible=false))\n          }), {\n            default: _withCtx(() => [\n              _createVNode(_component_v_icon, null, {\n                default: _withCtx(() => [...(_cache[20] || (_cache[20] = [\n                  _createTextVNode(\"mdi-close\", -1)\n                ]))]),\n                _: 1\n              })\n            ]),\n            _: 1\n          }, 16)\n        ]),\n        default: _withCtx(() => [\n          _createTextVNode(_toDisplayString(snackbar.message) + \" \", 1)\n        ]),\n        _: 1\n      }, 8, [\"modelValue\", \"timeout\"])\n    ]),\n    _: 1\n  }))\n}\n}\n\n})","<template>\n  <v-app>\n    <v-navigation-drawer absolute stateless :width=\"drawerWidth\" v-model=\"drawer\" @transitionend=\"!drawer && (drawerSwitch=true)\">\n      <v-toolbar color=\"primary\">\n        <v-toolbar-title>Live2D Viewer</v-toolbar-title>\n        <v-spacer></v-spacer>\n        <v-btn-toggle group rounded v-model=\"tab\">\n          <v-btn icon>\n            <v-icon>mdi-cog</v-icon>\n          </v-btn>\n        </v-btn-toggle>\n        <v-btn icon class=\"ml-1\" @click=\"showUI(false)\">\n          <v-icon>mdi-close</v-icon>\n        </v-btn>\n      </v-toolbar>\n\n      <div v-show=\"tab===undefined\" class=\"model-page\">\n        <div class=\"header pa-3\">\n          <div class=\"d-flex align-center\">\n            <div class=\"text-h4\">{{ '#' + selectedModelID }}</div>\n            <v-spacer></v-spacer>\n            <v-btn icon width=\"48\" height=\"48\" class=\"mr-n3\" @click=\"creation.dialog=true\">\n              <v-icon>mdi-plus</v-icon>\n            </v-btn>\n          </div>\n          <v-tooltip top :disabled=\"!selectedModelID\">\n            <template v-slot:activator=\"{ props }\">\n              <div :class=\"['model-name mt-2 text-h5',{valid:selectedModelID}]\"\n                   @click=\"selectedModelID&&(modelInfoDialog=true)\" v-bind=\"props\">\n                {{ selectedModelID ? modelName : 'Press + to create a model' }}\n              </div>\n            </template>\n            Show info\n          </v-tooltip>\n        </div>\n\n        <v-divider></v-divider>\n\n        <ModelEditor :id=\"selectedModelID\" :visible=\"drawer&&tab===undefined\"/>\n      </div>\n\n      <Settings v-show=\"tab===0\"/>\n    </v-navigation-drawer>\n    <v-main :style=\"{paddingLeft:`${drawerWidth}px !important`}\">\n      <v-container fluid class=\"pa-0 fill-height flex-column\">\n        <v-spacer></v-spacer>\n        <ModelList v-model=\"selectedModelID\" :show=\"modelList.visible\"/>\n      </v-container>\n      <ModelCreation v-model=\"creation.dialog\" @create=\"selectedModelID=$event\" @error=\"onError\"/>\n      <ModelInfo v-model=\"modelInfoDialog\" :id=\"selectedModelID\"/>\n    </v-main>\n\n    <v-fab-transition>\n      <v-btn fab top left absolute dark color=\"accent\" v-show=\"drawerSwitch\" @click=\"showUI(true)\">\n        <v-icon>mdi-plus</v-icon>\n      </v-btn>\n    </v-fab-transition>\n\n    <DropZone @create=\"selectedModelID=$event\" @error=\"onError\"/>\n\n    <v-snackbar v-model=\"snackbar.visible\" :timeout=\"snackbar.timeout\">\n      {{ snackbar.message }}\n      <template v-slot:action=\"{ attrs }\">\n        <v-btn icon v-bind=\"attrs\" @click=\"snackbar.visible=false\"><v-icon>mdi-close</v-icon></v-btn>\n      </template>\n    </v-snackbar>\n  </v-app>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref, computed, reactive, onMounted } from 'vue';\nimport { useDisplay } from 'vuetify';\nimport ModelList from './components/ModelList.vue';\nimport ModelCreation from './components/ModelCreation.vue';\nimport ModelEditor from '@/components/ModelEditor.vue';\nimport DropZone from '@/components/DropZone.vue';\nimport Settings from '@/components/Settings.vue';\nimport ModelInfo from '@/components/ModelInfo.vue';\nimport { Background } from '@/tools/Background';\nimport { useAppStore } from '@/store/app';\n\nconst appStore = useAppStore();\nconst display = useDisplay();\n\nconst drawer = ref(true);\nconst drawerSwitch = ref(false);\nconst tab = ref<number | undefined>(-1);\n\nconst modelList = reactive({\n    visible: true,\n});\n\nconst selectedModelID = ref(0);\nconst modelInfoDialog = ref(false);\n\nconst creation = reactive({\n    dialog: false,\n    result: null,\n});\n\nconst snackbar = reactive({\n    visible: false,\n    message: '',\n    timeout: 5000,\n});\n\nconst drawerWidth = computed(() => {\n    return display.xl.value ? 450 : 360;\n});\n\nconst modelName = computed(() => {\n    return appStore.getModel(selectedModelID.value)?.name || '';\n});\n\nfunction showUI(show: boolean) {\n    drawer.value = show;\n    modelList.visible = show;\n    drawerSwitch.value = false;\n}\n\nfunction snack(message: string, timeout: number = 5000) {\n    snackbar.message = message;\n    snackbar.timeout = timeout;\n    snackbar.visible = true;\n}\n\nfunction onError(e: unknown) {\n    const message = (e instanceof Error ? e.message : String(e)) || '';\n\n    if (message) {\n        snack(message, -1);\n    }\n}\n\n// Initial setup\nonMounted(() => {\n    tab.value = undefined;\n    creation.dialog = true;\n\n    if (!Background.current) {\n        snack('Drag and drop a local image to set the background!');\n    }\n});\n</script>\n\n<style scoped lang=\"stylus\">\n:deep(.v-navigation-drawer__content)\n  display flex\n  flex-direction column\n\n  .v-toolbar\n    flex-grow initial !important\n\n:deep(.v-toolbar__content)\n  padding-left 12px\n  padding-right 12px\n\n.v-btn-toggle > .v-btn.v-btn\n  opacity 1\n\n.model-page\n  display flex\n  flex-direction column\n  overflow auto\n\n.model-name.valid\n  cursor pointer\n  transition color .1s ease-out\n\n  &:hover\n    color var(--v-primary-base)\n\n.model-editor\n  overflow auto\n</style>\n\n<style lang=\"stylus\">\n*\n  margin: 0\n  padding: 0\n  box-sizing: border-box\n\nhtml\n  overflow: hidden !important\n\n#canvas\n  position: absolute\n\n#app\n  pointer-events none\n\n.v-application\n  background none !important\n\n.v-btn--fab.v-size--default.v-btn--absolute.v-btn--top\n  top: 16px\n  pointer-events auto\n\n// https://github.com/vuetifyjs/vuetify/issues/7283#issuecomment-572276385\n// Reversed input variant\n.v-input--reverse .v-input__slot\n  flex-direction: row-reverse\n  justify-content: flex-end\n\n  .v-input--selection-controls__input\n    margin-right: 0\n    margin-left: 8px\n\n  .v-label\n    display: block\n    flex: 1\n</style>","import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=f0f19fd8&scoped=true&lang=stylus\"\nimport \"./App.vue?vue&type=style&index=1&id=f0f19fd8&lang=stylus\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-f0f19fd8\"]])\n\nexport default __exports__","import 'vuetify/styles';\nimport { createVuetify } from 'vuetify';\nimport * as components from 'vuetify/components';\nimport * as directives from 'vuetify/directives';\nimport { aliases, mdi } from 'vuetify/iconsets/mdi';\nimport '@mdi/font/css/materialdesignicons.css';\n\nexport default createVuetify({\n    components,\n    directives,\n    icons: {\n        defaultSet: 'mdi',\n        aliases,\n        sets: {\n            mdi,\n        },\n    },\n    theme: {\n        defaultTheme: 'dark',\n        themes: {\n            light: {\n                dark: false,\n                colors: {\n                    primary: '#ee44aa',\n                    secondary: '#424242',\n                    accent: '#82B1FF',\n                    error: '#FF5252',\n                    info: '#2196F3',\n                    success: '#4CAF50',\n                    warning: '#FFC107'\n                }\n            },\n            dark: {\n                dark: true,\n                colors: {\n                    primary: '#ee44aa', // Kept from original, might need adjustment\n                }\n            }\n        },\n    },\n});","import { createApp } from 'vue';\nimport { createPinia } from 'pinia';\nimport VueApp from './App.vue';\nimport vuetify from './plugins/vuetify';\nimport { config } from 'pixi-live2d-display';\nimport { useAppStore } from '@/store/app';\n\nconst app = createApp(VueApp);\nconst pinia = createPinia();\n\napp.use(pinia);\napp.use(vuetify);\n\napp.directive('visible', (el, binding) => {\n    el.style.visibility = !!binding.value ? 'visible' : 'hidden';\n});\n\nconst appStore = useAppStore();\nappStore.init();\n\napp.mount('#app');\n\nwindow.vueApp = app;\nwindow.config = config;\n\nconfig.logLevel = config.LOG_LEVEL_VERBOSE;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = function(module) {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunklive2d_viewer_web\"] = self[\"webpackChunklive2d_viewer_web\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(5600); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["async","ping","url","fetch","ok","e","isSettingsFileV2","file","endsWith","isSettingsFileV3","isSettingsFile","isMocFileV2","isMocFileV3","isMocFile","uid","JSDELIVR_PREFIX","tasks","Map","rootNodes","map","repo","id","name","children","files","modelCount","settingsJSONs","getRootNodes","loadRootNode","node","includes","Promise","resolve","get","task","toLowerCase","replace","then","res","json","data","models","traverseNode","n","countModels","Object","assign","settings","catch","error","set","length","child","fn","getFileURL","folder","folderPath","getNodePath","filePath","encodeURI","getAlternativeURL","repoAndFile","names","split","slice","join","search","nodes","_node","subPath","validateURL","getSettingsJSON","mocURL","startsWith","mocFile","decodeURI","forEach","middlewares","indexOf","loader","context","next","resolveURL","status","console","warn","live2DModelMiddlewares","urlToJSON","defaultInit","prototype","init","source","Error","json3","FileReferences","Moc","Motions","motionFile","File","json2","model","motions","jsonText","text","replaceJSONText","patchJSON","setSingleMotionAsIdle","log","live2dModel","emit","patch","patches","patchInternalModel","internalModel","this","call","textures","Array","isArray","realArray","values","tex","extractCubism2IdleMotions","idle","motion0","fileExists","Textures","tex0Exists","push","extractCubism4IdleMotions","correctTexture","texture","isValidJSON","all","motionGroup","motion","filter","Idle","prop","keys","snakeCase","toUpperCase","removeSoundDefs","keywords","idleMotions","group","entries","keyword","unionBy","sound","undefined","zipReader","readText","jsZip","path","getFilePaths","paths","relativePath","getFiles","fileName","lastIndexOf","blob","Filter","target","filterNames","filters","update","dt","Noise","seed","Math","random","CRT","time","release","Outline","Pixelate","lineWidth","lineContrast","vignetting","Ascii","Alpha","registerTicker","Live2DModel","constructor","super","backgroundVisible","currentMotionStartTime","performance","now","currentMotionDuration","hitAreaFrames","visible","background","from","WHITE","alpha","once","_init","addChild","width","height","anchor","on","startHitMotion","motionManager","index","elapsedTime","motionGroups","_loopDurationSeconds","getDurationMSec","expressionManager","originalStartMotion","_setExpression","expression","expressions","reserveExpressionIndex","defineProperty","hitAreaNames","area","possibleGroups","possibleGroup","definitions","updateTransform","_render","renderer","render","destroy","options","draggable","_model","onPointerDown","onPointerMove","onPointerUp","dragging","_pointerX","global","x","_pointerY","y","position","StageState","unshift","factoryContext","ModelLoadingState","stages","settingsJSON","PENDING","NOT_AVAILABLE","pose","physics","updateText","watch","complete","stage","COMPLETED","state","mark","FAILED","lowerCase","Boolean","THUMBNAIL","ModelEntity","thumbnail","aspectRatio","_scaleX","_scaleY","_rotation","_zIndex","loadingState","loadModel","pixiModel","setupLive2DModel","modelLoaded","message","updateFilters","initThumbnail","RESOLUTION","hitAreaFramesVisible","canvas","plugins","extract","toBlob","URL","createObjectURL","fit","scale","min","round","scaleX","scaleY","rotate","rotation","setZIndex","zIndex","setVisible","revokeObjectURL","value","add","PixiApp","stats","view","document","getElementById","resizeTo","window","antialias","backgroundAlpha","ticker","remove","begin","deltaMS","end","saveValue","key","localStorage","setItem","JSON","stringify","loadValue","defaultValue","getItem","parse","showPanel","dom","style","left","right","useAppStore","pixiApp","volume","showStats","showModelFrame","showHitAreaFrames","actions","updateStatsVisibility","updateVolume","addModel","initModel","getModel","find","m","removeModel","splice","removeChild","body","appendChild","parentElement","updateModelFrame","updateHitAreaFrames","_hoisted_1","class","__name","props","modelValue","show","type","emits","setup","__props","__emit","display","appStore","paneHeight","xl","selectedIndex","findIndex","select","_ctx","_cache","_component_v_progress_circular","_component_v_icon","_component_v_row","_component_v_spacer","_component_v_btn","_component_v_card_title","_component_v_img","_component_v_tooltip","_component_v_card","_component_v_item","_component_v_item_group","_component_v_sheet","_component_v_slide_y_reverse_transition","default","mandatory","i","isSelected","toggle","color","top","disabled","activator","src","ref_for","placeholder","align","justify","_","indeterminate","icon","size","__exports__","tree","openedFolders","activeFolders","selectedFileIndex","activeFolderFiles","fetchModels","folderOpened","newOpenedFolders","diff","xor","submit","oldValue","hasChanged","_component_v_toolbar_title","_component_v_toolbar","_component_v_chip","_component_v_treeview","_component_v_col","_component_v_divider","_component_v_list_item_title","_component_v_list_item_content","_component_v_list_item","_component_v_list_item_group","_component_v_card_actions","_component_v_dialog","$emit","$event","flat","dense","activatable","active","items","prepend","open","label","item","vertical","href","nonNullableFilter","array","basename","pop","isDraggingFile","event","dataTransfer","types","some","readFiles","dataTransferItemList","webkitGetAsEntry","readEntries","entry","isFile","readFileEntry","isDirectory","subEntries","readDirEntry","dirEntry","reject","createReader","fileEntry","fullPath","readAsBase64","reader","FileReader","onload","result","onerror","readAsDataURL","MAX_SETTINGS_FILES","defaultCreateSettings","createSettings","uploadFiles","createFakeSettings","settingsFiles","nonSettingsFiles","settingsArray","settingsFile","partialFiles","validateFiles","webkitRelativePath","mocFiles","fileList","f","modelName","filePaths","Version","Physics","Pose","_objectURL","dropHelpDialog","picker","dialog","urlError","urlMessages","fileInput","onFileChange","input","uploadModel","create","test","_component_v_text_field","_component_v_card_text","filled","messages","small","ref_key","ref","multiple","accept","click","_hoisted_2","_hoisted_3","Number","openedGroups","motionState","motionProgressTimerID","currentExpressionIndex","pendingExpressionIndex","rootElement","hasPixiModel","rotationDeg","PI","motionExpand","updateModel","resetModel","pixiModelLoaded","off","expressionSet","expressionReserved","motionLoadError","expressionLoadError","groups","currentExpression","startMotion","FORCE","setExpression","updateMotionProgress","currentGroup","startTime","duration","progress","clamp","setProperty","immediate","setInterval","clearInterval","_component_v_slider","_component_v_list_group","_component_v_list_subheader","_component_v_checkbox","_component_v_list","expand","opened","title","String","max","step","motionCount","reduce","sum","ripple","currentIndex","append","reservedGroup","reservedIndex","BG_STORAGE_KEY","Background","styleElement","currentObjectURL","objectURL","backgroundImage","current","emitter","base64","reset","backgroundColor","removeItem","head","loadBackground","createElement","dataURL","innerText","backgroundSize","draggingOver","drop","preventDefault","ondragenter","ondragleave","relatedTarget","ondragover","ondrop","_hoisted_4","lastUpdated","Date","toLocaleString","currentBackground","val","modelFrame","resetBackground","backgroundChanged","_component_v_switch","bottom","drawer","drawerSwitch","tab","modelList","selectedModelID","modelInfoDialog","creation","snackbar","timeout","drawerWidth","showUI","snack","onError","_component_v_btn_toggle","_component_v_navigation_drawer","_component_v_container","_component_v_main","_component_v_fab_transition","_component_v_snackbar","_component_v_app","absolute","stateless","rounded","fluid","fab","dark","action","attrs","components","directives","icons","defaultSet","aliases","sets","mdi","theme","defaultTheme","themes","light","colors","primary","secondary","accent","info","success","warning","use","vuetify","directive","el","binding","visibility","mount","vueApp","config","logLevel","LOG_LEVEL_VERBOSE","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","loaded","__webpack_modules__","deferred","O","chunkIds","priority","notFulfilled","Infinity","fulfilled","j","every","r","getter","__esModule","d","a","definition","o","enumerable","g","globalThis","Function","obj","hasOwnProperty","Symbol","toStringTag","nmd","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","chunkLoadingGlobal","self","bind","__webpack_exports__"],"ignoreList":[],"sourceRoot":""}