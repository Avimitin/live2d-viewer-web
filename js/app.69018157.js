(function(){var e={2634:function(){},5600:function(e,t,o){"use strict";var l=o(3751),i=o(810),n=o(641),a=o(33),s=o(953),r=o(7093),d=o(9200),u=o(1577),c=o(8027),v=o(2562),m=o(1443),p=o(1219),f=o.n(p);async function h(e){try{return(await fetch(e)).ok}catch(t){return!1}}var g=o(9340),b=o(8890),k=o(1093);function x(e){return e.endsWith("model.json")}function F(e){return e.endsWith("model3.json")}function y(e){return x(e)||F(e)}function _(e){return e.endsWith(".moc")}function w(e){return e.endsWith(".moc3")}function M(e){return _(e)||w(e)}let A=0;const V="https://cdn.jsdelivr.net/gh/",E=new Map,L=["Eikanya/Live2d-model","guansss/pixi-live2d-display"].map(e=>({id:A++,name:e,children:[],files:[],modelCount:0})),R={};function W(){return L}function C(e){if(!L.includes(e))return Promise.resolve();if(!E.get(e)){const t=fetch(e.name.toLowerCase().replace("/","")+".json").then(e=>e.json()).then(t=>{e.name=t.models.name,e.children=t.models.children,e.files=t.models.files,I(e,e=>e.id=A++),O(e),Object.assign(R,t.settings)}).catch(t=>e.error=t);return E.set(e,t),t}return E.get(e)}function O(e){var t;e.modelCount=(null===(t=e.files)||void 0===t?void 0:t.length)||0;for(const o of e.children||[])e.modelCount+=O(o);return e.modelCount}function I(e,t){if(t(e),e.children)for(const o of e.children)I(o,t)}function S(e,t){const o=T(e);if(o){let e=encodeURI(o+"/"+t);return V+e}}function j(e){const t=e.replace(V,""),o=t.split("/"),l=o.slice(0,2).join("/"),i=o.slice(2).join("/");return`https://raw.githubusercontent.com/${l}/master/${i}`}function T(e){const t=o=>{for(const l of o){if(l===e)return l.name;if(l.children){const e=t(l.children);if(e)return l.name+"/"+e}}};return t(L)}function N(e){if(!y(e)&&!e.endsWith(".zip")){if(M(e)){if(U(e))return;return"Error: Cannot display a moc file that doesn't belong to any source repository"}return"Warning: Unknown URL type. The model may not be loaded correctly"}}function U(e){if(e.startsWith(V)){let t=e.replace(V,"");return t=decodeURI(t),R[t]}}L.forEach(C),d.gk.middlewares[d.gk.middlewares.indexOf(d.y5.loader)]=async(e,t)=>{const o=e.settings?e.settings.resolveURL(e.url):e.url;try{return void await d.y5.loader(e,t)}catch(l){if(!(l&&"object"===typeof l&&"status"in l&&403===l.status&&o.includes("jsdelivr")))throw l;console.warn("Received 403 response from jsDelivr, switching to the alternative URL")}return e.url=j(o),await d.y5.loader(e,t),t()},d.dq.live2DModelMiddlewares[d.dq.live2DModelMiddlewares.indexOf(d.dq.urlToJSON)]=X;const D=d.LZ.prototype.init;async function X(e,t){var o,l,i,n;if("string"===typeof e.source){const t=e.source;let a;if(M(t)){if(a=U(t),!a)throw new Error("Cannot find settings JSON from moc");if(w(t)){a.url=k.OZ.resolve(t,"dummy.model3.json");const e=a;e.FileReferences.Moc=t,(null===(l=null===(o=e.FileReferences.Motions)||void 0===o?void 0:o[""])||void 0===l?void 0:l.length)&&"string"===typeof e.FileReferences.Motions[""][0]&&(e.FileReferences.Motions[""]=e.FileReferences.Motions[""].map(e=>({File:e})))}else{a.url=k.OZ.resolve(t,"dummy.model.json");const e=a;e.model=t,(null===(n=null===(i=e.motions)||void 0===i?void 0:i[""])||void 0===n?void 0:n.length)&&"string"===typeof e.motions[""][0]&&(e.motions[""]=e.motions[""].map(e=>({file:e})))}}else{let e=await fetch(t).then(e=>e.text());e=P(e,t),a=f().parse(e),a.url=t}await K(a,t),$(a),e.source=a,console.log(a),e.live2dModel.emit("settingsJSONLoaded",a)}return t()}function P(e,t){for(const o of G)t.includes(encodeURI(o.search))&&o.replace&&(e=o.replace(e,t));return e}async function K(e,t){for(const o of G)t.includes(encodeURI(o.search))&&o.patch&&await o.patch(e,t)}async function B(e){for(const t of G)e.settings.url.includes(encodeURI(t.search))&&t.patchInternalModel&&await t.patchInternalModel(e)}d.LZ.prototype.init=async function(){await B(this),D.call(this)};const G=[{search:"魂器学院",replace(e){return e.replace(/mtn"([^,])/gm,'mtn",$1')},patch(e){if(e.textures&&!Array.isArray(e.textures)){const t=Object.values(e.textures)[0];Array.isArray(t)&&(e.textures=t.map(e=>e.startsWith("textures/")?e:"textures/"+e))}}},{search:"少女前线",async patch(e,t){var o,l,i;if(z(e,["daiji"]),e.name||(e.name=(0,d.ub)(t.replace(/(normal|destroy).model.json/,""))),null===(l=null===(o=e.motions)||void 0===o?void 0:o.idle)||void 0===l?void 0:l.length){const o=e.motions.idle[0];if(null===(i=o.file)||void 0===i?void 0:i.startsWith("daiji")){const e=await h(k.OZ.resolve(t,o.file));e||(o.file="motions/"+o.file)}}}},{search:"アンノウンブライド",async patch(e,t){var o,l;if(0===(null===(l=null===(o=e.FileReferences)||void 0===o?void 0:o.Textures)||void 0===l?void 0:l.length)){const o=await h(k.OZ.resolve(t,"textures/texture_00.png"));e.FileReferences.Textures.push(o?"textures/texture_00.png":"textures/texture_00 .png")}J(e,["home","gacha"])}},{search:"凍京",async patch(e,t){var o,l,i,n,a;const s=async e=>await h(k.OZ.resolve(t,e))?e:e.replace("/texture","/android/texture");if(d.W7.isValidJSON(e)){if(e.textures&&(e.textures=await Promise.all(e.textures.map(s))),e.motions){for(const t of Object.values(e.motions))if(null===t||void 0===t?void 0:t.length)for(const e of t)e.file=null!==(o=e.file)&&void 0!==o?o:e.File,delete e.File;!(null===(l=e.motions.idle)||void 0===l?void 0:l.length)&&e.motions[""]&&(e.motions.idle=e.motions[""].filter(e=>{var t;return null===(t=e.file)||void 0===t?void 0:t.includes("loop")}))}}else d.EX.isValidJSON(e)&&((null===(i=e.FileReferences)||void 0===i?void 0:i.Textures)&&(e.FileReferences.Textures=await Promise.all(e.FileReferences.Textures.map(s))),(null===(n=e.FileReferences)||void 0===n?void 0:n.Motions)&&!(null===(a=e.FileReferences.Motions.Idle)||void 0===a?void 0:a.length)&&e.FileReferences.Motions[""]&&(e.FileReferences.Motions.Idle=e.FileReferences.Motions[""].filter(e=>{var t;return null===(t=e.File)||void 0===t?void 0:t.includes("loop")})))}},{search:"天命之子",patch(e){var t,o,l,i,n;(null===(o=null===(t=e.motions)||void 0===t?void 0:t[""])||void 0===o?void 0:o.length)&&!(null===(i=null===(l=e.motions)||void 0===l?void 0:l.idle)||void 0===i?void 0:i.length)&&(e.motions.idle=null===(n=e.motions)||void 0===n?void 0:n[""].map(e=>Object.assign({},e)))}},{search:"碧蓝航线",patch(e){J(e,["idle"])}},{search:"少女咖啡枪",patch(e){J(e,["stand"])},patchInternalModel(e){for(const t of Object.keys(e))t.startsWith("idParam")&&(e[t]=(0,g.A)(e[t]).toUpperCase())}},{search:"princesses",patch(e){z(e,["default","loop"])}},{search:"崩坏",patch(e){Y(e),""===e.name&&delete e.name}},{search:"战舰少女",patch(e){Y(e)}},{search:"机动战队",patch(e){Y(e)}},{search:"诺亚幻想",patch(e){"model"===e.name&&delete e.name}}];function $(e){var t,o,l;const i=null===(t=e.FileReferences)||void 0===t?void 0:t.Motions;i&&((null===(o=i.Idle)||void 0===o?void 0:o[0])||1!==(null===(l=i[""])||void 0===l?void 0:l.length)||(i.Idle=i[""].map(e=>Object.assign({},e))))}function z(e,t){if(e.motions){const o=[];for(const[l,i]of Object.entries(e.motions))if("idle"!==l&&Array.isArray(i))for(const e of i)for(const l of t)e.file&&e.file.toLowerCase().includes(l)&&o.push(e);o.length&&(e.motions.idle=(0,b.A)(e.motions.idle,o,"file"))}}function J(e,t){var o;if(null===(o=e.FileReferences)||void 0===o?void 0:o.Motions){const o=[];for(const[l,i]of Object.entries(e.FileReferences.Motions))if("Idle"!==l&&Array.isArray(i))for(const e of i)for(const l of t)e.File&&e.File.toLowerCase().includes(l)&&o.push(e);o.length&&(e.FileReferences.Motions.Idle=(0,b.A)(e.FileReferences.Motions.Idle,o,"File"))}}function Y(e){if(e.motions)for(const t of Object.values(e.motions))if(null===t||void 0===t?void 0:t.length)for(const e of t)e.sound=void 0}var H=o(1710),Z=o.n(H);d.p9.zipReader=(e,t)=>Z().loadAsync(e),d.p9.readText=(e,t)=>{const o=e.file(t);if(!o)throw new Error("Cannot find file: "+t);return o.async("text")},d.p9.getFilePaths=e=>{const t=[];return e.forEach(e=>t.push(e)),Promise.resolve(t)},d.p9.getFiles=(e,t)=>Promise.all(t.map(async t=>{const o=t.slice(t.lastIndexOf("/")+1),l=await e.file(t).async("blob");return new File([l],o)}));var Q,q=o(7998),ee=o(4668),te=o(6108),oe=o(7611),le=o(7836),ie=o(7339);(function(e){function t(t,o){t.filters=[];for(const l of o)t.filters.push(e.filters[l])}function o(t){e.filters.Noise.seed=Math.random(),e.filters.CRT.seed=Math.random(),e.filters.CRT.time+=.01*t}function l(e){e.filters=[]}e.filters={Outline:new ee.f(4),Pixelate:new q.F(4),CRT:new le.o({lineWidth:3,lineContrast:.3,vignetting:0}),Noise:new ie.p(.4),Ascii:new te.G,Alpha:new oe.Z(.7)},e.set=t,e.update=o,e.release=l})(Q||(Q={})),d.c0.registerTicker(m.Rv);class ne extends d.c0{constructor(){super(),this.backgroundVisible=!1,this.currentMotionStartTime=performance.now(),this.currentMotionDuration=0,this.hitAreaFrames=new u.L,this.hitAreaFrames.visible=!1,this.background=c.k.from(v.gP.WHITE),this.background.alpha=.2,this.background.visible=!1,this.once("modelLoaded",this._init)}_init(){this.addChild(this.hitAreaFrames),this.addChild(this.background),this.background.width=this.internalModel.width,this.background.height=this.internalModel.height,this.anchor.set(.5,.5),this.on("hit",this.startHitMotion),this.internalModel.motionManager.on("motionStart",(e,t)=>{var o;this.currentMotionStartTime=this.elapsedTime,this.currentMotionDuration=0;const l=null===(o=this.internalModel.motionManager.motionGroups[e])||void 0===o?void 0:o[t];l&&("_loopDurationSeconds"in l?this.currentMotionDuration=1e3*l._loopDurationSeconds:"getDurationMSec"in l&&(this.currentMotionDuration=l.getDurationMSec()))});const e=this.internalModel.motionManager.expressionManager;if(e){const t=e._setExpression;e._setExpression=o=>{t.call(e,o),this.emit("expressionSet",e.expressions.indexOf(o))};let o=e.reserveExpressionIndex;Object.defineProperty(e,"reserveExpressionIndex",{get:()=>o,set:e=>{o=e,this.emit("expressionReserved",e)}})}}startHitMotion(e){for(let t of e){t=t.toLowerCase();const e=[t,"tap"+t,"tap_"+t,"tap"];for(const t of e)for(let e of Object.keys(this.internalModel.motionManager.definitions))if(t===e.toLowerCase())return void this.motion(e)}}updateTransform(){super.updateTransform(),this.backgroundVisible&&this.background.updateTransform()}_render(e){this.backgroundVisible&&(this.background.visible=!0,this.background.render(e),this.background.visible=!1),super._render(e)}destroy(e){super.destroy(e),Q.release(this)}}function ae(e){const t=e;t.on("pointerdown",se),t.on("pointermove",re),t.on("pointerup",de),t.on("pointerupoutside",de)}function se(e){this.dragging=!0,this._pointerX=e.data.global.x-this.x,this._pointerY=e.data.global.y-this.y}function re(e){this.dragging&&(this.position.x=e.data.global.x-this._pointerX,this.position.y=e.data.global.y-this._pointerY)}function de(e){this.dragging=!1}var ue,ce=o(5323),ve=o(2345);(function(e){e[e["NOT_AVAILABLE"]=0]="NOT_AVAILABLE",e[e["PENDING"]=1]="PENDING",e[e["COMPLETED"]=2]="COMPLETED",e[e["FAILED"]=3]="FAILED"})(ue||(ue={})),d.dq.live2DModelMiddlewares.unshift((e,t)=>(e.live2dModel.factoryContext=e,t()));class me{constructor(){this.stages={settingsJSON:ue.PENDING,settings:ue.NOT_AVAILABLE,textures:ue.NOT_AVAILABLE,internalModel:ue.NOT_AVAILABLE,pose:ue.NOT_AVAILABLE,physics:ue.NOT_AVAILABLE},this.text="",this.updateText()}watch(e){e.once("settingsJSONLoaded",()=>this.complete("settingsJSON",e)).once("settingsLoaded",()=>this.complete("settings",e)).once("textureLoaded",()=>this.complete("textures",e)).once("modelLoaded",()=>this.complete("internalModel",e)).once("poseLoaded",()=>this.complete("pose",e)).once("physicsLoaded",()=>this.complete("physics",e))}complete(e,t){"settingsJSON"!==e&&this.stages.settingsJSON!==ue.COMPLETED&&(this.complete("settingsJSON",t),this.complete("settings",t)),this.stages[e]=ue.COMPLETED,"settingsJSON"===e?this.stages.settings=ue.PENDING:"settings"===e&&(this.stages.textures=ue.PENDING,this.stages.internalModel=ue.PENDING,t.factoryContext.settings.pose&&(this.stages.pose=ue.PENDING),t.factoryContext.settings.physics&&(this.stages.physics=ue.PENDING)),this.updateText()}updateText(){this.text=Object.entries(this.stages).map(([e,t])=>{if(t===ue.NOT_AVAILABLE)return"";let o;switch(t){case ue.PENDING:o="[ ]";break;case ue.COMPLETED:o="[x]";break;case ue.FAILED:o=" X ";break}return`${o} Loading ${(0,ve.A)(e)}`}).filter(Boolean).join("\n")}}const pe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mMU22h6EgADqAHHuWdgTgAAAABJRU5ErkJggg==";let fe=1;class he extends k.bk{constructor(e,t){super(),this.id=fe++,this.url="",this.thumbnail="",this.aspectRatio=1,this.name="New Model",this.visible=!0,this._scaleX=1,this._scaleY=1,this._rotation=0,this._zIndex=0,this.filters=[],this.loadingState=new me,this.error="",this.loadModel(e).then()}async loadModel(e){this.url="string"===typeof e?e:"(Local files)";const t=new ne;this.loadingState.watch(t);try{await d.dq.setupLive2DModel(t,e),this.modelLoaded(t),this.emit("modelLoaded",t)}catch(o){console.warn(o),this.error=o instanceof Error?o.message:o+""}}modelLoaded(e){this.pixiModel=e,this.name=e.internalModel.settings.name,this.thumbnail=pe,this.aspectRatio=e.width/e.height,this.updateFilters(),ae(e)}initThumbnail(e){const t=this.pixiModel;ce.W0.RESOLUTION=.2;const o=t.hitAreaFrames.visible,l=t.backgroundVisible;t.hitAreaFrames.visible=!1,t.backgroundVisible=!1;try{const o=e.plugins.extract.canvas(t);o.toBlob(e=>this.thumbnail=URL.createObjectURL(e),"image/webp",.01)}catch(i){console.warn(i)}ce.W0.RESOLUTION=1,t.hitAreaFrames.visible=o,t.backgroundVisible=l}fit(e,t){if(this.pixiModel){let o=Math.min(e/this.pixiModel.width,t/this.pixiModel.height);o=Math.round(10*o)/10,this.scale(o,o)}}scale(e,t){this._scaleX=null!==e&&void 0!==e?e:this._scaleX,this._scaleY=null!==t&&void 0!==t?t:this._scaleY,this.pixiModel&&this.pixiModel.scale.set(this._scaleX,this._scaleY)}rotate(e){this._rotation=e,this.pixiModel&&(this.pixiModel.rotation=e)}setZIndex(e){this._zIndex=e,this.pixiModel&&(this.pixiModel.zIndex=e)}setVisible(e){this.visible=e,this.pixiModel&&(this.pixiModel.visible=e)}updateFilters(){this.pixiModel&&Q.set(this.pixiModel,this.filters)}destroy(){this.pixiModel&&(this.pixiModel.destroy({children:!0}),this.pixiModel=void 0,URL.revokeObjectURL(this.thumbnail))}get zIndex(){return this._zIndex}set zIndex(e){this.setZIndex(e)}get rotation(){return this._rotation}set rotation(e){this.rotate(e)}get scaleY(){return this._scaleY}set scaleY(e){this.scale(void 0,e)}get scaleX(){return this._scaleX}set scaleX(e){this.scale(e,e)}}var ge=o(4825),be=o(8593),ke=o(8355);v.XO.add(m.y,be.M,v.ch,ke.Gv);class xe extends ge.l{constructor(e){super({view:document.getElementById("canvas"),resizeTo:window,antialias:!0,backgroundAlpha:0}),this.ticker.remove(this.render,this),this.ticker.add(()=>{e.begin(),Q.update(this.ticker.deltaMS),this.render(),e.end()})}}var Fe=o(6571),ye=o.n(Fe);function _e(e,t){localStorage.setItem(e,JSON.stringify(t))}function we(e,t){const o=localStorage.getItem(e);return null===o?t:JSON.parse(o)}const Me=new(ye());Me.showPanel(0),Me.dom.style.left="",Me.dom.style.right="0";const Ae=(0,i.nY)("app",{state:()=>({models:[],pixiApp:new xe(Me),volume:we("volume",d.xF.volume),showStats:we("stats",!0),showModelFrame:we("modelFrame",!1),showHitAreaFrames:we("hitAreaFrames",!1)}),actions:{init(){this.updateStatsVisibility(this.showStats),this.updateVolume(this.volume)},addModel(e){const t=new he(e,this.pixiApp.renderer);return this.initModel(t),this.models.push(t),t.id},getModel(e){return this.models.find(t=>t.id===e)},initModel(e){e.on("modelLoaded",async t=>{this.pixiApp.stage.children.includes(t)||(this.pixiApp.stage.addChild(t),t.backgroundVisible=this.showModelFrame,t.hitAreaFrames.visible=this.showHitAreaFrames,t.position.set(this.pixiApp.renderer.width/2,this.pixiApp.renderer.height/2),e.fit(this.pixiApp.renderer.width,this.pixiApp.renderer.height),e.initThumbnail(this.pixiApp.renderer))})},removeModel(e){const t=this.models.find(t=>t.id===e);t&&(this.models.splice(this.models.indexOf(t),1),t.pixiModel&&this.pixiApp.stage.removeChild(t.pixiModel),t.destroy())},updateStatsVisibility(e){var t;this.showStats=e,_e("stats",e),e?document.body.appendChild(Me.dom):null===(t=Me.dom.parentElement)||void 0===t||t.removeChild(Me.dom)},updateVolume(e){this.volume=e,_e("volume",e),d.xF.volume=e},updateModelFrame(e){this.showModelFrame=e,_e("modelFrame",e);for(const t of this.models)(null===t||void 0===t?void 0:t.pixiModel)&&(t.pixiModel.backgroundVisible=e)},updateHitAreaFrames(e){this.showHitAreaFrames=e,_e("hitAreaFrames",e);for(const t of this.models)(null===t||void 0===t?void 0:t.pixiModel)&&(t.pixiModel.hitAreaFrames.visible=e)}}}),Ve={class:"model-item-title text-truncate"};var Ee=(0,n.pM)({__name:"ModelList",props:{modelValue:{},show:{type:Boolean}},emits:["update:modelValue"],setup(e,{emit:t}){const o=e,i=t,s=(0,r._F)(),d=Ae(),u=(0,n.EW)(()=>d.models),c=(0,n.EW)(()=>s.xl.value?192:144),v=(0,n.EW)(()=>u.value.findIndex(e=>e.id===o.modelValue));function m(e){var t,o;const l=null!==(o=null===(t=u.value[e])||void 0===t?void 0:t.id)&&void 0!==o?o:0;i("update:modelValue",l)}function p(e){1===u.value.length&&i("update:modelValue",0),d.removeModel(e)}return(t,o)=>{const i=(0,n.g2)("v-progress-circular"),s=(0,n.g2)("v-icon"),r=(0,n.g2)("v-row"),d=(0,n.g2)("v-spacer"),f=(0,n.g2)("v-btn"),h=(0,n.g2)("v-card-title"),g=(0,n.g2)("v-img"),b=(0,n.g2)("v-tooltip"),k=(0,n.g2)("v-card"),x=(0,n.g2)("v-item"),F=(0,n.g2)("v-item-group"),y=(0,n.g2)("v-sheet"),_=(0,n.g2)("v-slide-y-reverse-transition");return(0,n.uX)(),(0,n.Wv)(_,null,{default:(0,n.k6)(()=>[e.show&&u.value.length?((0,n.uX)(),(0,n.Wv)(y,{key:0,class:"model-list",width:"100%"},{default:(0,n.k6)(()=>[(0,n.bF)(F,{mandatory:"",class:"flex-grow-1","model-value":v.value,"onUpdate:modelValue":m},{default:(0,n.k6)(()=>[(0,n.bF)(l.F,{class:"model-group d-flex pa-1 pa-xl-2",name:"move"},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(u.value,(e,t)=>((0,n.uX)(),(0,n.Wv)(x,{key:e.id},{default:(0,n.k6)(({isSelected:t,toggle:u})=>[(0,n.bF)(k,{color:e.error?"#631f1f":t?"grey darken-2":"grey darken-3",class:"ma-1 ma-xl-2",onClick:u},{default:(0,n.k6)(()=>[(0,n.bF)(b,{top:"",disabled:!e.error},{activator:(0,n.k6)(({props:u})=>[(0,n.bF)(g,(0,n.v6)({src:e.thumbnail,width:e.error?c.value:e.aspectRatio*c.value,height:c.value},{ref_for:!0},u),{placeholder:(0,n.k6)(()=>[(0,n.bF)(r,{class:"fill-height ma-0",align:"center",justify:"center"},{default:(0,n.k6)(()=>[e.error?((0,n.uX)(),(0,n.Wv)(s,{key:1},{default:(0,n.k6)(()=>[...o[0]||(o[0]=[(0,n.eW)("mdi-alert-circle",-1)])]),_:1})):((0,n.uX)(),(0,n.Wv)(i,{key:0,indeterminate:"",color:"grey lighten-5"}))]),_:2},1024)]),default:(0,n.k6)(()=>[(0,n.bF)(h,{class:"ml-1 pa-0 flex-nowrap text-subtitle-2 text-xl-subtitle-1"},{default:(0,n.k6)(()=>[(0,n.Lk)("span",Ve,(0,a.v_)("#"+e.id+" "+e.name),1),(0,n.bF)(d),t?((0,n.uX)(),(0,n.Wv)(f,{key:0,icon:"",onClick:(0,l.D$)(t=>p(e.id),["stop"])},{default:(0,n.k6)(()=>[(0,n.bF)(s,{size:"20"},{default:(0,n.k6)(()=>[...o[1]||(o[1]=[(0,n.eW)("mdi-close",-1)])]),_:1})]),_:1},8,["onClick"])):(0,n.Q3)("",!0)]),_:2},1024)]),_:2},1040,["src","width","height"])]),default:(0,n.k6)(()=>[(0,n.eW)(" "+(0,a.v_)(e.error),1)]),_:2},1032,["disabled"])]),_:2},1032,["color","onClick"])]),_:2},1024))),128))]),_:1})]),_:1},8,["model-value"])]),_:1})):(0,n.Q3)("",!0)]),_:1})}}}),Le=o(6262);const Re=(0,Le.A)(Ee,[["__scopeId","data-v-50c9541d"]]);var We=Re,Ce=o(8599),Oe=(0,n.pM)({__name:"ModelPicker",props:{modelValue:{type:Boolean}},emits:["update:modelValue","select"],setup(e,{emit:t}){const o=t,l=(0,s.KR)(W()),i=(0,s.KR)([]),r=(0,s.KR)([]),d=(0,s.KR)(-1),u=(0,n.EW)(()=>r.value.length&&r.value[0].files||[]);async function c(e){await C(e)}function v(e){const t=(0,Ce.A)(e,i.value);t.length?(r.value=t.slice(0),i.value=e):r.value=l.value.slice(0,1)}function m(){if(r.value.length&&d.value>=0){const e=S(r.value[0],u.value[d.value]);e&&o("select",e)}o("update:modelValue",!1)}return(0,n.wB)(r,(e,t)=>{const o=0!==(0,Ce.A)(e,t).length;o&&(d.value=-1)}),(t,o)=>{const i=(0,n.g2)("v-toolbar-title"),s=(0,n.g2)("v-spacer"),p=(0,n.g2)("v-icon"),f=(0,n.g2)("v-btn"),h=(0,n.g2)("v-toolbar"),g=(0,n.g2)("v-chip"),b=(0,n.g2)("v-treeview"),k=(0,n.g2)("v-col"),x=(0,n.g2)("v-divider"),F=(0,n.g2)("v-list-item-title"),y=(0,n.g2)("v-list-item-content"),_=(0,n.g2)("v-list-item"),w=(0,n.g2)("v-list-item-group"),M=(0,n.g2)("v-row"),A=(0,n.g2)("v-card-actions"),V=(0,n.g2)("v-card"),E=(0,n.g2)("v-dialog");return(0,n.uX)(),(0,n.Wv)(E,{"model-value":e.modelValue,"onUpdate:modelValue":o[2]||(o[2]=e=>t.$emit("update:modelValue",e)),width:"1500","max-width":"90vw"},{default:(0,n.k6)(()=>[(0,n.bF)(V,{height:"1000","max-height":"90vh",class:"d-flex flex-column"},{default:(0,n.k6)(()=>[(0,n.bF)(h,{color:"primary",flat:"",dense:"",class:"flex-grow-0"},{default:(0,n.k6)(()=>[(0,n.bF)(i,null,{default:(0,n.k6)(()=>[...o[3]||(o[3]=[(0,n.eW)("Select a Model",-1)])]),_:1}),(0,n.bF)(s),(0,n.bF)(f,{icon:"",onClick:m},{default:(0,n.k6)(()=>[(0,n.bF)(p,null,{default:(0,n.k6)(()=>[...o[4]||(o[4]=[(0,n.eW)("mdi-checkbox-marked-circle-outline",-1)])]),_:1})]),_:1})]),_:1}),(0,n.bF)(M,{"no-gutters":"",class:"content-row flex-grow-1"},{default:(0,n.k6)(()=>[(0,n.bF)(k,{class:"content-col"},{default:(0,n.k6)(()=>[(0,n.bF)(b,{activatable:"","return-object":"","load-children":c,active:r.value,items:l.value,"item-key":"id","open-on-click":"","onUpdate:active":o[0]||(o[0]=e=>e.length&&(r.value=e)),"onUpdate:open":v},{prepend:(0,n.k6)(({open:e})=>[(0,n.bF)(p,null,{default:(0,n.k6)(()=>[(0,n.eW)((0,a.v_)(e?"mdi-folder-open":"mdi-folder"),1)]),_:2},1024)]),label:(0,n.k6)(({item:e})=>[(0,n.Lk)("span",{class:(0,a.C4)({"text-decoration-line-through":e.error})},(0,a.v_)(e.name),3),(0,n.bF)(g,{"x-small":"",class:"model-count ml-1 px-2 text--secondary"},{default:(0,n.k6)(()=>[(0,n.eW)((0,a.v_)(e.modelCount),1)]),_:2},1024)]),_:1},8,["active","items"])]),_:1}),(0,n.bF)(x,{vertical:""}),(0,n.bF)(k,{class:"content-col"},{default:(0,n.k6)(()=>[(0,n.bF)(w,{modelValue:d.value,"onUpdate:modelValue":o[1]||(o[1]=e=>d.value=e)},{default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(u.value,(e,t)=>((0,n.uX)(),(0,n.Wv)(_,{key:e,color:"primary",onDblclick:e=>{d.value=t,m()}},{default:(0,n.k6)(()=>[(0,n.bF)(y,null,{default:(0,n.k6)(()=>[(0,n.bF)(F,null,{default:(0,n.k6)(()=>[(0,n.eW)((0,a.v_)(e),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onDblclick"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),(0,n.bF)(x),(0,n.bF)(A,null,{default:(0,n.k6)(()=>[...o[5]||(o[5]=[(0,n.Lk)("span",{class:"text--secondary text-caption"},[(0,n.eW)("The listed models were scraped from "),(0,n.Lk)("a",{target:"_blank",href:"https://github.com/Eikanya/Live2d-model"},"Eikanya/Live2d-model"),(0,n.eW)(". All credit goes to their respective creators.")],-1)])]),_:1})]),_:1})]),_:1},8,["model-value"])}}});const Ie=(0,Le.A)(Oe,[["__scopeId","data-v-7ec31440"]]);var Se=Ie;function je(e,t,o){return void 0!==e&&null!==e}function Te(e){return e.split(/[\\/]/).pop()}function Ne(e){var t;return!!(null===(t=e.dataTransfer)||void 0===t?void 0:t.types.some(e=>"Files"===e))}async function Ue(e){const t=[...e].map(e=>e.webkitGetAsEntry()).filter(je);return De(t)}async function De(e){const t=[];return await Promise.all(e.map(async e=>{if(e.isFile)t.push(await Pe(e));else if(e.isDirectory){const o=await Xe(e);t.push(...await De(o))}})),t}function Xe(e){return new Promise((t,o)=>{e.createReader().readEntries(t,o)})}async function Pe(e){const t=await new Promise((t,o)=>e.file(t,o));let o=e.fullPath;return o.startsWith("/")&&(o=o.slice(1)),Object.defineProperty(t,"webkitRelativePath",{value:o}),t}function Ke(e){return new Promise((t,o)=>{const l=new FileReader;l.onload=()=>t(l.result),l.onerror=o,l.readAsDataURL(e)})}const Be=5;const Ge=d.Y9.createSettings;async function $e(e){return 1===e.length&&e[0].name.endsWith(".zip")?[]:e.some(e=>y(e.name))?ze(e):[Je(e)]}async function ze(e){const t=[],o=[];for(const n of e)y(n.name)?t.push(n):o.push(n);let l;t.length>Be&&(console.warn(`Too many settings files (${t.length}/${Be})`),t.length=Be);const i=[];if(await Promise.all(t.map(async e=>{try{const t=[e,...o],l=await d.Y9.createSettings(t);l.validateFiles(t.map(e=>e.webkitRelativePath)),i.push(l)}catch(t){l=l||t,console.warn(t)}})),!i.length)throw l;return i}function Je(e){const t=e.filter(e=>M(e.name));if(1!==t.length){const e=t.length?`(${t.map(e=>`"${e}"`).join(",")})`:"";throw new Error(`Expected exactly one moc file, got ${t.length} ${e}`)}const o=t[0].webkitRelativePath,l=Te(o).replace(/\.moc3?/,""),i=e.map(e=>e.webkitRelativePath),n=i.filter(e=>e.endsWith(".png"));if(!n.length)throw new Error("Textures not found");const a=i.filter(e=>e.endsWith(".mtn")||e.endsWith(".motion3.json")),s=i.find(e=>e.includes("physics")),r=i.find(e=>e.includes("pose"));let u;return u=_(o)?new d.W7({url:l+".model.json",textures:n,pose:r,physics:s,model:o,motions:a.length?{"":a.map(e=>({file:e}))}:void 0}):new d.EX({url:l+".model3.json",Version:3,FileReferences:{Moc:o,Textures:n,Physics:s,Pose:r,Motions:a.length?{"":a.map(e=>({File:e}))}:void 0}}),u.name=l,u._objectURL="DontTouchMe://"+u.url,u}d.Y9.createSettings=async e=>e.find(e=>y(e.name))?Ge(e):Je(e);const Ye={class:"d-flex align-center"};var He=(0,n.pM)({__name:"ModelCreation",props:{modelValue:{type:Boolean}},emits:["update:modelValue","create","error"],setup(e,{emit:t}){const o=t,i=Ae(),a=(0,s.KR)("https://cdn.jsdelivr.net/gh/Eikanya/Live2d-model/Live2D/Senko_Normals/senko.model3.json"),r=(0,s.KR)(!1),d=(0,s.Kh)({dialog:!1}),u=(0,s.KR)(!1),c=(0,s.KR)([]),v=(0,s.KR)(null);async function m(e){var t;const o=e.target;if(null===(t=o.files)||void 0===t?void 0:t.length){const e=Array.from(o.files);await p(e),o.value=""}}async function p(e){try{const t=await $e(e);let l;if(t.length)for(const o of t){const t=e.slice();t.settings=o,l=i.addModel(t)}else l=i.addModel(e);o("update:modelValue",!1),o("create",l)}catch(t){t instanceof Error&&(t.message="Failed to load model: "+t.message),o("error",t)}}function f(){if(a.value=a.value.replace(/\s/,""),a.value||(u.value=!0,c.value=["Please enter a URL"]),u.value)return;const e=i.addModel(a.value);o("update:modelValue",!1),o("create",e)}return(0,n.wB)(a,e=>{const t=N(e)||"";u.value=/error/i.test(t),c.value=[t].filter(Boolean)}),(t,o)=>{const i=(0,n.g2)("v-toolbar-title"),s=(0,n.g2)("v-spacer"),p=(0,n.g2)("v-icon"),h=(0,n.g2)("v-btn"),g=(0,n.g2)("v-toolbar"),b=(0,n.g2)("v-text-field"),k=(0,n.g2)("v-card-text"),x=(0,n.g2)("v-card"),F=(0,n.g2)("v-img"),y=(0,n.g2)("v-dialog");return(0,n.uX)(),(0,n.Wv)(y,{"model-value":e.modelValue,width:"800","onUpdate:modelValue":o[8]||(o[8]=e=>t.$emit("update:modelValue",e))},{default:(0,n.k6)(()=>[(0,n.bF)(x,null,{default:(0,n.k6)(()=>[(0,n.bF)(g,{color:"primary",flat:"",dense:"",class:"flex-grow-0"},{default:(0,n.k6)(()=>[(0,n.bF)(i,null,{default:(0,n.k6)(()=>[...o[9]||(o[9]=[(0,n.eW)("Create Model",-1)])]),_:1}),(0,n.bF)(s),(0,n.bF)(h,{icon:"",onClick:f},{default:(0,n.k6)(()=>[(0,n.bF)(p,null,{default:(0,n.k6)(()=>[...o[10]||(o[10]=[(0,n.eW)("mdi-checkbox-marked-circle-outline",-1)])]),_:1})]),_:1})]),_:1}),(0,n.bF)(k,{class:"pa-8"},{default:(0,n.k6)(()=>[(0,n.bF)(b,{"single-line":"",filled:"",label:"URL",modelValue:a.value,"onUpdate:modelValue":o[0]||(o[0]=e=>a.value=e),messages:c.value,error:u.value,onKeyup:(0,l.jR)(f,["enter"])},null,8,["modelValue","messages","error"]),(0,n.Lk)("div",Ye,[(0,n.bF)(h,{icon:"",small:"",color:"grey",onClick:o[1]||(o[1]=e=>r.value=!0)},{default:(0,n.k6)(()=>[(0,n.bF)(p,{size:"20"},{default:(0,n.k6)(()=>[...o[11]||(o[11]=[(0,n.eW)("mdi-help-circle",-1)])]),_:1})]),_:1}),o[16]||(o[16]=(0,n.Lk)("span",null,"Drag and drop supported",-1)),(0,n.bF)(s),(0,n.Lk)("input",{type:"file",ref_key:"fileInput",ref:v,multiple:"",style:{display:"none"},onChange:m,accept:".json,.moc,.moc3,.png,.jpg,.jpeg,.zip,.mtn,.motion3.json,.physics.json,.physics3.json,.pose.json,.pose3.json"},null,544),(0,n.bF)(h,{color:"blue-grey",class:"mr-4",onClick:o[2]||(o[2]=e=>{var t;return null===(t=v.value)||void 0===t?void 0:t.click()})},{default:(0,n.k6)(()=>[o[13]||(o[13]=(0,n.eW)("Open Files ",-1)),(0,n.bF)(p,{right:""},{default:(0,n.k6)(()=>[...o[12]||(o[12]=[(0,n.eW)("mdi-folder-open",-1)])]),_:1})]),_:1}),(0,n.bF)(h,{color:"blue-grey",onClick:o[3]||(o[3]=e=>d.dialog=!0)},{default:(0,n.k6)(()=>[o[15]||(o[15]=(0,n.eW)("From source...",-1)),(0,n.bF)(p,{right:""},{default:(0,n.k6)(()=>[...o[14]||(o[14]=[(0,n.eW)(" mdi-cloud-search",-1)])]),_:1})]),_:1})])]),_:1})]),_:1}),(0,n.bF)(y,{width:"1000","max-width":"80vw",modelValue:r.value,"onUpdate:modelValue":o[5]||(o[5]=e=>r.value=e)},{default:(0,n.k6)(()=>[(0,n.bF)(F,{src:"drop.jpg",onClick:o[4]||(o[4]=e=>r.value=!1)})]),_:1},8,["modelValue"]),(0,n.bF)(Se,{modelValue:d.dialog,"onUpdate:modelValue":o[6]||(o[6]=e=>d.dialog=e),onSelect:o[7]||(o[7]=e=>a.value=e)},null,8,["modelValue"])]),_:1},8,["model-value"])}}});const Ze=He;var Qe=Ze,qe=o(925);const et={key:0,class:"motion-progress"},tt={class:"pa-3 text--secondary"},ot={key:0,class:"error--text px-3 text-wrap"};var lt=(0,n.pM)({__name:"ModelEditor",props:{id:{type:Number,default:0},visible:Boolean},setup(e){const t=e,o=Ae(),l=(0,s.KR)(null),i=(0,s.KR)(["display"]),r=(0,s.KR)([]),u=(0,s.KR)(null),c=(0,s.KR)(-1),v=(0,s.KR)([]),m=(0,s.KR)(-1),p=(0,s.KR)(-1),f=(0,s.KR)(Object.keys(Q.filters)),h=(0,s.KR)(null),g=(0,n.EW)(()=>!!u.value),b=(0,n.EW)(()=>{var e;return Math.round(((null===(e=l.value)||void 0===e?void 0:e.rotation)||0)/Math.PI*180)+"°"}),k=(0,n.EW)(()=>i.value.includes("motions"));function x(){F(),l.value=o.getModel(t.id),l.value&&(l.value.pixiModel?y(l.value.pixiModel):l.value.once("modelLoaded",y))}function F(){var e,t,o,i,n,a,s;l.value&&(l.value.off("modelLoaded",y),null===(e=l.value.pixiModel)||void 0===e||e.off("expressionSet",_),null===(t=l.value.pixiModel)||void 0===t||t.off("expressionReserved",w),null===(i=null===(o=l.value.pixiModel)||void 0===o?void 0:o.internalModel.motionManager)||void 0===i||i.off("motionLoadError",M),null===(s=null===(a=null===(n=l.value.pixiModel)||void 0===n?void 0:n.internalModel.motionManager)||void 0===a?void 0:a.expressionManager)||void 0===s||s.off("expressionLoadError",A),r.value=[],u.value=void 0,l.value=void 0)}function y(e){var t,o;const l=e.internalModel.motionManager,i=[],n=l.definitions;for(const[s,r]of Object.entries(n))i.push({name:s,motions:(null===r||void 0===r?void 0:r.map((e,t)=>({file:e.file||e.File||"",error:null===l.motionGroups[s][t]?"Failed to load":void 0})))||[]});r.value=i,u.value=l.state;const a=l.expressionManager;v.value=(null===a||void 0===a?void 0:a.definitions.map((e,t)=>({file:e.file||e.File||"",error:null===a.expressions[t]?"Failed to load":void 0})))||[],m.value=null!==(t=null===a||void 0===a?void 0:a.expressions.indexOf(a.currentExpression))&&void 0!==t?t:-1,p.value=null!==(o=null===a||void 0===a?void 0:a.reserveExpressionIndex)&&void 0!==o?o:-1,e.on("expressionSet",_),e.on("expressionReserved",w),l.on("motionLoadError",M),null===a||void 0===a||a.on("expressionLoadError",A)}function _(e){m.value=e}function w(e){p.value=e}function M(e,t,o){const l=r.value.find(t=>t.name===e);l&&(l.motions[t].error=o)}function A(e,t){v.value[e].error=t}function V(e,t){var o,i;null===(i=null===(o=l.value)||void 0===o?void 0:o.pixiModel)||void 0===i||i.motion(e.name,t,d.Di.FORCE)}function E(e){var t,o;null===(o=null===(t=l.value)||void 0===t?void 0:t.pixiModel)||void 0===o||o.expression(e)}function L(){var e,o;if(!((null===(e=l.value)||void 0===e?void 0:e.pixiModel)&&void 0!==(null===(o=u.value)||void 0===o?void 0:o.currentGroup)&&k.value&&t.visible&&h.value))return;const i=l.value.pixiModel.currentMotionStartTime,n=l.value.pixiModel.currentMotionDuration,a=(0,qe.A)((l.value.pixiModel.elapsedTime-i)/n,0,1);h.value.style.setProperty("--progress",100*a+"%")}return(0,n.wB)(()=>t.id,x,{immediate:!0}),(0,n.wB)(()=>{var e;return null===(e=l.value)||void 0===e?void 0:e.filters},()=>{var e;return null===(e=l.value)||void 0===e?void 0:e.updateFilters()}),(0,n.wB)(()=>{var e;return null===(e=u.value)||void 0===e?void 0:e.currentGroup},L),(0,n.sV)(()=>{c.value=window.setInterval(L,50)}),(0,n.xo)(()=>{F(),clearInterval(c.value)}),(e,t)=>{const o=(0,n.g2)("v-list-item"),s=(0,n.g2)("v-slider"),d=(0,n.g2)("v-list-item-content"),c=(0,n.g2)("v-list-group"),k=(0,n.g2)("v-list-item-title"),x=(0,n.g2)("v-list-subheader"),F=(0,n.g2)("v-icon"),y=(0,n.g2)("v-progress-circular"),_=(0,n.g2)("v-checkbox"),w=(0,n.g2)("v-list");return l.value?((0,n.uX)(),(0,n.CE)("div",{key:0,class:"model-editor",ref_key:"rootElement",ref:h},[g.value?((0,n.uX)(),(0,n.Wv)(w,{key:0,expand:"",opened:i.value,"onUpdate:opened":t[3]||(t[3]=e=>i.value=e)},{default:(0,n.k6)(()=>[(0,n.bF)(c,{value:"display"},{activator:(0,n.k6)(({props:e})=>[(0,n.bF)(o,(0,n.v6)(e,{title:"Display"}),null,16)]),default:(0,n.k6)(()=>[(0,n.bF)(o,null,{default:(0,n.k6)(()=>[(0,n.bF)(d,null,{default:(0,n.k6)(()=>[(0,n.Lk)("div",null,[(0,n.bF)(s,{dense:"",class:"mt-2","prepend-icon":"mdi-magnify",modelValue:l.value.scaleX,"onUpdate:modelValue":t[0]||(t[0]=e=>l.value.scaleX=e),messages:String(l.value.scaleX),min:"0.01",max:"3",step:"0.01"},null,8,["modelValue","messages"]),(0,n.bF)(s,{dense:"",class:"mt-2","prepend-icon":"mdi-rotate-right",modelValue:l.value.rotation,"onUpdate:modelValue":t[1]||(t[1]=e=>l.value.rotation=e),messages:b.value,min:"0",max:"6.28",step:"0.01"},null,8,["modelValue","messages"])])]),_:1})]),_:1})]),_:1}),(0,n.bF)(c,{value:"motions","data-set":e.motionCount=r.value.reduce((e,{motions:t})=>e+t.length,0)},{activator:(0,n.k6)(({props:t})=>[(0,n.bF)(o,(0,a._B)((0,n.Ng)(t)),{default:(0,n.k6)(()=>[(0,n.bF)(k,{class:(0,a.C4)({"text--secondary":!e.motionCount})},{default:(0,n.k6)(()=>[(0,n.eW)("Motions ("+(0,a.v_)(e.motionCount)+") ",1)]),_:1},8,["class"])]),_:1},16)]),default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(r.value,l=>((0,n.uX)(),(0,n.CE)(n.FK,{key:l.name},[(0,n.bF)(x,{class:"px-3"},{default:(0,n.k6)(()=>[(0,n.eW)((0,a.v_)(l.name||"(Nameless)"),1)]),_:2},1024),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(l.motions,(i,s)=>{var r,c;return(0,n.uX)(),(0,n.Wv)(o,{ripple:"",key:l.name+s,"data-set":e.active=(null===(r=u.value)||void 0===r?void 0:r.currentGroup)===l.name&&(null===(c=u.value)||void 0===c?void 0:c.currentIndex)===s,disabled:!!i.error,onClick:e=>V(l,s)},{append:(0,n.k6)(()=>{var o,i,a,r;return[e.active?((0,n.uX)(),(0,n.Wv)(F,{key:0,size:"32",color:"primary"},{default:(0,n.k6)(()=>[...t[4]||(t[4]=[(0,n.eW)("mdi-play",-1)])]),_:1})):(null===(o=u.value)||void 0===o?void 0:o.reservedGroup)===l.name&&(null===(i=u.value)||void 0===i?void 0:i.reservedIndex)===s||(null===(a=u.value)||void 0===a?void 0:a.reservedIdleGroup)===l.name&&(null===(r=u.value)||void 0===r?void 0:r.reservedIdleIndex)===s?((0,n.uX)(),(0,n.Wv)(y,{key:1,indeterminate:"",size:"20",width:"2"})):(0,n.Q3)("",!0)]}),default:(0,n.k6)(()=>[e.active?((0,n.uX)(),(0,n.CE)("div",et)):(0,n.Q3)("",!0),(0,n.bF)(d,null,{default:(0,n.k6)(()=>[(0,n.bF)(k,{class:(0,a.C4)({"primary--text":e.active,"text-decoration-line-through":i.error})},{default:(0,n.k6)(()=>[(0,n.eW)((0,a.v_)(i.file.replace(".mtn","").replace(".motion3.json","")),1)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1032,["data-set","disabled","onClick"])}),128))],64))),128))]),_:1},8,["data-set"]),(0,n.bF)(c,{value:"expressions"},{activator:(0,n.k6)(({props:e})=>[(0,n.bF)(o,(0,a._B)((0,n.Ng)(e)),{default:(0,n.k6)(()=>[(0,n.bF)(k,{class:(0,a.C4)({"text--secondary":!v.value.length})},{default:(0,n.k6)(()=>[(0,n.eW)("Expressions ("+(0,a.v_)(v.value.length)+") ",1)]),_:1},8,["class"])]),_:1},16)]),default:(0,n.k6)(()=>[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(v.value,(l,i)=>((0,n.uX)(),(0,n.Wv)(o,{ripple:"",key:i,"data-set":e.active=m.value===i,disabled:!!l.error,onClick:e=>E(i)},{append:(0,n.k6)(()=>[e.active?((0,n.uX)(),(0,n.Wv)(F,{key:0,size:"28",color:"primary"},{default:(0,n.k6)(()=>[...t[5]||(t[5]=[(0,n.eW)("mdi-emoticon-outline",-1)])]),_:1})):p.value===i?((0,n.uX)(),(0,n.Wv)(y,{key:1,indeterminate:"",size:"20",width:"2"})):(0,n.Q3)("",!0)]),default:(0,n.k6)(()=>[(0,n.bF)(d,null,{default:(0,n.k6)(()=>[(0,n.bF)(k,{class:(0,a.C4)({"primary--text":e.active,"text-decoration-line-through":l.error})},{default:(0,n.k6)(()=>[(0,n.eW)((0,a.v_)(l.file.replace(".exp.json","").replace(".exp3.json","")),1)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1032,["data-set","disabled","onClick"]))),128))]),_:1}),(0,n.bF)(c,{value:"filters"},{activator:(0,n.k6)(({props:e})=>[(0,n.bF)(o,(0,n.v6)(e,{title:"Filters"}),null,16)]),default:(0,n.k6)(()=>[t[6]||(t[6]=(0,n.Lk)("div",{class:"mt-3"},null,-1)),((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(f.value,e=>((0,n.uX)(),(0,n.Wv)(_,{modelValue:l.value.filters,"onUpdate:modelValue":t[2]||(t[2]=e=>l.value.filters=e),class:"v-input--reverse mx-3 mt-0",key:e,label:e+(e=>e?` [${e}]`:"")(l.value.filters.indexOf(e)+1),value:e},null,8,["modelValue","label","value"]))),128))]),_:1})]),_:1},8,["opened"])):((0,n.uX)(),(0,n.CE)(n.FK,{key:1},[(0,n.Lk)("pre",tt,(0,a.v_)(l.value.loadingState.text),1),l.value.error?((0,n.uX)(),(0,n.CE)("pre",ot,(0,a.v_)(l.value.error),1)):(0,n.Q3)("",!0)],64))],512)):(0,n.Q3)("",!0)}}});const it=(0,Le.A)(lt,[["__scopeId","data-v-46bbfd08"]]);var nt=it;const at="_bg";var st;(function(e){let t,o="";async function l(t){const l=URL.createObjectURL(t);document.body.style.backgroundImage=`url(${l})`,e.current=t.name,e.emitter.emit("change",e.current),o=l;const i=await Ke(t);o===l&&localStorage.setItem(at,i),URL.revokeObjectURL(l)}function i(){e.current="",document.body.style.backgroundImage="",document.body.style.backgroundColor="#222222",localStorage.removeItem(at),t&&(document.head.removeChild(t),t=void 0),e.emitter.emit("change",e.current)}function n(){t=document.createElement("style");const o=localStorage.getItem("_bg");o?(t.innerText=`body {background-image: url(${o});}`,e.current="(local file)"):t.innerText="body {background-color: #222222;}",document.head.appendChild(t),document.body.style.backgroundSize="cover"}e.emitter=new k.bk,e.current="",e.set=l,e.reset=i,n()})(st||(st={}));const rt={key:0,class:"text-h1"};var dt=(0,n.pM)({__name:"DropZone",emits:["create","error"],setup(e,{emit:t}){const o=t,l=Ae(),i=(0,s.KR)(!1);async function r(e){var t;if(e.preventDefault(),i.value=!1,null===(t=e.dataTransfer)||void 0===t?void 0:t.items.length){const t=await Ue(e.dataTransfer.items);1===t.length&&t[0].type.includes("image")?st.set(t[0]).catch(console.warn):d(t).then()}}async function d(e){try{const t=await $e(e);let i;if(t.length)for(const o of t){const t=e.slice();t.settings=o,i=l.addModel(t)}else i=l.addModel(e);o("create",i)}catch(t){t instanceof Error&&(t.message="Failed to load model: "+t.message),o("error",t)}}return(0,n.sV)(()=>{document.ondragenter=e=>Ne(e)&&(i.value=!0),document.ondragleave=e=>Ne(e)&&(i.value=!!e.relatedTarget),document.ondragover=e=>Ne(e)&&e.preventDefault(),document.ondrop=e=>Ne(e)&&r(e)}),(e,t)=>((0,n.uX)(),(0,n.CE)("div",{class:(0,a.C4)(["drop-zone",{active:i.value}])},[i.value?((0,n.uX)(),(0,n.CE)("div",rt,"Drop Files")):(0,n.Q3)("",!0)],2))}});const ut=(0,Le.A)(dt,[["__scopeId","data-v-a5b5af7e"]]);var ct=ut;const vt={class:"settings pa-3 flex-column flex-grow-1"},mt={class:"mt-2 d-flex align-center"},pt={class:"pt-4 d-flex align-center"},ft={class:"pt-4 body-2 text--secondary"};var ht=(0,n.pM)({__name:"Settings",setup(e){const t=Ae(),o=new Date(1768375200311).toLocaleString(),l=(0,s.KR)(st.current),i=(0,n.EW)({get:()=>t.volume,set:e=>t.updateVolume(e)}),r=(0,n.EW)({get:()=>t.showStats,set:e=>t.updateStatsVisibility(e)}),d=(0,n.EW)({get:()=>t.showHitAreaFrames,set:e=>t.updateHitAreaFrames(e)}),u=(0,n.EW)({get:()=>t.showModelFrame,set:e=>t.updateModelFrame(e)});function c(){st.reset()}function v(e){l.value=e}return(0,n.sV)(()=>{st.emitter.on("change",v)}),(0,n.xo)(()=>{st.emitter.off("change",v)}),(e,t)=>{const v=(0,n.g2)("v-slider"),m=(0,n.g2)("v-switch"),p=(0,n.g2)("v-divider"),f=(0,n.g2)("v-list-subheader"),h=(0,n.g2)("v-spacer"),g=(0,n.g2)("v-btn"),b=(0,n.g2)("v-icon");return(0,n.uX)(),(0,n.CE)("div",vt,[(0,n.Lk)("div",null,[(0,n.bF)(v,{dense:"",class:"mt-4 mb-10","prepend-icon":"mdi-volume-high",modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=e=>i.value=e),messages:~~(100*i.value)+"%",min:"0",max:"1",step:"0.02"},null,8,["modelValue","messages"]),(0,n.bF)(m,{class:"v-input--reverse",modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=e=>d.value=e),label:"Show hit area frames"},null,8,["modelValue"]),(0,n.bF)(m,{class:"v-input--reverse",modelValue:u.value,"onUpdate:modelValue":t[2]||(t[2]=e=>u.value=e),label:"Show model frames"},null,8,["modelValue"]),(0,n.bF)(m,{class:"v-input--reverse",modelValue:r.value,"onUpdate:modelValue":t[3]||(t[3]=e=>r.value=e),label:"Show stats"},null,8,["modelValue"]),l.value?((0,n.uX)(),(0,n.CE)(n.FK,{key:0},[(0,n.bF)(p),(0,n.bF)(f,{class:"px-0"},{default:(0,n.k6)(()=>[...t[4]||(t[4]=[(0,n.eW)("Background",-1)])]),_:1}),(0,n.Lk)("div",mt,[(0,n.Lk)("span",null,(0,a.v_)(l.value),1),(0,n.bF)(h),(0,n.bF)(g,{color:"secondary",onClick:c},{default:(0,n.k6)(()=>[...t[5]||(t[5]=[(0,n.eW)("Reset",-1)])]),_:1})])],64)):(0,n.Q3)("",!0)]),(0,n.bF)(h),(0,n.bF)(p),(0,n.Lk)("div",pt,[(0,n.bF)(b,{class:"mr-2"},{default:(0,n.k6)(()=>[...t[6]||(t[6]=[(0,n.eW)("mdi-github",-1)])]),_:1}),t[7]||(t[7]=(0,n.Lk)("span",null,[(0,n.eW)("View source or report bugs on "),(0,n.Lk)("a",{href:"https://github.com/guansss/live2d-viewer-web",class:"text-decoration-none"},"GitHub")],-1))]),(0,n.Lk)("span",ft,"Last built: "+(0,a.v_)((0,s.R1)(o)),1)])}}});const gt=(0,Le.A)(ht,[["__scopeId","data-v-b7b357a0"]]);var bt=gt;const kt={class:"mb-6 text-no-wrap"},xt={class:"code"};var Ft=(0,n.pM)({__name:"ModelInfo",props:{modelValue:{type:Boolean},id:{}},emits:["update:modelValue"],setup(e){const t=e,o=Ae(),l=(0,s.KR)(""),i=(0,s.KR)("");function r(){console.log(JSON.parse(i.value))}return(0,n.wB)(()=>t.modelValue,e=>{var n;if(e){const e=o.getModel(t.id),a=null===(n=null===e||void 0===e?void 0:e.pixiModel)||void 0===n?void 0:n.internalModel.settings;l.value=(null===e||void 0===e?void 0:e.url)||"",i.value=JSON.stringify((null===a||void 0===a?void 0:a.json)||{},null,2)}}),(t,o)=>{const s=(0,n.g2)("v-toolbar-title"),d=(0,n.g2)("v-spacer"),u=(0,n.g2)("v-icon"),c=(0,n.g2)("v-btn"),v=(0,n.g2)("v-tooltip"),m=(0,n.g2)("v-toolbar"),p=(0,n.g2)("v-card-text"),f=(0,n.g2)("v-card"),h=(0,n.g2)("v-dialog");return(0,n.uX)(),(0,n.Wv)(h,{width:"1000","max-width":"90vw","model-value":e.modelValue,"onUpdate:modelValue":o[1]||(o[1]=e=>t.$emit("update:modelValue",e))},{default:(0,n.k6)(()=>[(0,n.bF)(f,{height:"90vh",class:"d-flex flex-column"},{default:(0,n.k6)(()=>[(0,n.bF)(m,{color:"primary",flat:"",dense:"",class:"flex-grow-0"},{default:(0,n.k6)(()=>[(0,n.bF)(s,null,{default:(0,n.k6)(()=>[...o[2]||(o[2]=[(0,n.eW)("Model Info",-1)])]),_:1}),(0,n.bF)(d),(0,n.bF)(v,{bottom:""},{activator:(0,n.k6)(({props:e})=>[(0,n.bF)(c,(0,n.v6)({icon:"",onClick:r},e),{default:(0,n.k6)(()=>[(0,n.bF)(u,null,{default:(0,n.k6)(()=>[...o[3]||(o[3]=[(0,n.eW)("mdi-console",-1)])]),_:1})]),_:1},16)]),default:(0,n.k6)(()=>[o[4]||(o[4]=(0,n.Lk)("span",null,"Print to console",-1))]),_:1}),(0,n.bF)(c,{icon:"",onClick:o[0]||(o[0]=e=>t.$emit("update:modelValue",!1))},{default:(0,n.k6)(()=>[(0,n.bF)(u,null,{default:(0,n.k6)(()=>[...o[5]||(o[5]=[(0,n.eW)("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),(0,n.bF)(p,{class:"pa-8 overflow-auto"},{default:(0,n.k6)(()=>[(0,n.Lk)("div",kt,"URL: "+(0,a.v_)(l.value),1),(0,n.Lk)("pre",xt,(0,a.v_)(i.value),1)]),_:1})]),_:1})]),_:1},8,["model-value"])}}});const yt=(0,Le.A)(Ft,[["__scopeId","data-v-4bddc8c3"]]);var _t=yt;const wt={class:"model-page"},Mt={class:"header pa-3"},At={class:"d-flex align-center"},Vt={class:"text-h4"};var Et=(0,n.pM)({__name:"App",setup(e){const t=Ae(),o=(0,r._F)(),i=(0,s.KR)(!0),d=(0,s.KR)(!1),u=(0,s.KR)(-1),c=(0,s.Kh)({visible:!0}),v=(0,s.KR)(0),m=(0,s.KR)(!1),p=(0,s.Kh)({dialog:!1,result:null}),f=(0,s.Kh)({visible:!1,message:"",timeout:5e3}),h=(0,n.EW)(()=>o.xl.value?450:360),g=(0,n.EW)(()=>{var e;return(null===(e=t.getModel(v.value))||void 0===e?void 0:e.name)||""});function b(e){i.value=e,c.visible=e,d.value=!1}function k(e,t=5e3){f.message=e,f.timeout=t,f.visible=!0}function x(e){const t=(e instanceof Error?e.message:String(e))||"";t&&k(t,-1)}return(0,n.sV)(()=>{u.value=void 0,p.dialog=!0,st.current||k("Drag and drop a local image to set the background!")}),(e,t)=>{const o=(0,n.g2)("v-toolbar-title"),s=(0,n.g2)("v-spacer"),r=(0,n.g2)("v-icon"),k=(0,n.g2)("v-btn"),F=(0,n.g2)("v-btn-toggle"),y=(0,n.g2)("v-toolbar"),_=(0,n.g2)("v-tooltip"),w=(0,n.g2)("v-divider"),M=(0,n.g2)("v-navigation-drawer"),A=(0,n.g2)("v-container"),V=(0,n.g2)("v-main"),E=(0,n.g2)("v-fab-transition"),L=(0,n.g2)("v-snackbar"),R=(0,n.g2)("v-app");return(0,n.uX)(),(0,n.Wv)(R,null,{default:(0,n.k6)(()=>[(0,n.bF)(M,{absolute:"",stateless:"",width:h.value,modelValue:i.value,"onUpdate:modelValue":t[4]||(t[4]=e=>i.value=e),onTransitionend:t[5]||(t[5]=e=>!i.value&&(d.value=!0))},{default:(0,n.k6)(()=>[(0,n.bF)(y,{color:"primary"},{default:(0,n.k6)(()=>[(0,n.bF)(o,null,{default:(0,n.k6)(()=>[...t[14]||(t[14]=[(0,n.eW)("Live2D Viewer",-1)])]),_:1}),(0,n.bF)(s),(0,n.bF)(F,{group:"",rounded:"",modelValue:u.value,"onUpdate:modelValue":t[0]||(t[0]=e=>u.value=e)},{default:(0,n.k6)(()=>[(0,n.bF)(k,{icon:""},{default:(0,n.k6)(()=>[(0,n.bF)(r,null,{default:(0,n.k6)(()=>[...t[15]||(t[15]=[(0,n.eW)("mdi-cog",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),(0,n.bF)(k,{icon:"",class:"ml-1",onClick:t[1]||(t[1]=e=>b(!1))},{default:(0,n.k6)(()=>[(0,n.bF)(r,null,{default:(0,n.k6)(()=>[...t[16]||(t[16]=[(0,n.eW)("mdi-close",-1)])]),_:1})]),_:1})]),_:1}),(0,n.bo)((0,n.Lk)("div",wt,[(0,n.Lk)("div",Mt,[(0,n.Lk)("div",At,[(0,n.Lk)("div",Vt,(0,a.v_)("#"+v.value),1),(0,n.bF)(s),(0,n.bF)(k,{icon:"",width:"48",height:"48",class:"mr-n3",onClick:t[2]||(t[2]=e=>p.dialog=!0)},{default:(0,n.k6)(()=>[(0,n.bF)(r,null,{default:(0,n.k6)(()=>[...t[17]||(t[17]=[(0,n.eW)("mdi-plus",-1)])]),_:1})]),_:1})]),(0,n.bF)(_,{top:"",disabled:!v.value},{activator:(0,n.k6)(({props:e})=>[(0,n.Lk)("div",(0,n.v6)({class:["model-name mt-2 text-h5",{valid:v.value}],onClick:t[3]||(t[3]=e=>v.value&&(m.value=!0))},e),(0,a.v_)(v.value?g.value:"Press + to create a model"),17)]),default:(0,n.k6)(()=>[t[18]||(t[18]=(0,n.eW)(" Show info ",-1))]),_:1},8,["disabled"])]),(0,n.bF)(w),(0,n.bF)(nt,{id:v.value,visible:i.value&&void 0===u.value},null,8,["id","visible"])],512),[[l.aG,void 0===u.value]]),(0,n.bo)((0,n.bF)(bt,null,null,512),[[l.aG,0===u.value]])]),_:1},8,["width","modelValue"]),(0,n.bF)(V,{style:(0,a.Tr)({paddingLeft:`${h.value}px !important`})},{default:(0,n.k6)(()=>[(0,n.bF)(A,{fluid:"",class:"pa-0 fill-height flex-column"},{default:(0,n.k6)(()=>[(0,n.bF)(s),(0,n.bF)(We,{modelValue:v.value,"onUpdate:modelValue":t[6]||(t[6]=e=>v.value=e),show:c.visible},null,8,["modelValue","show"])]),_:1}),(0,n.bF)(Qe,{modelValue:p.dialog,"onUpdate:modelValue":t[7]||(t[7]=e=>p.dialog=e),onCreate:t[8]||(t[8]=e=>v.value=e),onError:x},null,8,["modelValue"]),(0,n.bF)(_t,{modelValue:m.value,"onUpdate:modelValue":t[9]||(t[9]=e=>m.value=e),id:v.value},null,8,["modelValue","id"])]),_:1},8,["style"]),(0,n.bF)(E,null,{default:(0,n.k6)(()=>[(0,n.bo)((0,n.bF)(k,{fab:"",top:"",left:"",absolute:"",dark:"",color:"accent",onClick:t[10]||(t[10]=e=>b(!0))},{default:(0,n.k6)(()=>[(0,n.bF)(r,null,{default:(0,n.k6)(()=>[...t[19]||(t[19]=[(0,n.eW)("mdi-plus",-1)])]),_:1})]),_:1},512),[[l.aG,d.value]])]),_:1}),(0,n.bF)(ct,{onCreate:t[11]||(t[11]=e=>v.value=e),onError:x}),(0,n.bF)(L,{modelValue:f.visible,"onUpdate:modelValue":t[13]||(t[13]=e=>f.visible=e),timeout:f.timeout},{action:(0,n.k6)(({attrs:e})=>[(0,n.bF)(k,(0,n.v6)({icon:""},e,{onClick:t[12]||(t[12]=e=>f.visible=!1)}),{default:(0,n.k6)(()=>[(0,n.bF)(r,null,{default:(0,n.k6)(()=>[...t[20]||(t[20]=[(0,n.eW)("mdi-close",-1)])]),_:1})]),_:1},16)]),default:(0,n.k6)(()=>[(0,n.eW)((0,a.v_)(f.message)+" ",1)]),_:1},8,["modelValue","timeout"])]),_:1})}}});const Lt=(0,Le.A)(Et,[["__scopeId","data-v-f0f19fd8"]]);var Rt=Lt,Wt=(o(5524),o(3953)),Ct=o(6490),Ot=o(9666),It=o(87),St=(0,Wt.$N)({components:Ct,directives:Ot,icons:{defaultSet:"mdi",aliases:It.z,sets:{mdi:It.r}},theme:{defaultTheme:"dark",themes:{light:{dark:!1,colors:{primary:"#ee44aa",secondary:"#424242",accent:"#82B1FF",error:"#FF5252",info:"#2196F3",success:"#4CAF50",warning:"#FFC107"}},dark:{dark:!0,colors:{primary:"#ee44aa"}}}}});const jt=(0,l.Ef)(Rt),Tt=(0,i.Ey)();jt.use(Tt),jt.use(St),jt.directive("visible",(e,t)=>{e.style.visibility=t.value?"visible":"hidden"});const Nt=Ae();Nt.init(),jt.mount("#app"),window.vueApp=jt,window.config=d.$W,d.$W.logLevel=d.$W.LOG_LEVEL_VERBOSE}},t={};function o(l){var i=t[l];if(void 0!==i)return i.exports;var n=t[l]={id:l,loaded:!1,exports:{}};return e[l].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.m=e,function(){var e=[];o.O=function(t,l,i,n){if(!l){var a=1/0;for(u=0;u<e.length;u++){l=e[u][0],i=e[u][1],n=e[u][2];for(var s=!0,r=0;r<l.length;r++)(!1&n||a>=n)&&Object.keys(o.O).every(function(e){return o.O[e](l[r])})?l.splice(r--,1):(s=!1,n<a&&(a=n));if(s){e.splice(u--,1);var d=i();void 0!==d&&(t=d)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[l,i,n]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var l in t)o.o(t,l)&&!o.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){o.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,l){var i,n,a=l[0],s=l[1],r=l[2],d=0;if(a.some(function(t){return 0!==e[t]})){for(i in s)o.o(s,i)&&(o.m[i]=s[i]);if(r)var u=r(o)}for(t&&t(l);d<a.length;d++)n=a[d],o.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return o.O(u)},l=self["webpackChunklive2d_viewer_web"]=self["webpackChunklive2d_viewer_web"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=o.O(void 0,[504],function(){return o(5600)});l=o.O(l)})();
//# sourceMappingURL=app.69018157.js.map